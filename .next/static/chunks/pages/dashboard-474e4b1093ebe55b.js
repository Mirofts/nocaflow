(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{1075:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return s(1498)}])},1498:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return eF}});var r=s(5893),a=s(7294),n=s(9008),o=s.n(n),i=s(3495),l=s(1526),c=s(4309),d=s(2881),u=s(1065),h=s(6100);let m=(e,t,s,r)=>{let[n,o]=(0,a.useState)([]),[i,l]=(0,a.useState)(!0);(0,a.useEffect)(()=>{if(t){o(r),l(!1);return}if(e){let t=(0,h.hJ)(u.db,"users",e,"todos"),s=(0,h.IO)(t,(0,h.Xo)("createdAt","desc"));l(!0);let r=(0,h.cf)(s,t=>{let s=t.docs.map(e=>({id:e.id,...e.data()}));o(s),l(!1),console.log("Todos fetched for user:",e,s)},e=>{console.error("Error fetching todos in useUserTodos:",e),l(!1)});return()=>r()}o([]),l(!1)},[e,t,r]);let c=async r=>{if(e||t){if(t)s(e=>({...e,tasks:(e.tasks||[]).map(e=>e.id===r?{...e,completed:!e.completed}:e)}));else try{let t=n.find(e=>e.id===r);if(t){let s=(0,h.JU)(u.db,"users",e,"todos",r);await (0,h.r7)(s,{completed:!t.completed}),console.log("Toggled todo in Firebase for user:",e,r)}}catch(e){console.error("Error toggling todo:",e)}}};return{todos:n,loading:i,addTodo:async(r,a,n)=>{if(e||t){if(t)s(e=>({...e,tasks:[...e.tasks||[],{id:"guest-task-".concat(Date.now()),title:r,priority:a,deadline:n,ownerUid:"guest_noca_flow",completed:!1,createdAt:new Date().toISOString()}]}));else try{await (0,h.ET)((0,h.hJ)(u.db,"users",e,"todos"),{title:r,priority:a,deadline:n,ownerUid:e,completed:!1,createdAt:(0,h.Bt)()}),console.log("Added todo to Firebase for user:",e)}catch(e){console.error("Error adding todo:",e)}}},editTodo:async r=>{if(e||t){if(t)s(e=>({...e,tasks:(e.tasks||[]).map(e=>e.id===r.id?r:e)}));else try{let t=(0,h.JU)(u.db,"users",e,"todos",r.id);await (0,h.r7)(t,{title:r.title,priority:r.priority,deadline:r.deadline}),console.log("Edited todo in Firebase for user:",e,r.id)}catch(e){console.error("Error editing todo:",e)}}},deleteTodo:async r=>{if(e||t){if(t)s(e=>({...e,tasks:(e.tasks||[]).filter(e=>e.id!==r)}));else try{await (0,h.oe)((0,h.JU)(u.db,"users",e,"todos",r)),console.log("Deleted todo from Firebase for user:",e,r)}catch(e){console.error("Error deleting todo:",e)}}},toggleTodo:c}},x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=new Date;return s.setDate(s.getDate()+e),s.setHours(s.getHours()+t),s.setMinutes(5*Math.floor(s.getMinutes()/5)),s.setSeconds(0),s.setMilliseconds(0),s.toISOString()},p={user:{uid:"guest_noca_flow",displayName:"Visiteur Curieux",photoURL:"/images/avatars/yves.jpg"},tasks:[{id:"1",title:"Pr\xe9parer la d\xe9mo NocaFLOW pour le client Alpha",completed:!1,priority:"urgent",deadline:x(2,10),assignedTo:"Alice Dubois",ownerUid:"guest_noca_flow"},{id:"2",title:"Finaliser le rapport de performance Q2",completed:!1,priority:"normal",deadline:x(5,14),assignedTo:"Bob Martin",ownerUid:"guest_noca_flow"},{id:"3",title:"Envoyer les relances factures impay\xe9es (Projet Z)",completed:!0,priority:"urgent",deadline:x(-10,9),assignedTo:"Diana Prince",ownerUid:"guest_noca_flow"},{id:"4",title:"Organiser l'atelier de brainstorming",completed:!1,priority:"cold",deadline:x(7,11),assignedTo:"Charlie Dupont",ownerUid:"guest_noca_flow"},{id:"5",title:"Mettre \xe0 jour la documentation API V2",completed:!1,priority:"urgent",deadline:x(3,16),assignedTo:"Ethan Hunt",ownerUid:"guest_noca_flow"},{id:"6",title:"Rechercher de nouvelles tendances UX pour 2026",completed:!1,priority:"normal",deadline:x(15,10),assignedTo:"Carla Lopez",ownerUid:"guest_noca_flow"},{id:"7",title:"Acheter du caf\xe9 et des snacks pour le bureau",completed:!1,priority:"cold",deadline:x(1,12),assignedTo:"Visiteur Curieux",ownerUid:"guest_noca_flow"},{id:"8",title:"R\xe9pondre aux 15 emails non lus de la veille",completed:!1,priority:"urgent",deadline:x(0,3),assignedTo:"Alice Dubois",ownerUid:"guest_noca_flow"},{id:"9",title:"Cr\xe9er un GIF rigolo pour l'annonce interne",completed:!1,priority:"normal",deadline:x(8,15),assignedTo:"David Chen",ownerUid:"guest_noca_flow"}],notes:"## Bienvenue sur votre bloc-notes NocaFLOW ! \uD83D\uDE80\n\nIci, vous pouvez noter toutes vos id\xe9es, vos rappels rapides, ou m\xeame un journal de bord. C'est votre espace personnel pour ne rien oublier.\n\n**Quelques id\xe9es de choses \xe0 noter :**\n* Id\xe9es pour le prochain brainstorm client.\n* Codes d'acc\xe8s temporaires (\xe0 supprimer apr\xe8s usage !)\n* Liste de courses pour la pause d\xe9jeuner.\n* Le nom de ce coll\xe8gue qui raconte de super blagues.\n\nCommencez \xe0 taper pour sauvegarder automatiquement vos pens\xe9es.\n\nBonne productivit\xe9 et amusez-vous bien ! ✨",meetings:[{id:"m1",title:"R\xe9union de Sprint - Projet Alpha",dateTime:x(0,2),attendees:["Alice Dubois","Bob Martin","Visiteur Curieux"],type:"staff",createdAt:x(-1)},{id:"m2",title:"Point quotidien Design UX/UI",dateTime:x(0,-1),attendees:["Carla Lopez","Visiteur Curieux"],type:"staff",createdAt:x(-2)},{id:"m3",title:"Appel client - N\xe9gociation Contrat Beta",dateTime:x(1,10),attendees:["Diana Prince","Visiteur Curieux","Client B"],type:"client",createdAt:x(-1)},{id:"m4",title:"Brainstorming - Campagne Marketing Hiver",dateTime:x(3,14),attendees:["David Chen","Ethan Hunt","Alice Dubois","Visiteur Curieux"],type:"staff",createdAt:x(-2)},{id:"m5",title:"D\xe9jeuner d'\xe9quipe virtuel",dateTime:x(5,12),attendees:["Alice Dubois","Bob Martin","Carla Lopez","David Chen","Ethan Hunt","Visiteur Curieux"],type:"staff",createdAt:x(-3)},{id:"m6",title:"Pr\xe9sentation des r\xe9sultats Q1 - Interne",dateTime:x(-7,10),attendees:["Alice Dubois","Bob Martin","Visiteur Curieux"],type:"staff",createdAt:x(-8)},{id:"m7",title:"Mini-brief rapide NocaFLOW",dateTime:x(0,.1),attendees:["Visiteur Curieux"],type:"staff",createdAt:x(-.5)}],projects:[{id:"p1",name:"Refonte Site NocaFLOW V3",client:"Interne",progress:85,deadline:x(3,17),staff:["/images/avatars/avatar-1.jpg","/images/avatars/avatar-2.jpg","/images/avatars/yves.jpg","/images/avatars/avatar-5.jpg"],paidAmount:"25 000 €",nextPayment:"5 000 € (01/07)",totalAmount:"30 000 €",createdAt:x(-30),googleDriveLink:"https://drive.google.com/drive/folders/1aBcDeFgHiJkLmNoPqrStUvWxyz012345",description:"Refonte compl\xe8te du site marketing pour am\xe9liorer le taux de conversion et l'exp\xe9rience utilisateur. Inclut une nouvelle charte graphique et une optimisation SEO avanc\xe9e."},{id:"p_alert",name:"Audit S\xe9curit\xe9 Priorit\xe9",client:"CyberGuard Inc.",progress:20,deadline:x(1,4),staff:["/images/avatars/avatar-8.jpg"],paidAmount:"0 €",nextPayment:"N/A",totalAmount:"10 000 €",createdAt:x(-7),googleDriveLink:null,description:"Audit de s\xe9curit\xe9 urgent pour le syst\xe8me critique."},{id:"p2",name:"Application Mobile X - MVP",client:"Tech Solutions Inc.",progress:40,deadline:x(25,18),staff:["/images/avatars/avatar-3.jpg","/images/avatars/avatar-4.jpg","/images/avatars/avatar-6.jpg"],paidAmount:"15 000 €",nextPayment:"10 000 € (15/07)",totalAmount:"40 000 €",createdAt:x(-60),googleDriveLink:null,description:"D\xe9veloppement du produit minimum viable (MVP) d'une application mobile innovante pour la gestion des stocks de produits technologiques."},{id:"p3",name:'Campagne Marketing "\xc9t\xe9 \xc9clatant"',client:"Summer Wear Co.",progress:98,deadline:x(-2,17),staff:["/images/avatars/avatar-5.jpg","/images/avatars/avatar-7.jpg","/images/avatars/avatar-9.jpg"],paidAmount:"12 000 €",nextPayment:"0 € (Termin\xe9)",totalAmount:"12 000 €",createdAt:x(-45),googleDriveLink:"https://drive.google.com/drive/folders/987654321zyxwvuTsrQponMLKjIhGfedcba",description:"Conception et d\xe9ploiement d'une campagne marketing estivale multi-canal (r\xe9seaux sociaux, email, display) pour augmenter les ventes de v\xeatements d'\xe9t\xe9."},{id:"p4",name:"Audit S\xe9curit\xe9 Syst\xe8mes",client:"Global CyberSafe",progress:10,deadline:x(40,10),staff:["/images/avatars/avatar-8.jpg","/images/avatars/avatar-10.jpg"],paidAmount:"0 €",nextPayment:"7 500 € (\xc0 l'acceptation)",totalAmount:"15 000 €",createdAt:x(-5),googleDriveLink:null,description:"Audit complet de la s\xe9curit\xe9 des infrastructures syst\xe8mes et recommandations pour renforcer la protection contre les cybermenaces."},{id:"p5",name:"Optimisation SEO Blog Cuisine",client:"Gourmet Guides",progress:60,deadline:x(15,12),staff:["/images/avatars/avatar-11.jpg","/images/avatars/avatar-12.jpg"],paidAmount:"2 000 €",nextPayment:"2 000 € (Fin de mois)",totalAmount:"5 000 €",createdAt:x(-20),googleDriveLink:"https://drive.google.com/drive/folders/abcdefg123456789",description:"Am\xe9lioration du r\xe9f\xe9rencement naturel pour le blog de recettes. Analyse de mots-cl\xe9s, optimisation du contenu et link-building."}],invoices:[{id:"inv1",title:"Facture Projet Alpha - Phase 1",client:"Tech Solutions Inc.",amount:"5 000.00 €",date:"15/05/2025",status:"Paid"},{id:"inv2",title:"Facture Site NocaFLOW - Acompte",client:"Interne",amount:"10 000.00 €",date:"01/06/2025",status:"Paid"},{id:"inv3",title:"Facture Campagne Hiver - Cr\xe9ation",client:"Winter Gear Co.",amount:"7 000.00 €",date:"05/06/2025",status:"Paid"},{id:"inv4",title:"Facture Projet Alpha - Phase 2",client:"Tech Solutions Inc.",amount:"5 000.00 €",date:"20/06/2025",status:"Pending"},{id:"inv5",title:"Facture Audit S\xe9curit\xe9 - Acompte",client:"Global CyberSafe",amount:"7 500.00 €",date:"01/07/2025",status:"Pending"},{id:"inv6",title:"Facture Optimisation SEO - Phase Initiale",client:"Gourmet Guides",amount:"2 000.00 €",date:"25/06/2025",status:"Paid"},{id:"inv7",title:"Facture Maintenance Annuelle",client:"Old Client Corp.",amount:"1 200.00 €",date:"10/07/2025",status:"Pending"}],messages:[{id:"msg1",sender:"Alice Dubois",avatar:"/images/avatars/avatar-1.jpg",text:"Salut l'\xe9quipe ! Des nouvelles sur la refonte du site NocaFLOW ?",timestamp:"10:00",unread:!1},{id:"msg2",sender:"Visiteur Curieux",avatar:"/images/avatars/yves.jpg",text:"Oui, on a termin\xe9 la phase de conception UX hier soir. Pr\xeat pour la revue !",timestamp:"10:05",unread:!1,recipient:"Alice Dubois"},{id:"msg3",sender:"Alice Dubois",avatar:"/images/avatars/avatar-1.jpg",text:"Super nouvelle ! On se voit \xe0 11h pour discuter des prochaines \xe9tapes. N'oublie pas les maquettes \uD83D\uDE09",timestamp:"10:15",unread:!0},{id:"msg4",sender:"Bob Martin",avatar:"/images/avatars/avatar-3.jpg",text:"Besoin d’aide sur le rapport de performance. Tu es dispo ?",timestamp:"Hier 14:30",unread:!1},{id:"msg5",sender:"Visiteur Curieux",avatar:"/images/avatars/yves.jpg",text:"Je suis un peu pris, mais je peux regarder \xe7a en fin de journ\xe9e.",timestamp:"Hier 14:45",unread:!1,recipient:"Bob Martin"},{id:"msg6",sender:"Bob Martin",avatar:"/images/avatars/avatar-3.jpg",text:"Pas de probl\xe8me, merci !",timestamp:"Hier 14:50",unread:!1},{id:"msg7",sender:"Charlie Dupont",avatar:"/images/avatars/avatar-2.jpg",text:"Le rapport annuel est pr\xeat pour relecture.",timestamp:"Lun. 09:00",unread:!1},{id:"msg8",sender:"Visiteur Curieux",avatar:"/images/avatars/yves.jpg",text:"Parfait, je vais le relire dans la matin\xe9e.",timestamp:"Lun. 09:10",unread:!1,recipient:"Charlie Dupont"},{id:"msg9",sender:"Diana Prince",avatar:"/images/avatars/avatar-4.jpg",text:"Peux-tu m’envoyer les derni\xe8res versions des maquettes finales s’il te pla\xeet ?",timestamp:"Aujourd’hui 09:30",unread:!0},{id:"msg10",sender:"Ethan Hunt",avatar:"/images/avatars/avatar-5.jpg",text:"N’oublie pas les statistiques de la semaine derni\xe8re pour le meeting de 15h ! \uD83D\uDCC8",timestamp:"Aujourd’hui 10:01",unread:!0},{id:"msg11",sender:"Carla Lopez",avatar:"/images/avatars/avatar-6.jpg",text:"J'ai quelques id\xe9es g\xe9niales pour l'UI de la nouvelle app, h\xe2te de vous montrer !",timestamp:"Aujourd’hui 11:00",unread:!1},{id:"msg12",sender:"Visiteur Curieux",avatar:"/images/avatars/yves.jpg",text:"Super ! Envoie \xe7a quand tu peux. \uD83D\uDC4D",timestamp:"Aujourd’hui 11:05",unread:!1,recipient:"Carla Lopez"},{id:"msg13",sender:"David Chen",avatar:"/images/avatars/avatar-7.jpg",text:'Voici les premi\xe8res \xe9bauches de la campagne "\xc9t\xe9 \xc9clatant". Qu\'en penses-tu ?',timestamp:"Aujourd’hui 12:00",unread:!0,type:"image",fileURL:"https://picsum.photos/id/237/200/300"},{id:"msg14",sender:"Visiteur Curieux",avatar:"/images/avatars/yves.jpg",text:"Wow, \xe7a a l'air g\xe9nial ! J'adore le concept. \uD83C\uDF89",timestamp:"Aujourd’hui 12:05",unread:!1,recipient:"David Chen"}],planningTasks:[{id:"pt1",person:"Alice Dubois",title:"Pr\xe9parer la d\xe9mo UX",startDate:x(0).split("T")[0],endDate:x(5).split("T")[0],completed:!1,priority:"normal",color:"pink"},{id:"pt2",person:"Bob Martin",title:"D\xe9veloppement Backend V1",startDate:x(3).split("T")[0],endDate:x(10).split("T")[0],completed:!1,priority:"urgent",color:"red"},{id:"pt3",person:"Carla Lopez",title:"Wireframes Mobiles",startDate:x(-2).split("T")[0],endDate:x(2).split("T")[0],completed:!0,priority:"normal",color:"green"},{id:"pt4",person:"David Chen",title:"Planification Campagne A",startDate:x(1).split("T")[0],endDate:x(7).split("T")[0],completed:!1,priority:"cold",color:"blue"},{id:"pt5",person:"Alice Dubois",title:"Tests Qualit\xe9 Alpha",startDate:x(6).split("T")[0],endDate:x(12).split("T")[0],completed:!1,priority:"normal",color:"pink"},{id:"pt6",person:"Bob Martin",title:"Int\xe9gration API Tiers",startDate:x(11).split("T")[0],endDate:x(18).split("T")[0],completed:!1,priority:"urgent",color:"red"},{id:"pt7",person:"Sophie Laurent",title:"Impl\xe9mentation UI/UX",startDate:x(-1).split("T")[0],endDate:x(4).split("T")[0],completed:!1,priority:"normal",color:"violet"},{id:"pt8",person:"Marc Tremblay",title:"Migration Serveur Cloud",startDate:x(8).split("T")[0],endDate:x(14).split("T")[0],completed:!1,priority:"urgent",color:"cyan"},{id:"pt9",person:"Ethan Hunt",title:"Analyse des donn\xe9es client",startDate:x(0).split("T")[0],endDate:x(3).split("T")[0],completed:!1,priority:"normal",color:"orange"},{id:"pt10",person:"Diana Prince",title:"Strat\xe9gie de Contenu Q3",startDate:x(5).split("T")[0],endDate:x(9).split("T")[0],completed:!1,priority:"cold",color:"teal"}],staffMembers:[{id:"s1",name:"Alice Dubois",role:"Chef de Projet Senior",email:"alice.d@example.com",avatar:"/images/avatars/avatar-1.jpg"},{id:"s2",name:"Bob Martin",role:"D\xe9veloppeur Fullstack",email:"bob.m@example.com",avatar:"/images/avatars/avatar-3.jpg"},{id:"s3",name:"Carla Lopez",role:"Designer UX/UI",email:"carla.l@example.com",avatar:"/images/avatars/avatar-5.jpg"},{id:"s4",name:"David Chen",role:"Sp\xe9cialiste Marketing Digital",email:"david.c@example.com",avatar:"/images/avatars/avatar-7.jpg"},{id:"s5",name:"Ethan Hunt",role:"Analyste Donn\xe9es",email:"ethan.h@example.com",avatar:"/images/avatars/avatar-9.jpg"},{id:"s6",name:"Diana Prince",role:"Consultante Strat\xe9gie",email:"diana.p@example.com",avatar:"/images/avatars/avatar-4.jpg"},{id:"s7",name:"Charlie Dupont",role:"Responsable Qualit\xe9",email:"charlie.d@example.com",avatar:"/images/avatars/avatar-2.jpg"},{id:"s8",name:"Sophie Laurent",role:"D\xe9veloppeur Frontend",email:"sophie.l@example.com",avatar:"/images/avatars/avatar-11.jpg"},{id:"s9",name:"Marc Tremblay",role:"Architecte Cloud",email:"marc.t@example.com",avatar:"/images/avatars/avatar-10.jpg"}],clients:[{id:"cl1",name:"Tech Solutions Inc.",contactEmail:"contact@techsol.com",phone:"0123456789",lastContact:x(-5),projects:["p2"]},{id:"cl2",name:"Summer Wear Co.",contactEmail:"info@summerwear.com",phone:"0987654321",lastContact:x(-2),projects:["p3"]},{id:"cl3",name:"Global CyberSafe",contactEmail:"support@cybersafe.com",phone:"0654321098",lastContact:x(-1),projects:["p4"]},{id:"cl4",name:"Gourmet Guides",contactEmail:"hello@gourmetguides.net",phone:"0711223344",lastContact:x(-10),projects:["p5"]},{id:"cl5",name:"EcoBuild Innovations",contactEmail:"info@ecobuild.com",phone:"0566778899",lastContact:x(-15),projects:[]}]};var g=s(7421),v=s(5675),j=s.n(v),w=e=>{let t,{t:s}=e,{user:a}=(0,c.aC)(),{isDarkMode:n}=(0,d.Fg)(),o=!a||"guest"===a.uid,i=null==a?void 0:a.displayName;return t=o?s("guest_you","TOI"):i||s("unknown_user","Utilisateur"),(0,r.jsxs)("div",{className:"text-color-text-primary text-3xl font-light inline-flex items-center",children:[s("greeting_ave","Ave,")," ",(0,r.jsx)("span",{className:"font-bold animated-gradient-text pink-violet-gradient-text ml-2",children:t})]})};let f=e=>{let{children:t,isPulsing:s,pulseColorClass:a="bg-pink-500"}=e;return(0,r.jsx)(i.E.div,{animate:s?{scale:[1,1.15,1],opacity:[1,.7,1]}:{},transition:s?{duration:1,repeat:1/0,ease:"easeInOut"}:{},className:"flex items-center justify-center p-2 rounded-full ".concat(a," bg-opacity-30"),children:t})},b=e=>{let{icon:t,count:s,isPulsing:a=!1,pulseColorClass:n}=e;return(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm bg-color-bg-secondary px-3 py-1.5 rounded-full border border-color-border-primary",children:[(0,r.jsx)(f,{isPulsing:a,pulseColorClass:n,children:t}),(0,r.jsx)("span",{className:"font-bold text-color-text-primary",children:s})]})};var y=e=>{let{user:t,isGuestMode:s,openModal:n,handleLogout:o,stats:c,t:u,onOpenCalculator:h}=e,{isDarkMode:m,toggleTheme:x}=(0,d.Fg)(),p=(null==t?void 0:t.displayName)||u("guest_user_default","Cher Invit\xe9"),g=s?"/images/avatarguest.jpg":(null==t?void 0:t.photoURL)||"/images/avatars/yves.jpg",v=["NocaFLOW trie m\xeame les chaussettes sales ?","Un seul outil. Z\xe9ro chaos. Juste du FLOW.","Multit\xe2che ? Non. NocaFLOW fait tout, vraiment.","Productif sans effort. Merci NocaFLOW, dopage l\xe9gal.","NocaFLOW g\xe8re tout, sauf les ronrons. \uD83D\uDC3E","Adieu stress. Bonjour FLOW (et siestes f\xe9lines).","M\xeame mamie l’utilise. Et elle kiffe grave.","Plus fort que le caf\xe9 : NocaFLOW.","NocaFLOW rend accros… \xe0 l’efficacit\xe9 !","Projets qui volent. Tracas au tapis."],[f,y]=(0,a.useState)(0);return(0,a.useEffect)(()=>{let e=setInterval(()=>{y(e=>(e+1)%v.length)},1e4);return()=>clearInterval(e)},[v.length]),(0,r.jsxs)(i.E.header,{variants:{hidden:{opacity:0,y:-20},visible:{opacity:1,y:0}},className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"relative group cursor-pointer",onClick:()=>n("avatar"),children:[(0,r.jsx)(j(),{src:g,alt:p,width:60,height:60,className:"rounded-full border-2 ".concat(m?"border-slate-700":"border-color-border-primary"," group-hover:border-pink-500 transition-colors object-cover")}),(0,r.jsx)("div",{className:"absolute -bottom-1 -right-1 bg-color-bg-tertiary rounded-full p-1 border-2 border-color-border-primary group-hover:bg-pink-500 transition-all",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-color-text-primary",children:[(0,r.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,r.jsx)("path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1.5 1.5-4L18.5 2.5Z"})]})})]}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(w,{t:u}),!s&&(0,r.jsx)("button",{onClick:()=>n("userNameEdit"),className:"text-color-text-secondary text-sm ml-2 p-1 rounded-md hover:bg-color-bg-hover transition-colors",title:u("edit","Modifier le nom"),children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-color-text-secondary",children:[(0,r.jsx)("path",{d:"M17 3a2.85 2.85 0 0 1 2.92 2.92L10 16.5l-4 1.5 1.5-4L17 3Z"}),(0,r.jsx)("path",{d:"M7.5 7.5 10 10"})]})})]}),(0,r.jsx)("div",{className:"h-10 overflow-hidden mt-1",children:(0,r.jsx)(l.M,{mode:"wait",children:(0,r.jsx)(i.E.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.5},className:"text-color-text-secondary text-xs leading-tight typewriter-text",children:v[f]},f)})})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 self-start md:self-center",children:[(0,r.jsx)(b,{icon:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-pink-400",children:(0,r.jsx)("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-1.9A8.5 8.5 0 0 1 12 3a8.5 8.5 0 0 1 9 8.5Z"})}),count:c.messages,isPulsing:c.messages>0,pulseColorClass:"bg-pink-500"}),(0,r.jsx)(b,{icon:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-sky-400",children:[(0,r.jsx)("path",{d:"M9 11L12 14L22 4"}),(0,r.jsx)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),count:c.tasks,isPulsing:c.tasks>0,pulseColorClass:"bg-sky-500"}),(0,r.jsx)(b,{icon:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-amber-400",children:[(0,r.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),(0,r.jsx)("line",{x1:"16",x2:"16",y1:"2",y2:"6"}),(0,r.jsx)("line",{x1:"8",x2:"8",y1:"2",y2:"6"}),(0,r.jsx)("line",{x1:"3",x2:"21",y1:"10",y2:"10"})]}),count:c.meetings,isPulsing:c.meetings>0,pulseColorClass:"bg-amber-500"}),(0,r.jsx)("button",{onClick:h,className:"p-2 rounded-full text-color-text-secondary hover:bg-color-bg-hover hover:text-color-text-primary transition-colors","aria-label":u("calculator","Calculatrice"),title:u("calculator","Calculatrice"),children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",ry:"2"}),(0,r.jsx)("line",{x1:"8",y1:"6",x2:"8.01",y2:"6"}),(0,r.jsx)("line",{x1:"16",y1:"6",x2:"16.01",y2:"6"}),(0,r.jsx)("line",{x1:"8",y1:"10",x2:"8.01",y2:"10"}),(0,r.jsx)("line",{x1:"16",y1:"10",x2:"16.01",y2:"10"}),(0,r.jsx)("line",{x1:"8",y1:"14",x2:"8.01",y2:"14"}),(0,r.jsx)("line",{x1:"16",y1:"14",x2:"16.01",y2:"14"}),(0,r.jsx)("line",{x1:"8",y1:"18",x2:"8.01",y2:"18"}),(0,r.jsx)("line",{x1:"12",y1:"18",x2:"12.01",y2:"18"}),(0,r.jsx)("line",{x1:"16",y1:"18",x2:"16.01",y2:"18"}),(0,r.jsx)("line",{x1:"12",y1:"2",x2:"12",y2:"22"}),(0,r.jsx)("line",{x1:"4",y1:"10",x2:"20",y2:"10"})]})})]})]})},k=s(7922),C=s(5027);let N=e=>{let{children:t,className:s="",icon:n,title:o,onFullscreenClick:c,initialMinimized:u=!1,t:h,noContentPadding:m=!1}=e,[x,p]=(0,a.useState)(u),{isDarkMode:g}=(0,d.Fg)();return(0,r.jsxs)(i.E.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},className:"relative overflow-hidden border border-color-border-primary rounded-2xl flex flex-col ".concat(s," ").concat(x?"minimized-card":""),style:{backgroundColor:"var(--color-bg-secondary)"},children:[(0,r.jsxs)("div",{className:"flex justify-between items-center px-4 py-3 border-b border-color-border-primary shadow-sm flex-shrink-0 bg-color-bg-tertiary",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[n&&(0,r.jsx)("span",{className:"text-purple-400",children:n}),o&&(0,r.jsx)("h3",{className:"text-lg font-semibold text-color-text-primary",children:o})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[(0,r.jsx)("button",{onClick:()=>{p(!x)},className:"p-1 rounded-full transition-colors text-color-text-secondary hover:bg-color-bg-hover hover:text-color-text-primary",title:x?h?h("maximize_block","Agrandir le bloc"):"Maximize block":h?h("minimize_block","R\xe9duire le bloc"):"Minimize block",children:x?(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3m-18 0v3a2 2 0 0 0 2 2h3"})}):(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"M5 12h14"})})}),c&&(0,r.jsx)("button",{onClick:c,className:"p-1 rounded-full transition-colors text-color-text-secondary hover:bg-color-bg-hover hover:text-color-text-primary",title:h?h("fullscreen","Agrandir (Plein \xe9cran)"):"Fullscreen",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3m-18 0v3a2 2 0 0 0 2 2h3"})})})]})]}),(0,r.jsx)(l.M,{children:!x&&(0,r.jsx)(i.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3,ease:"easeInOut"},className:"flex-grow text-color-text-secondary overflow-hidden ".concat(m?"":"p-4"),style:{overflowY:"auto"},children:t})})]})},D=e=>{let{type:t,title:s,dateTime:n,icon:o,pulseColorClass:l,openModal:c,t:u}=e,{isDarkMode:h}=(0,d.Fg)(),m=(0,k.Z)(n),[x,p]=(0,a.useState)({days:0,hours:0,minutes:0});(0,a.useEffect)(()=>{if(!(0,C.Z)(m)){console.warn("Invalid date provided for ".concat(t," alert: ").concat(n));return}let e=()=>{let e=new Date,t=m.getTime()-e.getTime();return t<=0?{days:0,hours:0,minutes:0,overdue:!0}:{days:Math.floor(t/864e5),hours:Math.floor(t%864e5/36e5),minutes:Math.floor(t%36e5/6e4),overdue:!1}},s=()=>{p(e())};s();let r=setInterval(s,6e4);return()=>clearInterval(r)},[n,m,t]);let g=u("time_left_format","{{days}} jour(s) {{hours}} h {{minutes}} min").replace("{{days}}",x.days).replace("{{hours}}",x.hours).replace("{{minutes}}",x.minutes);return x.days<1&&!x.overdue||x.overdue,(0,r.jsxs)("div",{className:"flex-1 flex flex-col items-center p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center mb-3",children:[(0,r.jsx)("div",{className:"flex items-center justify-center p-3 rounded-full ".concat(l," bg-opacity-30"),children:o}),(0,r.jsx)(i.E.button,{onClick:()=>c("deadline"===t?"addDeadline":"addMeeting"),className:"p-2 rounded-full ml-3 transition-colors ".concat(h?"text-slate-300 hover:bg-slate-700/50 hover:text-white":"text-color-text-secondary hover:bg-color-bg-hover hover:text-color-text-primary"),whileHover:{scale:1.1},whileTap:{scale:.9},title:"deadline"===t?u("add_deadline","Ajouter une \xe9ch\xe9ance"):u("schedule_meeting","Planifier une r\xe9union"),children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.jsx)("path",{d:"M12 8v8"}),(0,r.jsx)("path",{d:"M8 12h8"})]})})]}),(0,r.jsx)("h4",{className:"text-center text-lg font-semibold ".concat(h?"text-pink-400":"text-purple-700"),children:s}),(0,r.jsx)("p",{className:"text-center text-sm font-medium ".concat(h?"text-pink-300":"text-purple-600"," mt-1"),children:g})]})};var _=e=>{let{projects:t,meetings:s,t:a,lang:n,openModal:o}=e,{isDarkMode:l}=(0,d.Fg)(),c=t.filter(e=>e.deadline&&(0,C.Z)((0,k.Z)(e.deadline))&&new Date(e.deadline)>new Date).sort((e,t)=>new Date(e.deadline)-new Date(t.deadline))[0],u=s.filter(e=>e.dateTime&&(0,C.Z)((0,k.Z)(e.dateTime))&&new Date(e.dateTime)>new Date).sort((e,t)=>new Date(e.dateTime)-new Date(t.dateTime))[0];return(0,r.jsx)(N,{icon:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.jsx)("polyline",{points:"12 6 12 12 16 14"})]}),title:a("time_alerts_title","Alertes Temps"),className:"col-span-12",noContentPadding:!0,children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 flex-grow p-4 gap-4 ".concat(l?"bg-color-bg-secondary":"bg-white"),children:[(0,r.jsx)("div",{className:"rounded-xl p-6 flex flex-col items-center border ".concat(l?"border-color-border-primary":"border-gray-200"," ").concat(l?"bg-color-bg-tertiary":"bg-gray-50"),children:c?(0,r.jsx)(D,{type:"deadline",title:a("next_deadline","Prochaine Deadline"),dateTime:c.deadline,icon:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-pink-400",children:[(0,r.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),(0,r.jsx)("line",{x1:"16",x2:"16",y1:"2",y2:"6"}),(0,r.jsx)("line",{x1:"8",x2:"8",y1:"2",y2:"6"}),(0,r.jsx)("line",{x1:"3",x2:"21",y1:"10",y2:"10"})]}),pulseColorClass:"bg-pink-500",openModal:o,t:a}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center p-4 text-color-text-secondary",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-pink-400 mb-2",children:[(0,r.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),(0,r.jsx)("line",{x1:"16",x2:"16",y1:"2",y2:"6"}),(0,r.jsx)("line",{x1:"8",x2:"8",y1:"2",y2:"6"}),(0,r.jsx)("line",{x1:"3",x2:"21",y1:"10",y2:"10"})]}),(0,r.jsx)("p",{className:"text-lg font-semibold text-color-text-primary",children:a("no_upcoming_deadlines","Aucune \xe9ch\xe9ance \xe0 venir")}),(0,r.jsx)("p",{className:"text-sm mt-1",children:a("add_new_deadline_hint","Ajoutez de nouvelles \xe9ch\xe9ances pour rester organis\xe9.")}),(0,r.jsx)(i.E.button,{onClick:()=>o("addDeadline"),className:"p-2 rounded-full mt-3 transition-colors ".concat(l?"text-slate-300 hover:bg-slate-700/50 hover:text-white":"text-color-text-secondary hover:bg-color-bg-hover hover:text-color-text-primary"),whileHover:{scale:1.1},whileTap:{scale:.9},title:a("add_deadline","Ajouter une \xe9ch\xe9ance"),children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.jsx)("path",{d:"M12 8v8"}),(0,r.jsx)("path",{d:"M8 12h8"})]})})]})}),(0,r.jsx)("div",{className:"rounded-xl p-6 flex flex-col items-center border ".concat(l?"border-color-border-primary":"border-gray-200"," ").concat(l?"bg-color-bg-tertiary":"bg-gray-50"),children:u?(0,r.jsx)(D,{type:"meeting",title:a("next_meeting","Prochaine R\xe9union"),dateTime:u.dateTime,icon:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-violet-400",children:[(0,r.jsx)("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),(0,r.jsx)("path",{d:"M16 2v4a2 2 0 0 0 2 2h4"}),(0,r.jsx)("path",{d:"M8 2v4a2 2 0 0 1-2 2H2"}),(0,r.jsx)("path",{d:"M12 11h.01"}),(0,r.jsx)("path",{d:"M12 15h.01"})]}),pulseColorClass:"bg-violet-500",openModal:o,t:a}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center p-4 text-color-text-secondary",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-violet-400 mb-2",children:[(0,r.jsx)("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),(0,r.jsx)("path",{d:"M16 2v4a2 2 0 0 0 2 2h4"}),(0,r.jsx)("path",{d:"M8 2v4a2 2 0 0 1-2 2H2"}),(0,r.jsx)("path",{d:"M12 11h.01"}),(0,r.jsx)("path",{d:"M12 15h.01"})]}),(0,r.jsx)("p",{className:"text-lg font-semibold text-color-text-primary",children:a("no_upcoming_meetings","Aucune r\xe9union \xe0 venir")}),(0,r.jsx)("p",{className:"text-sm mt-1",children:a("add_new_meeting_hint","Planifiez de nouvelles r\xe9unions pour rester connect\xe9.")}),(0,r.jsx)(i.E.button,{onClick:()=>o("addMeeting"),className:"p-2 rounded-full mt-3 transition-colors ".concat(l?"text-slate-300 hover:bg-slate-700/50 hover:text-white":"text-color-text-secondary hover:bg-color-bg-hover hover:text-color-text-primary"),whileHover:{scale:1.1},whileTap:{scale:.9},title:a("schedule_meeting","Planifier une r\xe9union"),children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.jsx)("path",{d:"M12 8v8"}),(0,r.jsx)("path",{d:"M8 12h8"})]})})]})})]})})},L=s(8024),M=s(2044),S=s(3143),T=s(1266);let A=e=>{var t;let{task:s,onToggle:a,onDelete:n,onEdit:o,t:i}=e,{isDarkMode:l}=(0,d.Fg)(),c={urgent:{icon:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-red-400",children:[(0,r.jsx)("path",{d:"M12 11.5a3 3 0 1 0 0 7 3 3 0 0 0 0-7Z"}),(0,r.jsx)("path",{d:"M12 2C8.68 2 6 4.68 6 8a6 6 0 0 0 5.09 5.92c.32.32.69.64 1.11.9L22 22 20 20l-3.51-3.51A6 6 0 0 0 12 2Z"})]})},normal:{icon:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-sky-400",children:[(0,r.jsx)("path",{d:"M8 6h12"}),(0,r.jsx)("path",{d:"M8 12h12"}),(0,r.jsx)("path",{d:"M8 18h12"}),(0,r.jsx)("path",{d:"M3 6h.01"}),(0,r.jsx)("path",{d:"M3 12h.01"}),(0,r.jsx)("path",{d:"M3 18h.01"})]})},cold:{icon:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-slate-400",children:[(0,r.jsx)("path",{d:"M2 12h20"}),(0,r.jsx)("path",{d:"M12 2V22"}),(0,r.jsx)("path",{d:"m4 16 1.4-1.4A4.5 4.5 0 0 1 8.8 12c.7-.7 1.5-1 2.3-1.2l.9-.1C13 10.5 14 10 14 9a2 2 0 0 0-2-2c-.7 0-1.4.2-2 .5L8 6"}),(0,r.jsx)("path",{d:"m20 8-1.4 1.4A4.5 4.5 0 0 1 15.2 12c-.7.7-1.5 1-2.3 1.2l-.9.1C11 13.5 10 14 10 15a2 2 0 0 0 2 2c.7 0-1.4-.2-2-.5L16 18"})]})}},u=s.deadline?(0,k.Z)(s.deadline):null,h=u&&(0,C.Z)(u),m=h&&(0,L.Z)(u)&&!(0,M.Z)(u)&&!s.completed?"text-red-400":h&&(0,M.Z)(u)&&!s.completed?"text-amber-400":"text-color-text-secondary";return(0,r.jsxs)("div",{className:"futuristic-card flex items-center gap-3 p-2 rounded-lg transition-colors duration-200 hover:bg-color-bg-hover group",children:[(0,r.jsx)("input",{type:"checkbox",checked:s.completed,onChange:()=>a(s.id),className:"form-checkbox h-5 w-5 text-pink-500 rounded focus:ring-pink-500 cursor-pointer flex-shrink-0\n                             ".concat(l?"border-slate-600 bg-slate-700":"border-color-border-input bg-color-bg-input-field")}),(0,r.jsx)("div",{className:"flex-shrink-0",children:(null===(t=c[s.priority])||void 0===t?void 0:t.icon)||c.normal.icon}),(0,r.jsxs)("div",{className:"flex-grow min-w-0",children:[(0,r.jsx)("p",{className:"truncate ".concat(s.completed?"line-through text-color-text-tertiary":"text-color-text-primary"),children:s.title}),h&&(0,r.jsxs)("span",{className:"block text-xs mt-0.5 ".concat(m),children:[i("deadline","\xc9ch\xe9ance"),": ",(0,S.Z)(u,"dd/MM/yy",{locale:T.Z})]})]}),(0,r.jsxs)("div",{className:"flex-shrink-0 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,r.jsx)("button",{onClick:()=>o(s),className:"p-1.5 rounded-md transition-colors ".concat(l?"hover:bg-slate-700":"hover:bg-color-bg-hover"),title:i("edit","Modifier"),children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-color-text-secondary",children:[(0,r.jsx)("path",{d:"M17 3a2.85 2.85 0 0 1 2.92 2.92L10 16.5l-4 1.5 1.5-4L17 3Z"}),(0,r.jsx)("path",{d:"M7.5 7.5 10 10"})]})}),(0,r.jsx)("button",{onClick:()=>n(s.id),className:"p-1.5 rounded-md transition-colors ".concat(l?"hover:bg-slate-700 text-red-500/80 hover:text-red-500":"hover:bg-red-100 text-red-500 hover:text-red-600"),title:i("delete","Supprimer"),children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M3 6h18"}),(0,r.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),(0,r.jsx)("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})]})};var E=e=>{let{todos:t,loading:s,onAdd:n,onToggle:o,onDelete:i,onEdit:l,t:c}=e,[u,h]=(0,a.useState)(""),{isDarkMode:m}=(0,d.Fg)();return(0,r.jsx)(N,{icon:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M8 6h12"}),(0,r.jsx)("path",{d:"M8 12h12"}),(0,r.jsx)("path",{d:"M8 18h12"}),(0,r.jsx)("path",{d:"M3 6h.01"}),(0,r.jsx)("path",{d:"M3 12h.01"}),(0,r.jsx)("path",{d:"M3 18h.01"})]}),title:c("todo_list_title","Liste de T\xe2ches"),className:"bg-blue-900/20 h-full",children:s?(0,r.jsxs)("div",{className:"text-center p-4",children:[(0,r.jsx)("p",{className:"text-white",children:c("loading_tasks","Chargement des t\xe2ches...")}),(0,r.jsx)("div",{className:"w-8 h-8 border-4 border-dashed rounded-full animate-spin border-pink-500 mx-auto mt-4"})]}):(0,r.jsxs)("div",{className:"h-full flex flex-col",children:[(0,r.jsx)("div",{className:"flex-grow space-y-1 overflow-y-auto max-h-80 custom-scrollbar pr-2",children:Array.isArray(t)&&t.length>0?t.map(e=>(0,r.jsx)(A,{task:e,onToggle:o,onDelete:i,onEdit:l,t:c},e.id)):(0,r.jsx)("p",{className:"text-center p-8 text-sm text-slate-500",children:c("no_tasks_message","Vous \xeates ma\xeetre de votre destin... et de vos t\xe2ches. Ajoutez-en une !")})}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),u.trim()&&(n(u.trim(),"normal",null),h(""))},className:"mt-4 relative flex-shrink-0",children:[(0,r.jsx)("input",{type:"text",value:u,onChange:e=>h(e.target.value),placeholder:c("add_task_placeholder","Ajouter une t\xe2che et appuyer sur Entr\xe9e..."),className:"w-full rounded-lg pl-4 pr-12 py-3 text-sm focus:ring-pink-500 focus:border-pink-500 transition-all\n                               ".concat(m?"bg-slate-800 border border-slate-700 text-white":"bg-white border border-gray-300 text-gray-800")}),(0,r.jsx)("button",{type:"submit",className:"absolute right-1 top-1/2 -translate-y-1/2 p-2 rounded-md shadow-lg flex items-center justify-center w-10 h-10\n                               ".concat(m?"bg-gradient-to-r from-pink-500 to-violet-500 text-white":"bg-blue-500 hover:bg-blue-600 text-white"),"aria-label":c("add_task","Ajouter une t\xe2che"),children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M12 5v14"}),(0,r.jsx)("path",{d:"M5 12h14"})]})})]})]})})},F=e=>{let{uid:t,isGuest:s,onGuestUpdate:n,t:o,className:l=""}=e,c=p.notes,[m,x]=(0,a.useState)(s?c:""),[g,v]=(0,a.useState)(o("ready","Pr\xeat")),j=(0,a.useRef)(null),w=(0,a.useRef)(!1),f=(0,a.useRef)(null),{isDarkMode:b}=(0,d.Fg)();(0,a.useEffect)(()=>{if(s){x(c);return}if(!t)return;let e=(0,h.JU)(u.db,"userNotes",t);(0,h.cf)(e,e=>{e.exists()&&x(e.data().content||""),v(o("saved","Sauvegard\xe9"))})},[t,s,o,c]);let y=e=>{!w.current&&e.length>0&&e!==c?(x(e),w.current=!0):x(e),v(o("editing","\xc9dition...")),j.current&&clearTimeout(j.current),j.current=setTimeout(async()=>{v(o("saving","Sauvegarde...")),s?n(t=>({...t,notes:e})):t&&await (0,h.pl)((0,h.JU)(u.db,"userNotes",t),{content:e},{merge:!0}),setTimeout(()=>v(o("saved","Sauvegard\xe9")),700)},1500)};return(0,r.jsxs)(N,{icon:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("polyline",{points:"4 7 4 4 20 4 20 7"}),(0,r.jsx)("line",{x1:"9",x2:"15",y1:"20",y2:"20"}),(0,r.jsx)("line",{x1:"12",x2:"12",y1:"4",y2:"20"})]}),title:o("bloc_note_title","Bloc-notes"),className:"bg-orange-900/20 ".concat(l),children:[" ",(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsx)("textarea",{ref:f,value:m,onChange:e=>y(e.target.value),onFocus:()=>{s&&!w.current&&m===c&&x("")},placeholder:o("notepad_placeholder_initial","Vos id\xe9es, vos pens\xe9es, votre g\xe9nie..."),className:"w-full flex-grow bg-transparent resize-none p-1 custom-scrollbar border-none focus:ring-0 focus:outline-none focus:border-transparent \n                               ".concat(b?"text-orange-300":"text-violet-700")}),(0,r.jsx)(i.E.div,{className:"text-right text-xs mt-2 transition-opacity flex-shrink-0",initial:{opacity:0},animate:{opacity:g===o("saved","Sauvegard\xe9")?1:.5},style:{color:b?g===o("saved","Sauvegard\xe9")?"#ec4899":"#64748b":g===o("saved","Sauvegard\xe9")?"#A855F7":"#718096"},children:g})]})]})},B=s(1417),Z=s(6617),W=s(3463),P=s(1968),H=s(6626),V=s(3706),U=e=>{let{onDayClick:t,t:s,className:n=""}=e,[o,l]=(0,a.useState)(new Date),[c,u]=(0,a.useState)(null),{isDarkMode:h}=(0,d.Fg)(),m=p.tasks,x=p.meetings,g=p.projects,v=(0,B.Z)(o),j=(0,Z.Z)(o),w=((0,W.Z)(v)+6)%7,f=Array.from({length:j},(e,t)=>t+1),b=e=>{let t=new Date(o.getFullYear(),o.getMonth(),e),s=(m||[]).some(e=>e.deadline&&(0,C.Z)((0,k.Z)(e.deadline))&&(0,P.Z)((0,k.Z)(e.deadline),t)),r=(x||[]).some(e=>e.dateTime&&(0,C.Z)((0,k.Z)(e.dateTime))&&(0,P.Z)((0,k.Z)(e.dateTime),t)),a=(g||[]).some(e=>e.deadline&&(0,C.Z)((0,k.Z)(e.deadline))&&(0,P.Z)((0,k.Z)(e.deadline),t));return s||r||a},y=e=>{let t=new Date(o.getFullYear(),o.getMonth(),e);return[...(m||[]).filter(e=>e.deadline&&(0,C.Z)((0,k.Z)(e.deadline))&&(0,P.Z)((0,k.Z)(e.deadline),t)),...(x||[]).filter(e=>e.dateTime&&(0,C.Z)((0,k.Z)(e.dateTime))&&(0,P.Z)((0,k.Z)(e.dateTime),t)),...(g||[]).filter(e=>e.deadline&&(0,C.Z)((0,k.Z)(e.deadline))&&(0,P.Z)((0,k.Z)(e.deadline),t))]},D=e=>{let s=new Date(o.getFullYear(),o.getMonth(),e);u(s),t(s,y(e))};return(0,r.jsxs)(N,{icon:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),(0,r.jsx)("line",{x1:"16",x2:"16",y1:"2",y2:"6"}),(0,r.jsx)("line",{x1:"8",x2:"8",y1:"2",y2:"6"}),(0,r.jsx)("line",{x1:"3",x2:"21",y1:"10",y2:"10"})]}),title:s("calendar_title","Calendrier"),className:n,children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4 flex-shrink-0",children:[(0,r.jsx)("button",{onClick:()=>{l((0,H.Z)(o,1))},className:"p-2 rounded-full transition-colors text-color-text-secondary hover:bg-color-bg-hover hover:text-color-text-primary",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"m15 18-6-6 6-6"})})}),(0,r.jsxs)("h3",{className:"text-lg font-bold text-color-text-primary text-center flex-grow",children:[(0,S.Z)(o,"MMMM",{locale:T.Z})," ",(0,S.Z)(o,"yyyy")]}),(0,r.jsx)("button",{onClick:()=>{l((0,V.Z)(o,1))},className:"p-2 rounded-full transition-colors text-color-text-secondary hover:bg-color-bg-hover hover:text-color-text-primary",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"m9 18 6-6-6-6"})})})]}),(0,r.jsx)("div",{className:"grid grid-cols-7 gap-1 text-center text-xs text-color-text-secondary font-bold mb-2 flex-shrink-0",children:["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"].map(e=>(0,r.jsx)("div",{children:e},e))}),(0,r.jsxs)("div",{className:"grid grid-cols-7 gap-1 flex-grow overflow-y-auto custom-scrollbar",style:{maxHeight:"calc(100% - 70px - 28px)"},children:[Array(w).fill(null).map((e,t)=>(0,r.jsx)("div",{className:"p-1 aspect-square"},"empty-".concat(t))),f.map(e=>{let t=new Date(o.getFullYear(),o.getMonth(),e),s=(0,M.Z)(t),a=c&&(0,P.Z)(c,t);return(0,r.jsxs)(i.E.div,{whileHover:{scale:1.1,zIndex:10,backgroundColor:h?"rgba(236, 72, 153, 0.2)":"rgba(168, 85, 247, 0.2)"},onClick:()=>D(e),className:"relative flex items-center justify-center p-1 aspect-square rounded-lg cursor-pointer transition-all text-sm\n                                // Current day background and text color\n                                ".concat(s?h?"bg-pink-500/20 text-white font-bold":"bg-violet-200 text-violet-800 font-bold":"text-color-text-primary","\n                                ").concat(a?"border-2 border-pink-400":""),children:[e,b(e)&&(0,r.jsx)("div",{className:"absolute bottom-1.5 right-1.5 w-1.5 h-1.5 bg-pink-400 rounded-full animate-bounce-slow"})]},e)})]})]})};let z=e=>{let{project:t,t:s,onEditProject:a,onDeleteProject:n,onAddGoogleDriveLink:o}=e,{isDarkMode:l}=(0,d.Fg)(),c=t.deadline?(0,k.Z)(t.deadline):null,u=c&&(0,C.Z)(c),h=u&&(0,L.Z)(c)&&t.progress<100,m=t.createdAt?(0,k.Z)(t.createdAt):new Date,x=u?c.getTime()-m.getTime():1;return new Date().getTime(),m.getTime(),(0,r.jsxs)("div",{className:"p-3 flex flex-col gap-3 ".concat(l?"bg-slate-700":"bg-color-bg-tertiary border border-color-border-primary"," rounded-lg shadow-sm"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-end gap-1 flex-shrink-0 mb-2",children:[t.googleDriveLink?(0,r.jsx)(i.E.a,{href:t.googleDriveLink,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-full transition-colors ".concat(l?"hover:bg-green-600 text-white":"hover:bg-green-200 text-green-600"),whileHover:{scale:1.1},whileTap:{scale:.9},title:s("view_drive_folder","Voir le dossier Drive"),children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-green-400",children:[(0,r.jsx)("path",{d:"M12 1L3 6v12l9 5 9-5V6l-9-5z"}),(0,r.jsx)("path",{d:"M3 6l9 5 9-5"}),(0,r.jsx)("path",{d:"M12 1l9 5"}),(0,r.jsx)("path",{d:"M12 1v22"}),(0,r.jsx)("path",{d:"M3 6v12"}),(0,r.jsx)("path",{d:"M21 6v12"})]})}):(0,r.jsx)(i.E.button,{onClick:()=>o(t.id),className:"p-2 rounded-full transition-colors ".concat(l?"hover:bg-amber-600 text-white":"hover:bg-amber-200 text-amber-600"),whileHover:{scale:1.1},whileTap:{scale:.9},title:s("add_drive_link","Ajouter lien Drive"),children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M20 19.5V8.5a2.1 2.05 0 0 0-2.1-2.1H5.1A2.1 2.05 0 0 0 3 8.5v11A2.1 2.05 0 0 0 5.1 21.6H17.9A2.1 2.05 0 0 0 20 19.5z"}),(0,r.jsx)("path",{d:"M17 7.5V4.5a2.1 2.05 0 0 0-2.1-2.1H8.1A2.1 2.05 0 0 0 6 4.5v3.1"}),(0,r.jsx)("path",{d:"M12 9v6"}),(0,r.jsx)("path",{d:"M9 12h6"})]})}),(0,r.jsx)(i.E.button,{onClick:()=>a(t),className:"p-2 rounded-full transition-colors ".concat(l?"hover:bg-slate-700 text-slate-400 hover:text-white":"hover:bg-color-bg-hover text-color-text-secondary hover:text-color-text-primary"),whileHover:{scale:1.1},whileTap:{scale:.9},title:s("edit","Modifier"),children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M17 3a2.85 2.85 0 0 1 2.92 2.92L10 16.5l-4 1.5 1.5-4L17 3Z"}),(0,r.jsx)("path",{d:"M7.5 7.5 10 10"})]})}),(0,r.jsx)(i.E.button,{onClick:()=>n(t.id),className:"p-2 rounded-full transition-colors ".concat(l?"hover:bg-red-600 text-red-400 hover:text-white":"hover:bg-red-100 text-red-500 hover:text-red-600"),whileHover:{scale:1.1},whileTap:{scale:.9},title:s("delete","Supprimer"),children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M3 6h18"}),(0,r.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),(0,r.jsx)("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]}),(0,r.jsxs)("div",{className:"flex-grow",children:[(0,r.jsx)("p",{className:"font-bold text-color-text-primary text-lg truncate",children:t.name}),(0,r.jsx)("p",{className:"text-sm text-color-text-secondary",children:t.client})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2 text-sm text-color-text-secondary mt-4",children:[u&&(0,r.jsxs)("div",{className:"flex items-center gap-2 ".concat(h?"text-red-400 font-semibold":""),children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),(0,r.jsx)("line",{x1:"16",x2:"16",y1:"2",y2:"6"}),(0,r.jsx)("line",{x1:"8",x2:"8",y1:"2",y2:"6"}),(0,r.jsx)("line",{x1:"3",x2:"21",y1:"10",y2:"10"})]}),s("deadline","\xc9ch\xe9ance"),": ",(0,r.jsx)("span",{className:"font-semibold text-color-text-primary",children:(0,S.Z)(c,"dd/MM/yy",{locale:T.Z})}),h&&(0,r.jsx)("span",{className:"text-xs ml-2 px-2 py-0.5 rounded-full ".concat(l?"bg-red-500/20":"bg-red-100"," ").concat(l?"text-red-400":"text-red-700"),children:s("overdue","D\xe9pass\xe9e")})]}),t.totalAmount&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("line",{x1:"12",x2:"12",y1:"2",y2:"22"}),(0,r.jsx)("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),s("total_amount","Montant Total"),": ",(0,r.jsx)("span",{className:"font-semibold text-color-text-primary",children:t.totalAmount})]}),t.paidAmount&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"M20 6 9 17l-5-5"})}),s("paid_amount","D\xe9j\xe0 Pay\xe9"),": ",(0,r.jsx)("span",{className:"font-semibold ".concat(l?"text-green-400":"text-violet-700"),children:t.paidAmount})]}),t.nextPayment&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),(0,r.jsx)("line",{x1:"16",x2:"16",y1:"2",y2:"6"}),(0,r.jsx)("line",{x1:"8",x2:"8",y1:"2",y2:"6"}),(0,r.jsx)("line",{x1:"3",x2:"21",y1:"10",y2:"10"})]}),s("next_payment","Prochain Paiement"),": ",(0,r.jsx)("span",{className:"font-semibold ".concat(l?"text-amber-400":"text-blue-700"),children:t.nextPayment})]}),t.staff&&t.staff.length>0&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),(0,r.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,r.jsx)("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),(0,r.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),(0,r.jsxs)("span",{className:"font-semibold text-color-text-primary",children:[s("assigned_staff","\xc9quipe"),":"]}),(0,r.jsx)("div",{className:"flex -space-x-1 overflow-hidden",children:t.staff.map((e,t)=>(0,r.jsx)(j(),{className:"inline-block h-6 w-6 rounded-full ring-2 object-cover ".concat(l?"ring-slate-800":"ring-color-bg-primary"),src:e,alt:"Staff member ".concat(t),width:24,height:24},t))})]})]}),(0,r.jsx)("div",{className:"w-full rounded-full h-2 mt-2 ".concat(l?"bg-slate-700/50":"bg-color-bg-tertiary"),children:(0,r.jsx)("div",{className:"h-2 rounded-full ".concat(h?"bg-red-500":"bg-gradient-to-r from-pink-500 to-violet-500"),style:{width:"".concat(t.progress,"%")}})}),(0,r.jsxs)("p",{className:"text-right text-xs text-color-text-secondary mt-1",children:[t.progress,"% ",s("completed","termin\xe9")]})]})};var R=e=>{let{t,onAddProject:s,onEditProject:n,onDeleteProject:o,onAddGoogleDriveLink:l,className:c=""}=e,[d,u]=(0,a.useState)([]);(0,a.useEffect)(()=>{u(p.projects.slice(0,3))},[]);let h=p.projects.length;return(0,r.jsx)(N,{icon:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2"}),(0,r.jsx)("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),title:t("my_projects","Mes Projets"),className:c,children:(0,r.jsxs)("div",{className:"flex flex-col h-full justify-between",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4 flex-shrink-0",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-color-text-primary",children:t("total_projects","Projets Totaux")}),(0,r.jsx)("span",{className:"text-pink-400 text-3xl font-extrabold",children:h})]}),(0,r.jsx)("div",{className:"space-y-3 flex-grow overflow-y-auto custom-scrollbar pr-2",children:d.length>0?d.map(e=>(0,r.jsx)(z,{project:e,t:t,onEditProject:n,onDeleteProject:o,onAddGoogleDriveLink:l},e.id)):(0,r.jsx)("p",{className:"text-center p-8 text-sm text-color-text-secondary",children:t("no_projects","Aucun projet \xe0 afficher. Ajoutez-en un !")})}),(0,r.jsx)("div",{className:"mt-4 flex-shrink-0",children:(0,r.jsxs)(i.E.button,{onClick:s,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-pink-500 to-red-600 shadow-lg main-action-button",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.jsx)("path",{d:"M12 8v8"}),(0,r.jsx)("path",{d:"M8 12h8"})]}),t("add_project","Ajouter un projet")]})})]})})},q=s(6848),I=s(858),O=e=>{let{onRegisterClick:t,t:s}=e,{isDarkMode:a}=(0,d.Fg)();return(0,r.jsxs)("div",{className:"border-l-4 p-4 mb-6 rounded-r-lg flex items-center justify-between gap-4 text-sm\n                    ".concat(a?"bg-yellow-500/10 border-yellow-500 text-yellow-300":"bg-blue-100 border-blue-500 text-blue-800"),children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(q.Z,{size:20,className:"".concat(a?"text-yellow-500":"text-blue-600")}),(0,r.jsxs)("p",{children:[s("guest_banner_message","Vous \xeates en mode invit\xe9. Pour sauvegarder vos donn\xe9es et acc\xe9der \xe0 toutes les fonctionnalit\xe9s,")," ",(0,r.jsxs)("strong",{className:"font-semibold ".concat(a?"text-yellow-300":"text-blue-900"),children:[" ",s("guest_banner_strong","cr\xe9ez un compte gratuit")]}),"."]})]}),(0,r.jsxs)("button",{onClick:t,className:"font-bold px-4 py-2 rounded-lg text-xs whitespace-nowrap hover:bg-yellow-400 transition-colors flex items-center gap-2\n                            ".concat(a?"bg-yellow-500 text-black hover:bg-yellow-400":"bg-blue-600 text-white hover:bg-blue-700"),children:[(0,r.jsx)(I.Z,{size:14})," ",s("register_button","S'inscrire")]})]})},G=s(7492);let J=e=>{if(e.includes("T")&&e.includes("Z"))return(0,k.Z)(e);let[t,s,r]=e.split("/").map(Number);return new Date(r,s-1,t)};var X=e=>{let{openInvoiceForm:t,openInvoiceList:s,t:n,className:o=""}=e,[l,c]=(0,a.useState)([]),[u,h]=(0,a.useState)({paidThisYear:0,pendingTotal:0,nextPendingInvoice:null}),{isDarkMode:m}=(0,d.Fg)();return(0,a.useEffect)(()=>{new Date().getFullYear();let e=p.invoices,t=e.filter(e=>"Paid"===e.status&&(0,G.Z)(J(e.date),new Date)).reduce((e,t)=>e+parseFloat(t.amount.replace(/[^0-9,-]+/g,"").replace(",",".")),0),s=e.filter(e=>"Pending"===e.status),r=s.reduce((e,t)=>e+parseFloat(t.amount.replace(/[^0-9,-]+/g,"").replace(",",".")),0),a=new Date,n=s.filter(e=>J(e.date).getTime()>=a.getTime()).sort((e,t)=>J(e.date).getTime()-J(t.date).getTime())[0];c(e),h({paidThisYear:t,pendingTotal:r,nextPendingInvoice:n})},[]),(0,r.jsx)(N,{icon:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("line",{x1:"12",x2:"12",y1:"2",y2:"22"}),(0,r.jsx)("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),title:n("invoices_summary_title","R\xe9sum\xe9 des Factures"),className:o,children:(0,r.jsxs)("div",{className:"flex flex-col h-full justify-between",children:[(0,r.jsxs)("div",{className:"flex flex-col mb-4 space-y-2 flex-grow",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("p",{className:"text-color-text-secondary text-sm",children:[n("invoices_paid_this_year","Factures pay\xe9es cette ann\xe9e")," :"]}),(0,r.jsxs)("span",{className:"font-bold ".concat(m?"text-green-400":"text-violet-700"),children:[u.paidThisYear.toFixed(2)," €"]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("p",{className:"text-color-text-secondary text-sm",children:[n("invoices_pending_total","Factures en attente de paiement")," :"]}),(0,r.jsxs)("span",{className:"font-bold ".concat(m?"text-amber-400":"text-blue-700"),children:[u.pendingTotal.toFixed(2)," €"]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("p",{className:"text-color-text-secondary text-sm",children:[n("invoices_next_pending","Prochaine facture en attente")," :"]}),(0,r.jsx)("span",{className:"text-color-text-primary font-bold",children:u.nextPendingInvoice?"".concat(u.nextPendingInvoice.amount," (").concat((0,S.Z)(J(u.nextPendingInvoice.date),"dd/MM"),")"):n("no_upcoming_invoice","Aucune")})]})]}),(0,r.jsxs)("div",{className:"mt-auto space-y-2 flex-shrink-0",children:[(0,r.jsxs)(i.E.button,{onClick:t,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-green-500 to-teal-500 shadow-lg main-action-button",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.jsx)("path",{d:"M12 8v8"}),(0,r.jsx)("path",{d:"M8 12h8"})]}),n("new_invoice_button","Nouvelle Facture")]}),(0,r.jsxs)(i.E.button,{onClick:s,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full flex items-center justify-center gap-2 main-button-secondary",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}),(0,r.jsx)("path",{d:"M14 2v4a2 2 0 0 0 2 2h4"})]}),n("view_all_invoices_button","Voir toutes les factures")]})]})]})})},Y=s(6650),Q=s(8600),K=s(4741);let $=e=>{let{conversations:t,searchTerm:s,setSearchTerm:a,activeConversationId:n,handleSelectUserOnMobile:o,setShowNewDiscussionModal:i,currentUserName:l,showMobileSidebar:c,setShowMobileSidebar:d,isFullScreen:u,isDarkMode:h,t:m}=e;return(0,r.jsxs)("aside",{className:"w-64 flex-shrink-0 flex flex-col border-r border-color-border-primary md:flex ".concat(c&&!u?"flex w-full md:w-64":"hidden"," ").concat(u?"hidden":""," ").concat(h?"bg-slate-800":"bg-color-bg-primary"),children:[(0,r.jsxs)("div",{className:"px-4 py-3 border-b border-color-border-primary shadow-sm flex-shrink-0 flex items-center justify-between ".concat(h?"bg-gray-800":"bg-color-bg-tertiary"),children:[(0,r.jsxs)("h2",{className:"text-lg font-semibold",children:["FLOW ",(0,r.jsx)("span",{className:"text-purple-500",children:"Live"})," Messages"]}),(0,r.jsx)("button",{className:"md:hidden p-1 rounded-full ".concat(h?"text-slate-400 hover:text-white":"text-color-text-secondary hover:text-color-text-primary hover:bg-color-bg-hover"),onClick:()=>d(!1),"aria-label":m("close_sidebar","Fermer la barre lat\xe9rale"),title:m("close_sidebar","Fermer la barre lat\xe9rale"),children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"m15 18-6-6 6-6"})})})]}),(0,r.jsx)("div",{className:"px-4 pb-3 text-sm ".concat(h?"bg-gray-800 text-slate-400":"text-color-bg-tertiary text-color-text-secondary"),children:l}),(0,r.jsx)("div",{className:"p-3 border-b border-color-border-primary flex-shrink-0",children:(0,r.jsx)("input",{type:"text",placeholder:m("search_conversation_placeholder","Rechercher conversation..."),className:"form-input w-full text-sm py-1.5",value:s,onChange:e=>a(e.target.value)})}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto custom-scrollbar min-h-0",children:0===t.length?(0,r.jsx)("div",{className:"text-center py-10 text-sm ".concat(h?"text-slate-500":"text-color-text-tertiary"),children:m("no_conversations","Aucune conversation. Cr\xe9ez-en une nouvelle !")}):t.filter(e=>e.name&&e.name.toLowerCase().includes(s.toLowerCase())||e.lastMessage&&e.lastMessage.toLowerCase().includes(s.toLowerCase())).map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 cursor-pointer transition-colors duration-200\n                            ".concat(e.id===n?h?"bg-gray-800":"bg-color-bg-tertiary":h?"hover:bg-gray-700":"hover:bg-color-bg-hover"),onClick:()=>o(e),children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white ".concat(e.color," mr-3"),children:e.initials}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"font-medium truncate max-w-[160px] ".concat(h?"text-white":"text-color-text-primary"),children:[e.name,!e.isGroup&&(0,r.jsx)("span",{className:"ml-2 w-2 h-2 rounded-full inline-block ".concat(e.isOnline?"bg-green-500":"bg-gray-500"),title:e.isOnline?m("online","En ligne"):m("offline","Hors ligne")})]}),(0,r.jsx)("div",{className:"text-sm truncate max-w-[160px] ".concat(h?"text-gray-400":"text-color-text-secondary"),children:e.lastMessage})]})]}),e.unread>0&&(0,r.jsx)("div",{className:"ml-auto bg-pink-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:e.unread})]},e.id))}),(0,r.jsx)("div",{className:"p-3 border-t border-color-border-primary flex-shrink-0",children:(0,r.jsx)("button",{className:"main-button-secondary bg-purple-500 hover:bg-purple-600 w-full py-2 rounded text-white",onClick:()=>i(!0),children:m("new_discussion_button","Nouvelle discussion")})})]})};$.displayName="FlowLiveMessagesSidebar";let ee=e=>{let{messages:t,chatPanelRef:s,currentFirebaseUid:a,activeConversationId:n,activeConversationIsGroup:o,isDarkMode:i,openEphemeralImagePreview:l,t:c}=e;return(0,r.jsx)("div",{ref:s,className:"flex-1 overflow-y-auto p-3 sm:p-4 space-y-4 custom-scrollbar min-h-0",children:0===t.length&&n?(0,r.jsx)("div",{className:"text-center text-slate-500 py-10",children:c("start_a_conversation","Commencez une conversation !")}):0!==t.length||n?t.map((e,t)=>(0,r.jsxs)("div",{className:"max-w-[80%] p-2 rounded-lg w-fit ".concat(e.senderUid===a?"bg-purple-600 text-white ml-auto rounded-br-none":i?"bg-gray-700 text-white rounded-bl-none border border-gray-600":"bg-[var(--color-message-other-bg-light)] text-[var(--color-message-other-text-light)] rounded-bl-none border border-gray-200"),children:[o&&e.senderUid!==a&&(0,r.jsx)("div",{className:"text-xs font-semibold mb-1",children:e.from}),"image"===e.type?e.isEphemeral?(0,r.jsx)("button",{onClick:()=>l(e.fileURL,e.id),className:"text-blue-300 underline block text-center",children:c("view_ephemeral_image","Voir l'image \xe9ph\xe9m\xe8re")}):(0,r.jsx)("img",{src:e.fileURL,alt:"shared",className:"max-w-[150px] sm:max-w-xs rounded-md"}):"file"===e.type?(0,r.jsxs)("a",{href:e.fileURL,target:"_blank",rel:"noopener noreferrer",className:"text-blue-300 underline",children:[e.content," (",c("file","Fichier"),")"]}):(0,r.jsxs)("div",{className:"flex items-end justify-between gap-2",children:[(0,r.jsx)("p",{className:"leading-tight break-words pr-1 text-sm",children:e.content}),(0,r.jsxs)("span",{className:"flex items-center text-[0.6rem] opacity-70 ".concat(e.senderUid===a?"text-purple-200":i?"text-gray-300":"text-gray-500"," flex-shrink-0 whitespace-nowrap"),children:[e.isEphemeral&&(0,r.jsx)("span",{className:"mr-0.5",title:c("ephemeral","\xc9ph\xe9m\xe8re"),children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.jsx)("polyline",{points:"12 6 12 12 16 14"})]})}),e.displayTime,e.senderUid===a&&(0,r.jsx)("span",{className:"ml-0.5",children:"read"===e.status?(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M22 11 9 22l-7-7"}),(0,r.jsx)("path",{d:"m22 4-7 11-4-5"})]}):(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"M20 6 9 17l-5-5"})})})]})]})]},e.id||t)):(0,r.jsx)("div",{className:"text-center text-slate-500 py-10",children:c("select_or_create_new_conv","S\xe9lectionnez une conversation ou cr\xe9ez-en une nouvelle.")})})};ee.displayName="FlowLiveMessagesDisplay";let et=e=>{let{newMessage:t,setNewMessage:s,handleSendNormalMessage:a,handleAttachNormalFile:n,handleEmoticonClick:o,emojis:i,showEmojiPicker:l,setShowEmojiPicker:c,emojiButtonRef:d,isDarkMode:u,t:h}=e;return(0,r.jsxs)("div",{className:"flex items-end p-3 sm:p-4 border-t border-color-border-primary glass-card-input flex-shrink-0 relative",children:[(0,r.jsx)("input",{type:"file",ref:null,className:"hidden"}),(0,r.jsx)("button",{className:"text-gray-400 hover:text-purple-500 p-2 rounded",onClick:n,title:h("attach_file","Joindre un fichier"),children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.2"})})}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("button",{ref:d,className:"text-gray-400 hover:text-purple-500 p-2 rounded",onClick:()=>c(!l),title:h("pick_emoji","Choisir un emoji"),children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.jsx)("path",{d:"M8 14s1.5 2 4 2 4-2 4-2"}),(0,r.jsx)("line",{x1:"9",x2:"9.01",y1:"9",y2:"9"}),(0,r.jsx)("line",{x1:"15",x2:"15.01",y1:"9",y2:"9"})]})}),l&&(0,r.jsx)("div",{className:"emoji-picker-panel absolute bottom-full mb-2 left-0 bg-gray-800 rounded-lg shadow-lg p-2 grid grid-cols-6 sm:grid-cols-8 gap-1 border border-gray-700 w-full max-h-48 overflow-y-auto sm:w-64",children:i.map((e,t)=>(0,r.jsx)("span",{className:"cursor-pointer text-xl p-1 hover:bg-gray-700 rounded-md flex items-center justify-center",onClick:()=>o(e),children:e},t))})]}),(0,r.jsx)("textarea",{className:"flex-1 mx-2 sm:mx-3 form-input form-input-glow min-w-0 resize-none bg-gray-800 text-white placeholder-gray-400 border border-gray-700 focus:border-purple-500 focus:ring-purple-500 text-xs py-1.5",placeholder:h("write_here_placeholder","\xc9crire ici"),rows:1,value:t,onChange:e=>{s(e.target.value),e.target.style.height="auto",e.target.style.height=e.target.scrollHeight+"px"},onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),a())}}),(0,r.jsx)("button",{className:"main-action-button bg-purple-500 hover:bg-purple-600 text-white p-2 rounded transition-colors duration-200",onClick:a,title:h("send_message","Envoyer le message"),children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"m22 2-7 20-4-9-9-4 20-7Z"}),(0,r.jsx)("path",{d:"M22 2 11 13"})]})}),(0,r.jsx)("button",{className:"main-action-button bg-orange-500 hover:bg-orange-600 text-white p-2 rounded-full transition-colors duration-200 ml-2",onClick:()=>{},title:h("send_ephemeral_message_btn","Envoyer le message \xe9ph\xe9m\xe8re"),children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.jsx)("polyline",{points:"12 6 12 12 16 14"})]})})]})};et.displayName="FlowLiveMessagesInput";let es=e=>{let{showModal:t,onClose:s,onCreate:n,internalAvailableTeamMembers:o,currentFirebaseUid:i,currentUserName:l,t:c}=e,[d,u]=(0,a.useState)(!1),[h,m]=(0,a.useState)(""),[x,p]=(0,a.useState)([]),[g,v]=(0,a.useState)(""),j=(0,a.useRef)(null);if(!t)return null;let w=async()=>{await n({name:g,email:h,selectedUids:x,showNewContact:d}),m(""),p([]),v(""),u(!1),s()};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"glass-card p-6 rounded-2xl shadow-xl w-full max-w-md",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold mb-4 text-white",children:c("new_discussion_title","Nouvelle discussion")}),(0,r.jsxs)("div",{className:"mb-4 flex space-x-2",children:[(0,r.jsx)("button",{className:"flex-1 p-2 rounded-md font-semibold transition-colors ".concat(d?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-pink-500 text-white"),onClick:()=>u(!1),children:c("choose_team_member","Choisir membre d'\xe9quipe")}),(0,r.jsx)("button",{className:"flex-1 p-2 rounded-md font-semibold transition-colors ".concat(d?"bg-pink-500 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),onClick:()=>u(!0),children:c("add_new_email","Ajouter nouvel email")})]}),d?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("input",{type:"text",placeholder:c("new_contact_name_placeholder","Nom du nouveau contact (simul\xe9)"),className:"form-input w-full",value:g,onChange:e=>v(e.target.value),ref:j,autoFocus:!0}),(0,r.jsx)("input",{type:"email",placeholder:c("new_contact_email_placeholder","Email du nouveau contact (simul\xe9)"),className:"form-input w-full",value:h,onChange:e=>m(e.target.value)})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("input",{type:"text",placeholder:c("discussion_name_optional","Nom de la discussion (facultatif si 1 seul membre)"),className:"form-input w-full",value:g,onChange:e=>v(e.target.value),autoFocus:!0}),(0,r.jsxs)("div",{className:"max-h-60 overflow-y-auto custom-scrollbar mb-4 border border-gray-700 rounded-md",children:[o.filter(e=>e.firebaseUid!==i).map(e=>(0,r.jsxs)("div",{className:"flex items-center p-3 hover:bg-gray-700 cursor-pointer border-b border-gray-700 last:border-b-0",onClick:()=>{p(t=>t.includes(e.firebaseUid)?t.filter(t=>t!==e.firebaseUid):[...t,e.firebaseUid])},children:[(0,r.jsx)("input",{type:"checkbox",className:"mr-3 form-checkbox text-pink-500 rounded",checked:x.includes(e.firebaseUid),onChange:()=>{}}),(0,r.jsx)("div",{className:"w-7 h-7 rounded-full flex items-center justify-center text-white bg-gray-500 mr-3 text-sm",children:e.initials}),(0,r.jsx)("span",{className:"text-white",children:e.name})]},e.firebaseUid)),i&&!x.includes(i)&&(0,r.jsxs)("div",{className:"flex items-center p-3 text-slate-500",children:[(0,r.jsx)("input",{type:"checkbox",className:"mr-3",checked:!0,disabled:!0}),(0,r.jsx)("div",{className:"w-7 h-7 rounded-full flex items-center justify-center text-white bg-gray-500 mr-3 text-sm",children:l.charAt(0).toUpperCase()}),(0,r.jsxs)("span",{children:[l," (",c("you","Vous"),")"]})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,r.jsx)("button",{onClick:s,className:"main-button-secondary bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded",children:c("cancel","Annuler")}),(0,r.jsx)("button",{onClick:w,className:"main-action-button bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded",children:c("create_discussion","Cr\xe9er la discussion")})]})]})})};es.displayName="NewDiscussionModal";let er=e=>{let{children:t,onClose:s,size:a="max-w-md"}=e;return(0,r.jsx)(i.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-[100] p-4",onClick:s,children:(0,r.jsxs)(i.E.div,{initial:{scale:.95,y:20},animate:{scale:1,y:0},exit:{scale:.95,y:20,opacity:0},transition:{type:"spring",stiffness:400,damping:30},className:"glass-card p-6 sm:p-8 rounded-2xl w-full relative ".concat(a),onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("button",{onClick:s,className:"absolute top-3 right-3 text-slate-400 hover:text-white transition-colors p-2 rounded-full hover:bg-white/10",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M18 6 6 18"}),(0,r.jsx)("path",{d:"m6 6 12 12"})]})}),t]})})};var ea=e=>{let{task:t,onSave:s,onClose:n,t:o}=e,[i,l]=(0,a.useState)(t.title||""),[c,d]=(0,a.useState)(t.priority||"normal"),[u,h]=(0,a.useState)(t.deadline?(0,S.Z)((0,k.Z)(t.deadline),"yyyy-MM-dd"):""),[m,x]=(0,a.useState)(!1),p=async e=>{e.preventDefault(),i.trim()&&(x(!0),await s({...t,title:i.trim(),priority:c,deadline:u||null}),x(!1),n())},g=[{id:"urgent",text:o("priority_urgent","Urgent"),icon:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-red-400",children:[(0,r.jsx)("path",{d:"M12 11.5a3 3 0 1 0 0 7 3 3 0 0 0 0-7Z"}),(0,r.jsx)("path",{d:"M12 2C8.68 2 6 4.68 6 8a6 6 0 0 0 5.09 5.92c.32.32.69.64 1.11.9L22 22 20 20l-3.51-3.51A6 6 0 0 0 12 2Z"})]}),color:"red"},{id:"normal",text:o("priority_normal","Normal"),icon:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-sky-400",children:[(0,r.jsx)("path",{d:"M8 6h12"}),(0,r.jsx)("path",{d:"M8 12h12"}),(0,r.jsx)("path",{d:"M8 18h12"}),(0,r.jsx)("path",{d:"M3 6h.01"}),(0,r.jsx)("path",{d:"M3 12h.01"}),(0,r.jsx)("path",{d:"M3 18h.01"})]}),color:"sky"},{id:"cold",text:o("priority_cold","Froid"),icon:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-slate-400",children:[(0,r.jsx)("path",{d:"M2 12h20"}),(0,r.jsx)("path",{d:"M12 2V22"}),(0,r.jsx)("path",{d:"m4 16 1.4-1.4A4.5 4.5 0 0 1 8.8 12c.7-.7 1.5-1 2.3-1.2l.9-.1C13 10.5 14 10 14 9a2 2 0 0 0-2-2c-.7 0-1.4.2-2 .5L8 6"}),(0,r.jsx)("path",{d:"m20 8-1.4 1.4A4.5 4.5 0 0 1 15.2 12c-.7.7-1.5 1-2.3 1.2l-.9.1C11 13.5 10 14 10 15a2 2 0 0 0 2 2c.7 0-1.4-.2-2-.5L16 18"})]}),color:"slate"}];return(0,r.jsxs)(er,{onClose:n,children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white mb-6 text-center",children:o("edit_task_title","Modifier la t\xe2che")}),(0,r.jsxs)("form",{onSubmit:p,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"taskTitle",className:"block text-slate-300 text-sm mb-2 font-medium",children:o("task_title_label","Titre de la t\xe2che")}),(0,r.jsx)("input",{id:"taskTitle",type:"text",value:i,onChange:e=>l(e.target.value),className:"form-input",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-slate-300 text-sm mb-2 font-medium",children:o("priority_label","Priorit\xe9")}),(0,r.jsx)("div",{className:"flex justify-center items-center space-x-2 bg-slate-800/50 border border-slate-700 rounded-lg p-1.5",children:g.map(e=>(0,r.jsxs)("button",{type:"button",onClick:()=>d(e.id),className:"flex-1 p-2 rounded-md transition-all flex items-center justify-center gap-2 text-sm font-semibold ".concat(c===e.id?"bg-".concat(e.color,"-500 text-white shadow-lg"):"text-slate-300 hover:bg-slate-700"),children:[e.icon,e.text]},e.id))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"taskDeadline",className:"block text-slate-300 text-sm mb-2 font-medium",children:o("deadline_label","\xc9ch\xe9ance")}),(0,r.jsx)("input",{id:"taskDeadline",type:"date",value:u,onChange:e=>h(e.target.value),className:"form-input"})]}),(0,r.jsx)("button",{type:"submit",disabled:m,className:"w-full pulse-button bg-gradient-to-r from-pink-500 to-violet-500 text-white font-bold py-3 rounded-lg text-lg !mt-8 disabled:opacity-50 main-action-button",children:m?o("saving","Sauvegarde..."):o("save_changes","Sauvegarder les changements")})]})]})},en=e=>{let{data:t,onAddTask:s,onClose:a,t:n}=e,{date:o,events:l}=t,c={meeting:{icon:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-violet-400",children:[(0,r.jsx)("path",{d:"m22 8-6 4 6 4V8Z"}),(0,r.jsx)("path",{d:"M14 12H2V4h12v8Z"})]}),label:n("event_meeting","R\xe9union")},task:{icon:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-sky-400",children:[(0,r.jsx)("path",{d:"M9 11L12 14L22 4"}),(0,r.jsx)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),label:n("event_task","T\xe2che")},project:{icon:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-pink-400",children:[(0,r.jsx)("rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2"}),(0,r.jsx)("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),label:n("event_project","Projet")}},d=e=>e.dateTime?c.meeting:void 0!==e.progress?c.project:c.task;return(0,r.jsxs)(er,{onClose:a,size:"max-w-xl",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white mb-4 text-center capitalize",children:(0,M.Z)(o)?n("today","Aujourd'hui"):(0,S.Z)(o,"eeee dd MMMM",{locale:T.Z})}),(0,r.jsx)("p",{className:"text-slate-400 text-center mb-6",children:n("day_events_summary","Voici les \xe9v\xe9nements pr\xe9vus pour ce jour.")}),(0,r.jsx)("div",{className:"space-y-3 mb-6 max-h-60 overflow-y-auto custom-scrollbar pr-2",children:Array.isArray(l)&&l.length>0?l.map(e=>{let t=d(e);return(0,r.jsxs)("div",{className:"bg-slate-800/50 p-3 rounded-lg flex items-center gap-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:t.icon}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-bold text-white",children:e.title||e.name}),(0,r.jsxs)("p",{className:"text-xs text-slate-400",children:[t.label,e.dateTime&&(0,C.Z)((0,k.Z)(e.dateTime))?" ".concat(n("at","\xe0")," ").concat((0,S.Z)((0,k.Z)(e.dateTime),"HH:mm")):"",e.deadline&&(0,C.Z)((0,k.Z)(e.deadline))?" ".concat(n("until","jusqu'au")," ").concat((0,S.Z)((0,k.Z)(e.deadline),"dd/MM/yy")):""]})]})]},e.id)}):(0,r.jsx)("p",{className:"text-slate-400 text-center py-4",children:n("no_events_for_day","Aucun \xe9v\xe9nement pour ce jour.")})}),(0,r.jsxs)(i.E.button,{onClick:()=>{a(),s(o)},whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-pink-500 to-violet-500 text-white font-bold py-2.5 rounded-lg hover:from-pink-600 hover:to-violet-600 transition-all shadow-lg main-action-button",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.jsx)("path",{d:"M12 8v8"}),(0,r.jsx)("path",{d:"M8 12h8"})]}),n("add_event_for_day","Ajouter un \xe9v\xe9nement pour ce jour")]})]})},eo=e=>{let{date:t,onSave:s,onClose:n,t:o}=e,[l,c]=(0,a.useState)(""),[d,u]=(0,a.useState)("task"),[h,m]=(0,a.useState)(!1),x=async e=>{e.preventDefault(),l.trim()&&(m(!0),"task"===d?s(l,"normal",(0,S.Z)(t,"yyyy-MM-dd")):"note"===d?alert(o("note_feature_placeholder","Fonctionnalit\xe9 d'ajout de note non impl\xe9ment\xe9e directement ici.")):"meeting"===d?alert(o("meeting_feature_placeholder","Fonctionnalit\xe9 d'ajout de r\xe9union non impl\xe9ment\xe9e directement ici.")):"project-deadline"===d&&alert(o("project_deadline_feature_placeholder","Fonctionnalit\xe9 d'ajout de deadline de projet non impl\xe9ment\xe9e directement ici.")),m(!1),n())},p=[{id:"task",label:o("add_type_task","T\xe2che"),icon:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-sky-400",children:[(0,r.jsx)("path",{d:"M9 11L12 14L22 4"}),(0,r.jsx)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]})},{id:"note",label:o("add_type_note","Note"),icon:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-slate-400",children:[(0,r.jsx)("path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}),(0,r.jsx)("path",{d:"M14 2v4a2 2 0 0 0 2 2h4"})]})},{id:"meeting",label:o("add_type_meeting","R\xe9union"),icon:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-violet-400",children:[(0,r.jsx)("path",{d:"m22 8-6 4 6 4V8Z"}),(0,r.jsx)("path",{d:"M14 12H2V4h12v8Z"})]})},{id:"project-deadline",label:o("add_type_deadline","Deadline Projet"),icon:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-pink-400",children:[(0,r.jsx)("rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2"}),(0,r.jsx)("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]})}];return(0,r.jsxs)(er,{onClose:n,size:"max-w-sm",children:[(0,r.jsxs)("h2",{className:"text-xl font-bold text-white mb-4 text-center",children:[o("add_event_title_for","Ajouter un \xe9v\xe9nement pour le")," ",(0,S.Z)(t,"dd MMMM",{locale:T.Z})]}),(0,r.jsx)("div",{className:"mb-4 flex justify-center space-x-2 bg-slate-800/50 border border-slate-700 rounded-lg p-1.5",children:p.map(e=>(0,r.jsxs)("button",{type:"button",onClick:()=>u(e.id),className:"flex-1 p-2 rounded-md transition-all flex items-center justify-center gap-2 text-sm font-semibold\n                                    ".concat(d===e.id?"bg-pink-500 text-white shadow-lg":"text-slate-300 hover:bg-slate-700"),children:[e.icon," ",e.label]},e.id))}),(0,r.jsxs)("form",{onSubmit:x,children:[(0,r.jsx)("input",{type:"text",value:l,onChange:e=>c(e.target.value),placeholder:o("event_title_placeholder","Titre de l'\xe9v\xe9nement..."),className:"form-input mb-4",required:!0,autoFocus:!0}),(0,r.jsx)(i.E.button,{type:"submit",disabled:h,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full bg-gradient-to-r from-pink-500 to-violet-500 text-white font-bold py-2.5 rounded-lg disabled:opacity-50 main-action-button",children:h?o("adding","Ajout..."):o("add_event","Ajouter l'\xe9v\xe9nement")})]})]})},ei=e=>{let{currentName:t,onSave:s,onClose:n,t:o}=e,[l,c]=(0,a.useState)(t);return(0,r.jsxs)(er,{onClose:n,size:"max-w-sm",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white mb-6 text-center",children:o("edit_guest_name_title","Modifier votre pseudo")}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s(l),n()},children:[(0,r.jsx)("input",{type:"text",value:l,onChange:e=>c(e.target.value),className:"form-input text-center text-lg mb-6 w-full",autoFocus:!0,placeholder:o("guest_name_placeholder","Votre pseudo")}),(0,r.jsx)(i.E.button,{type:"submit",whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full pulse-button bg-gradient-to-r from-pink-500 to-violet-500 text-white font-bold py-3 rounded-lg text-lg main-action-button",children:o("save","Sauvegarder")})]})]})};let el=["/images/avatars/avatar-1.jpg","/images/avatars/avatar-2.jpg","/images/avatars/avatar-3.jpg","/images/avatars/avatar-4.jpg","/images/avatars/avatar-5.jpg","/images/avatars/avatar-6.jpg","/images/avatars/avatar-7.jpg","/images/avatars/avatar-8.jpg","/images/avatars/avatar-9.jpg","/images/avatars/yves.jpg"];var ec=e=>{let{onClose:t,t:s,isGuestMode:n,onUpdateGuestAvatar:o}=e,{user:l,refreshUser:d}=(0,c.aC)(),[m,x]=(0,a.useState)(null),[p,g]=(0,a.useState)(""),[v,w]=(0,a.useState)(!1),[f,b]=(0,a.useState)(!1),[y,k]=(0,a.useState)(""),[C,N]=(0,a.useState)("upload");(0,a.useEffect)(()=>{if(n){var e;let t=JSON.parse(localStorage.getItem("nocaflow_guest_data")||"{}");(null===(e=t.user)||void 0===e?void 0:e.photoURL)&&g(t.user.photoURL)}else(null==l?void 0:l.photoURL)&&g(l.photoURL)},[l,n]);let D=async e=>{w(!0),k("");try{if(n)o(e);else{let t=(0,h.JU)(u.db,"users",l.uid);await (0,h.r7)(t,{photoURL:e}),d&&await d()}b(!0),setTimeout(()=>{b(!1),t()},1500)}catch(e){console.error("Error updating avatar:",e),k(s("avatar_upload_error","\xc9chec de l'upload de l'avatar. Veuillez r\xe9essayer."))}finally{w(!1)}},_=async()=>{if(!m){k(s("no_file_selected","Aucun fichier s\xe9lectionn\xe9."));return}if(n)D(p);else{if(!l||!l.uid){k(s("user_not_connected","Utilisateur non connect\xe9."));return}w(!0);try{let e=(0,Y.iH)(u.tO,"avatars/".concat(l.uid,"/").concat(m.name)),t=await (0,Y.KV)(e,m),s=await (0,Y.Jt)(t.ref);await D(s)}catch(e){console.error("Error uploading image to storage:",e),k(s("storage_upload_error","Erreur lors du t\xe9l\xe9chargement vers le stockage.")),w(!1)}}},L=e=>{x(null),g(e),D(e)};return(0,r.jsxs)(er,{onClose:t,size:"max-w-xl",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white mb-6 text-center",children:s("change_avatar_title","Changer votre avatar")}),f?(0,r.jsxs)(i.E.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-8",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),(0,r.jsx)("polyline",{points:"22 4 12 14.01 9 11.01"})]}),(0,r.jsx)("p",{className:"text-xl font-semibold text-white",children:s("avatar_updated_success","Avatar mis \xe0 jour !")})]}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-center mb-4",children:[(0,r.jsxs)("button",{className:"px-4 py-2 rounded-l-lg text-sm font-semibold transition-colors ".concat("upload"===C?"bg-pink-500 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"),onClick:()=>N("upload"),children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"}),(0,r.jsx)("path",{d:"M12 12v9"}),(0,r.jsx)("path",{d:"m8 17 4 4 4-4"})]}),s("upload_tab","T\xe9l\xe9charger")]}),(0,r.jsxs)("button",{className:"px-4 py-2 rounded-r-lg text-sm font-semibold transition-colors ".concat("choose"===C?"bg-pink-500 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"),onClick:()=>N("choose"),children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),(0,r.jsx)("circle",{cx:"9",cy:"9",r:"2"}),(0,r.jsx)("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),s("choose_tab","Choisir")]})]}),"upload"===C&&(0,r.jsxs)("div",{className:"space-y-4 text-center",children:[(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{if(k(""),e.target.files&&e.target.files[0]){let t=e.target.files[0];if(!t.type.startsWith("image/")){k(s("select_image_error","Veuillez s\xe9lectionner un fichier image.")),x(null),g("");return}if(t.size>5242880){k(s("file_size_error","Le fichier est trop volumineux (max 5MB).")),x(null),g("");return}x(t),g(URL.createObjectURL(t))}else x(null),g("")},className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-violet-50 file:text-violet-700 hover:file:bg-violet-100",disabled:v}),p&&(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsxs)("p",{className:"text-slate-400 text-sm mb-2",children:[s("preview","Aper\xe7u")," :"]}),(0,r.jsx)(j(),{src:p,alt:s("preview","Aper\xe7u"),width:120,height:120,className:"rounded-full mx-auto object-cover border border-slate-700"})]}),y&&(0,r.jsx)("p",{className:"text-red-400 text-sm text-center",children:y}),(0,r.jsx)("button",{onClick:_,disabled:!m||v,className:"w-full pulse-button bg-gradient-to-r from-pink-500 to-violet-500 text-white font-bold py-3 rounded-md text-lg disabled:opacity-50 disabled:animate-none main-action-button",children:v?s("uploading")||"T\xe9l\xe9chargement...":s("upload_and_validate","T\xe9l\xe9charger et Valider")})]}),"choose"===C&&(0,r.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-4 max-h-80 overflow-y-auto custom-scrollbar p-2",children:el.map((e,t)=>(0,r.jsx)(i.E.div,{whileHover:{scale:1.05,boxShadow:"0 0 15px rgba(236, 72, 153, 0.6)"},onClick:()=>L(e),className:"rounded-full overflow-hidden cursor-pointer aspect-square border-4 transition-all duration-200",style:{borderColor:p===e?"#ec4899":"transparent"},children:(0,r.jsx)(j(),{src:e,alt:"Avatar ".concat(t+1),width:100,height:100,className:"w-full h-full object-cover"})},t))})]})]})},ed=e=>{let{onSchedule:t,isGuest:s,onClose:n,t:o}=e,[l,c]=(0,a.useState)(""),[d,u]=(0,a.useState)((0,S.Z)(new Date,"yyyy-MM-dd")),[h,m]=(0,a.useState)((0,S.Z)(new Date,"HH:mm")),[x,p]=(0,a.useState)("");return(0,r.jsxs)(er,{onClose:n,children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-white mb-6 text-center flex items-center justify-center gap-2",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"m22 8-6 4 6 4V8Z"}),(0,r.jsx)("path",{d:"M14 12H2V4h12v8Z"})]}),o("schedule_meeting_title","Planifier une r\xe9union")]}),(0,r.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),s){alert(o("guest_feature_disabled","L'ajout de r\xe9unions est d\xe9sactiv\xe9 en mode invit\xe9. Veuillez vous inscrire pour profiter de toutes les fonctionnalit\xe9s !"));return}t({id:"meeting-".concat(Date.now()),createdAt:new Date().toISOString(),dateTime:"".concat(d,"T").concat(h,":00"),title:l,attendees:(x||"").split(",").map(e=>e.trim())}),n()},className:"space-y-4",children:[(0,r.jsx)("input",{name:"title",type:"text",value:l,onChange:e=>c(e.target.value),placeholder:o("meeting_title_placeholder","Titre de la r\xe9union..."),className:"form-input",required:!0}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsx)("input",{type:"date",value:d,onChange:e=>u(e.target.value),className:"form-input"}),(0,r.jsx)("input",{type:"time",value:h,onChange:e=>m(e.target.value),className:"form-input"})]}),s&&(0,r.jsxs)("p",{className:"text-xs text-amber-400 text-center flex items-center gap-2",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.jsx)("path",{d:"M12 16v-4"}),(0,r.jsx)("path",{d:"M12 8h.01"})]}),o("guest_feature_restricted","Fonctionnalit\xe9 r\xe9serv\xe9e aux membres inscrits.")]}),(0,r.jsx)(i.E.button,{type:"submit",whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full ".concat(s?"bg-slate-600 cursor-not-allowed":"pulse-button bg-gradient-to-r from-violet-600 to-indigo-600"," main-action-button"),children:o("schedule","Planifier")})]})]})},eu=e=>{let{initialData:t={},onSave:s,onDelete:n,onClose:o,isGuest:l,t:c}=e,[d,u]=(0,a.useState)(t.name||""),[h,m]=(0,a.useState)(t.client||""),[x,p]=(0,a.useState)(t.progress||0),[g,v]=(0,a.useState)(t.deadline?(0,S.Z)((0,k.Z)(t.deadline),"yyyy-MM-dd"):""),[j,w]=(0,a.useState)(t.paidAmount||""),[f,b]=(0,a.useState)(t.nextPayment||""),[y,C]=(0,a.useState)(t.totalAmount||""),[N,D]=(0,a.useState)(t.staff||[]),[_,L]=(0,a.useState)(t.googleDriveLink||"");return(0,r.jsxs)(er,{onClose:o,children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-white mb-6 text-center flex items-center justify-center gap-2",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2"}),(0,r.jsx)("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),t.id?c("edit_project_title","Modifier le projet"):c("create_project_title","Cr\xe9er un nouveau projet")]}),(0,r.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),l){alert(c("guest_feature_disabled_project","L'ajout/modification de projets est d\xe9sactiv\xe9 en mode invit\xe9. Veuillez vous inscrire !"));return}d.trim()&&(s({id:t.id||"proj-".concat(Date.now()),createdAt:t.createdAt||new Date().toISOString(),name:d.trim(),client:h.trim(),progress:Number(x),deadline:g||null,paidAmount:j.trim(),nextPayment:f.trim(),totalAmount:y.trim(),staff:N,googleDriveLink:_.trim()||null}),o())},className:"space-y-4",children:[(0,r.jsx)("input",{type:"text",value:d,onChange:e=>u(e.target.value),placeholder:c("project_name_placeholder","Nom du projet..."),className:"form-input",required:!0}),(0,r.jsx)("input",{type:"text",value:h,onChange:e=>m(e.target.value),placeholder:c("client_name_placeholder","Nom du client..."),className:"form-input"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"projectProgress",className:"block text-slate-300 text-sm mb-2 font-medium",children:[c("progress","Progression")," (%)"]}),(0,r.jsx)("input",{id:"projectProgress",type:"number",value:x,onChange:e=>p(e.target.value),min:"0",max:"100",className:"form-input"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"projectDeadline",className:"block text-slate-300 text-sm mb-2 font-medium",children:c("deadline","\xc9ch\xe9ance")}),(0,r.jsx)("input",{id:"projectDeadline",type:"date",value:g,onChange:e=>v(e.target.value),className:"form-input"})]}),(0,r.jsx)("input",{type:"text",value:j,onChange:e=>w(e.target.value),placeholder:c("paid_amount_placeholder","D\xe9j\xe0 pay\xe9 (€)..."),className:"form-input"}),(0,r.jsx)("input",{type:"text",value:f,onChange:e=>b(e.target.value),placeholder:c("next_payment_placeholder","Prochain paiement (date ou montant)..."),className:"form-input"}),(0,r.jsx)("input",{type:"text",value:y,onChange:e=>C(e.target.value),placeholder:c("total_amount_placeholder","Paiement global (€)..."),className:"form-input"}),(0,r.jsx)("input",{type:"url",value:_,onChange:e=>L(e.target.value),placeholder:c("google_drive_link_placeholder","URL du dossier Google Drive"),className:"form-input"}),l&&(0,r.jsxs)("p",{className:"text-xs text-amber-400 text-center flex items-center gap-2",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.jsx)("path",{d:"M12 16v-4"}),(0,r.jsx)("path",{d:"M12 8h.01"})]}),c("guest_feature_restricted","Fonctionnalit\xe9 r\xe9serv\xe9e aux membres inscrits.")]}),(0,r.jsx)(i.E.button,{type:"submit",whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full ".concat(l?"bg-slate-600 cursor-not-allowed":"pulse-button bg-gradient-to-r from-pink-600 to-red-500"," main-action-button"),children:t.id?c("save_changes","Sauvegarder les changements"):c("create_project_button","Cr\xe9er le Projet")}),t.id&&(0,r.jsxs)(i.E.button,{type:"button",onClick:()=>{window.confirm(c("confirm_delete_project","\xcates-vous s\xfbr de vouloir supprimer ce projet ?"))&&n(t.id),o()},whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full bg-red-600 hover:bg-red-700 text-white mt-2 main-button-secondary",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M3 6h18"}),(0,r.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),(0,r.jsx)("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),c("delete_project_button","Supprimer le Projet")]})]})]})},eh=e=>{let{isGuest:t,client:s=null,onAdd:n,onClose:o,t:l}=e,[c,d]=(0,a.useState)(""),[u,h]=(0,a.useState)(""),[m,x]=(0,a.useState)(s?s.name:"");return(0,r.jsxs)(er,{onClose:o,children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-white mb-6 text-center flex items-center justify-center gap-2",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("line",{x1:"12",x2:"12",y1:"2",y2:"22"}),(0,r.jsx)("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),l("create_invoice_title","Cr\xe9er une nouvelle facture")]}),(0,r.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),t){alert(l("guest_feature_disabled_invoice","L'ajout de factures est d\xe9sactiv\xe9 en mode invit\xe9. Veuillez vous inscrire !"));return}c.trim()&&u.trim()&&(n({id:"inv-".concat(Date.now()),title:c.trim(),client:m.trim(),amount:"".concat(parseFloat(u).toFixed(2)," €"),date:(0,S.Z)(new Date,"dd/MM/yyyy"),status:"Pending"}),o())},className:"space-y-4",children:[(0,r.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),placeholder:l("invoice_title_placeholder","Titre de la facture..."),className:"form-input",required:!0}),(0,r.jsx)("input",{type:"text",value:m,onChange:e=>x(e.target.value),placeholder:l("invoice_client_placeholder","Nom du client..."),className:"form-input",required:!0}),(0,r.jsx)("input",{type:"number",value:u,onChange:e=>h(e.target.value),placeholder:l("invoice_amount_placeholder","Montant (€)..."),className:"form-input",step:"0.01",required:!0}),t&&(0,r.jsxs)("p",{className:"text-xs text-amber-400 text-center flex items-center gap-2",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.jsx)("path",{d:"M12 16v-4"}),(0,r.jsx)("path",{d:"M12 8h.01"})]}),l("guest_feature_restricted","Fonctionnalit\xe9 r\xe9serv\xe9e aux membres inscrits.")]}),(0,r.jsx)(i.E.button,{type:"submit",whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full ".concat(t?"bg-slate-600 cursor-not-allowed":"pulse-button bg-gradient-to-r from-green-500 to-teal-500"," main-action-button"),children:l("create_invoice_button","Cr\xe9er la facture")})]})]})},em=e=>{let{invoices:t=[],onClose:s,t:a}=e;return(0,r.jsxs)(er,{onClose:s,size:"max-w-xl",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-white mb-6 text-center flex items-center justify-center gap-2",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}),(0,r.jsx)("path",{d:"M14 2v4a2 2 0 0 0 2 2h4"})]}),a("all_invoices_title","Toutes les factures")]}),(0,r.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto custom-scrollbar p-2",children:Array.isArray(t)&&t.length>0?t.map(e=>(0,r.jsxs)("div",{className:"futuristic-card flex items-center justify-between p-3 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-bold text-white",children:e.title}),(0,r.jsxs)("p",{className:"text-sm text-slate-400",children:[e.client," - ",e.date]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"font-bold text-white",children:e.amount}),(0,r.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full ".concat("Paid"===e.status?"bg-green-500/20 text-green-400":"bg-amber-500/20 text-amber-400"),children:e.status})]})]},e.id)):(0,r.jsx)("p",{className:"text-center p-8 text-sm text-slate-500",children:a("no_invoices_to_display","Aucune facture \xe0 afficher.")})}),(0,r.jsx)("div",{className:"mt-6 text-center",children:(0,r.jsx)(i.E.button,{onClick:s,whileHover:{scale:1.02},whileTap:{scale:.98},className:"main-button-secondary w-full",children:a("close","Fermer")})})]})},ex=e=>{let{mode:t,member:s,onSave:n,onDelete:o,onClose:l,t:c}=e,[d,u]=(0,a.useState)((null==s?void 0:s.name)||""),[h,m]=(0,a.useState)((null==s?void 0:s.role)||""),[x,p]=(0,a.useState)((null==s?void 0:s.email)||""),[g,v]=(0,a.useState)((null==s?void 0:s.avatar)||"/images/default-avatar.png");return(0,r.jsxs)(er,{onClose:l,children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-white mb-6 text-center flex items-center justify-center gap-2",children:["add"===t?(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.jsx)("path",{d:"M12 8v8"}),(0,r.jsx)("path",{d:"M8 12h8"})]}):(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M17 3a2.85 2.85 0 0 1 2.92 2.92L10 16.5l-4 1.5 1.5-4L17 3Z"}),(0,r.jsx)("path",{d:"M7.5 7.5 10 10"})]}),"add"===t?c("add_member_title","Ajouter un membre"):c("edit_member_title","Modifier le membre")]}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),d.trim()&&h.trim()&&x.trim()&&(n({id:(null==s?void 0:s.id)||"member-".concat(Date.now()),name:d.trim(),role:h.trim(),email:x.trim(),avatar:g}),l())},className:"space-y-4",children:[(0,r.jsx)("div",{className:"flex justify-center mb-4",children:(0,r.jsx)(j(),{src:g,alt:"Member Avatar",width:80,height:80,className:"rounded-full object-cover border-2 border-pink-500"})}),(0,r.jsx)("input",{type:"text",value:d,onChange:e=>u(e.target.value),placeholder:c("member_name_placeholder","Nom du membre..."),className:"form-input",required:!0}),(0,r.jsx)("input",{type:"text",value:h,onChange:e=>m(e.target.value),placeholder:c("member_role_placeholder","R\xf4le..."),className:"form-input",required:!0}),(0,r.jsx)("input",{type:"email",value:x,onChange:e=>p(e.target.value),placeholder:c("member_email_placeholder","Email..."),className:"form-input",required:!0}),(0,r.jsx)(i.E.button,{type:"submit",whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full pulse-button bg-gradient-to-r from-pink-500 to-violet-500 main-action-button",children:"add"===t?c("add_member_button","Ajouter le membre"):c("save_changes","Sauvegarder les changements")}),"edit"===t&&(0,r.jsxs)(i.E.button,{type:"button",onClick:()=>{s&&window.confirm(c("confirm_delete_member","\xcates-vous s\xfbr de vouloir supprimer ce membre ?"))&&(o(s.id),l())},whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full bg-red-600 hover:bg-red-700 text-white mt-2 main-button-secondary",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M3 6h18"}),(0,r.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),(0,r.jsx)("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),c("delete_member_button","Supprimer le membre")]})]})]})},ep=e=>{let{member:t,onClose:s,t:n}=e,[o,l]=(0,a.useState)(""),[c,d]=(0,a.useState)([]);(0,a.useEffect)(()=>{var e;0===c.length&&d([{sender:(null==t?void 0:t.name)||"Partenaire",text:n("chat_intro_message","Salut ! Comment vas-tu ?"),timestamp:"14:00"},{sender:"Vous",text:n("chat_my_reply","Salut ! \xc7a va bien et toi ?"),timestamp:"14:01"}]),null===(e=u.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[c,null==t?void 0:t.name,n]);let u=(0,a.useRef)(null);return(0,r.jsxs)(er,{onClose:s,size:"max-w-lg",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-white mb-6 text-center flex items-center justify-center gap-2",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),(0,r.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,r.jsx)("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),(0,r.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),n("chat_with","Chat avec")," ",(null==t?void 0:t.name)||"Inconnu"]}),(0,r.jsxs)("div",{className:"flex flex-col h-96 bg-slate-800/50 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 space-y-4",children:[c.map((e,s)=>(0,r.jsxs)("div",{className:"flex gap-3 ".concat("Vous"===e.sender?"justify-end":"justify-start"),children:["Vous"!==e.sender&&(0,r.jsx)(j(),{src:(null==t?void 0:t.avatar)||"/images/default-avatar.png",alt:(null==t?void 0:t.name)||"Partenaire",width:32,height:32,className:"rounded-full object-cover flex-shrink-0"}),(0,r.jsxs)("div",{className:"p-3 rounded-lg max-w-[80%] ".concat("Vous"===e.sender?"bg-violet-600 text-white rounded-br-none":"bg-slate-700 text-slate-200 rounded-bl-none"),children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,r.jsx)("span",{className:"font-semibold text-sm",children:e.sender}),(0,r.jsx)("span",{className:"text-xs text-slate-400",children:e.timestamp})]}),(0,r.jsx)("p",{className:"text-sm break-words",children:e.text})]}),"Vous"===e.sender&&(0,r.jsx)(j(),{src:"/images/avatars/yves.jpg",alt:"Vous",width:32,height:32,className:"rounded-full object-cover flex-shrink-0"})]},s)),(0,r.jsx)("div",{ref:u})]}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),o.trim()&&(d(e=>[...e,{sender:"Vous",text:o.trim(),timestamp:new Date().toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}]),l(""),setTimeout(()=>{d(e=>[...e,{sender:(null==t?void 0:t.name)||"Partenaire",text:n("chat_simulated_reply","Je suis occup\xe9 en ce moment, je te rappelle plus tard !"),timestamp:new Date().toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}])},1500))},className:"mt-4 relative",children:[(0,r.jsx)("input",{type:"text",value:o,onChange:e=>l(e.target.value),placeholder:n("type_message_placeholder","Tapez votre message..."),className:"form-input pr-12"}),(0,r.jsxs)(i.E.button,{type:"submit",disabled:!o.trim(),whileHover:{scale:1.05},whileTap:{scale:.95},className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 rounded-full bg-pink-500 hover:bg-pink-600 text-white shadow-lg main-action-button",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"m22 2-7 20-4-9-9-4 20-7Z"}),(0,r.jsx)("path",{d:"M22 2 11 13"})]}),n("send","Envoyer")]})]})]})]})},eg=e=>{let{member:t,onClose:s,t:n,allStaffMembers:o=[],userUid:l,currentUserName:c,onAddTask:d}=e,[u,h]=(0,a.useState)("task"),[m,x]=(0,a.useState)(""),[p,g]=(0,a.useState)(""),[v,j]=(0,a.useState)((null==t?void 0:t.name)||c||""),[w,f]=(0,a.useState)(!1),b=(Array.isArray(o)?o:[]).filter(e=>e.firebaseUid!==l),y=async e=>{if(e.preventDefault(),!m.trim())return;f(!0);let t={title:m.trim(),assignedTo:v,deadline:p||null};"task"===u?(await d(t.title,"normal",t.deadline),alert(n("task_assigned_success",'T\xe2che "'.concat(t.title,'" assign\xe9e \xe0 ').concat(v," et ajout\xe9e !")))):"project"===u?alert(n("project_assignment_placeholder","Attribution de projet \xe0 ".concat(v,' : "').concat(t.title,'" - Non impl\xe9ment\xe9e.'))):"deadline"===u&&alert(n("deadline_assignment_placeholder","Attribution de deadline \xe0 ".concat(v,' : "').concat(t.title,'" - Non impl\xe9ment\xe9e.'))),f(!1),s()};return(0,r.jsxs)(er,{onClose:s,size:"max-w-md",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-white mb-6 text-center flex items-center justify-center gap-2",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2"}),(0,r.jsx)("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),n("assign_to","Assigner \xe0")," ",(null==t?void 0:t.name)||c||"cet utilisateur"]}),(0,r.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-slate-300 text-sm mb-2 font-medium",children:n("assignment_type","Type d'attribution")}),(0,r.jsxs)("div",{className:"flex space-x-2 bg-slate-800/50 border border-slate-700 rounded-lg p-1.5",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>h("task"),className:"flex-1 p-2 rounded-md transition-all flex items-center justify-center gap-2 text-sm font-semibold ".concat("task"===u?"bg-pink-500 text-white shadow-lg":"text-slate-300 hover:bg-slate-700"),children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M9 11L12 14L22 4"}),(0,r.jsx)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),n("task","T\xe2che")]}),(0,r.jsxs)("button",{type:"button",onClick:()=>h("project"),className:"flex-1 p-2 rounded-md transition-all flex items-center justify-center gap-2 text-sm font-semibold ".concat("project"===u?"bg-pink-500 text-white shadow-lg":"text-slate-300 hover:bg-slate-700"),children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2"}),(0,r.jsx)("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),n("project","Projet")]}),(0,r.jsxs)("button",{type:"button",onClick:()=>h("deadline"),className:"flex-1 p-2 rounded-md transition-all flex items-center justify-center gap-2 text-sm font-semibold ".concat("deadline"===u?"bg-pink-500 text-white shadow-lg":"text-slate-300 hover:bg-slate-700"),children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),(0,r.jsx)("line",{x1:"16",x2:"16",y1:"2",y2:"6"}),(0,r.jsx)("line",{x1:"8",x2:"8",y1:"2",y2:"6"}),(0,r.jsx)("line",{x1:"3",x2:"21",y1:"10",y2:"10"})]}),n("deadline","Deadline")]})]})]}),(0,r.jsx)("input",{type:"text",value:m,onChange:e=>x(e.target.value),placeholder:n("assignment_title_placeholder","Titre de l'attribution..."),className:"form-input",required:!0}),(0,r.jsx)("input",{type:"date",value:p,onChange:e=>g(e.target.value),className:"form-input"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-slate-300 text-sm mb-2 font-medium",children:n("assign_to_label","Assigner \xe0")}),(0,r.jsxs)("select",{value:v,onChange:e=>j(e.target.value),className:"form-input appearance-none pr-10",required:!0,children:[(0,r.jsxs)("option",{value:c,children:[c," (",n("me","Moi"),")"]}),(Array.isArray(b)?b:[]).map(e=>(0,r.jsx)("option",{value:e.name,children:e.name},e.firebaseUid))]}),(0,r.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-slate-400",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"m6 9 6 6 6-6"})})})]}),(0,r.jsx)(i.E.button,{type:"submit",disabled:w,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full font-bold py-3 rounded-lg text-lg text-white pulse-button bg-gradient-to-r from-pink-500 to-violet-500 main-action-button",children:w?n("assigning","Assignation..."):n("assign_button","Assigner")})]})]})},ev=e=>{let{currentUser:t,onClose:s,t:n}=e,{refreshUser:o}=(0,c.aC)(),[l,d]=(0,a.useState)((null==t?void 0:t.displayName)||""),[m,x]=(0,a.useState)(!1),[p,g]=(0,a.useState)(""),v=async e=>{if(e.preventDefault(),!l.trim()){g(n("name_empty_error","Le nom ne peut pas \xeatre vide."));return}x(!0),g("");try{if(t&&t.uid){let e=(0,h.JU)(u.db,"users",t.uid);await (0,h.r7)(e,{displayName:l.trim()}),o&&await o(),s()}else g(n("user_not_found","Utilisateur non trouv\xe9."))}catch(e){console.error("Error updating user display name:",e),g(n("update_name_error","Erreur lors de la mise \xe0 jour du nom."))}finally{x(!1)}};return(0,r.jsxs)(er,{onClose:s,size:"max-w-sm",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white mb-6 text-center",children:n("edit_user_name_title","Modifier votre nom")}),(0,r.jsxs)("form",{onSubmit:v,children:[(0,r.jsx)("input",{type:"text",value:l,onChange:e=>d(e.target.value),className:"form-input text-center text-lg mb-4 w-full",autoFocus:!0,placeholder:n("your_name_placeholder","Votre nom")}),p&&(0,r.jsx)("p",{className:"text-red-400 text-sm text-center",children:p}),(0,r.jsx)(i.E.button,{type:"submit",disabled:m,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full pulse-button bg-gradient-to-r from-pink-500 to-violet-500 text-white font-bold py-3 rounded-lg text-lg disabled:opacity-50 main-action-button",children:m?n("saving","Sauvegarde..."):n("save","Sauvegarder")})]})]})},ej=e=>{let{mode:t,client:s,onSave:n,onDelete:o,onClose:l,t:c}=e,[d,u]=(0,a.useState)((null==s?void 0:s.name)||""),[h,m]=(0,a.useState)((null==s?void 0:s.contactEmail)||""),[x,p]=(0,a.useState)((null==s?void 0:s.phone)||""),[g,v]=(0,a.useState)((null==s?void 0:s.lastContact)?(0,S.Z)((0,k.Z)(s.lastContact),"yyyy-MM-dd"):"");return(0,r.jsxs)(er,{onClose:l,children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-white mb-6 text-center flex items-center justify-center gap-2",children:["add"===t?(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),(0,r.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,r.jsx)("line",{x1:"19",x2:"19",y1:"8",y2:"14"}),(0,r.jsx)("line",{x1:"22",x2:"16",y1:"11",y2:"11"})]}):(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M17 3a2.85 2.85 0 0 1 2.92 2.92L10 16.5l-4 1.5 1.5-4L17 3Z"}),(0,r.jsx)("path",{d:"M7.5 7.5 10 10"})]}),"add"===t?c("add_client_title","Ajouter un client"):c("edit_client_title","Modifier le client")]}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),d.trim()&&h.trim()&&(n({id:(null==s?void 0:s.id)||"cl-".concat(Date.now()),name:d.trim(),contactEmail:h.trim(),phone:x.trim(),lastContact:g||null}),l())},className:"space-y-4",children:[(0,r.jsx)("input",{type:"text",value:d,onChange:e=>u(e.target.value),placeholder:c("client_name_placeholder","Nom du client..."),className:"form-input",required:!0}),(0,r.jsx)("input",{type:"email",value:h,onChange:e=>m(e.target.value),placeholder:c("client_email_placeholder","Email du client..."),className:"form-input",required:!0}),(0,r.jsx)("input",{type:"tel",value:x,onChange:e=>p(e.target.value),placeholder:c("client_phone_placeholder","T\xe9l\xe9phone (optionnel)..."),className:"form-input"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"lastContact",className:"block text-slate-300 text-sm mb-2 font-medium",children:c("last_contact_date","Date du dernier contact")}),(0,r.jsx)("input",{id:"lastContact",type:"date",value:g,onChange:e=>v(e.target.value),className:"form-input"})]}),(0,r.jsx)(i.E.button,{type:"submit",whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full pulse-button bg-gradient-to-r from-teal-500 to-cyan-600 main-action-button",children:"add"===t?c("add_client_button","Ajouter le client"):c("save_changes","Sauvegarder les changements")}),"edit"===t&&(0,r.jsxs)(i.E.button,{type:"button",onClick:()=>{s&&window.confirm(c("confirm_delete_client","\xcates-vous s\xfbr de vouloir supprimer ce client ?"))&&(o(s.id),l())},whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full bg-red-600 hover:bg-red-700 text-white mt-2 main-button-secondary",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M3 6h18"}),(0,r.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),(0,r.jsx)("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),c("delete_client_button","Supprimer le client")]})]})]})};let ew=[{name:"Pink",class:"bg-pink-500",value:"pink"},{name:"Red",class:"bg-red-500",value:"red"},{name:"Violet",class:"bg-violet-500",value:"violet"},{name:"Blue",class:"bg-blue-500",value:"blue"},{name:"Cyan",class:"bg-cyan-500",value:"cyan"},{name:"Green",class:"bg-green-500",value:"green"},{name:"Amber",class:"bg-amber-500",value:"amber"},{name:"Gray",class:"bg-gray-500",value:"gray"}];var ef=e=>{let{initialData:t={},onSave:s,onClose:n,allStaffMembers:o,allClients:l,t:c}=e,[d,u]=(0,a.useState)(t.name||""),[h,m]=(0,a.useState)(t.startDate?(0,S.Z)((0,k.Z)(t.startDate),"yyyy-MM-dd"):(0,S.Z)(new Date,"yyyy-MM-dd")),[x,p]=(0,a.useState)(t.endDate?(0,S.Z)((0,k.Z)(t.endDate),"yyyy-MM-dd"):(0,S.Z)(new Date,"yyyy-MM-dd")),[g,v]=(0,a.useState)(t.assignedTo||""),[j,w]=(0,a.useState)(t.client||""),[f,b]=(0,a.useState)(t.progress||0),[y,C]=(0,a.useState)(t.color||"blue");return(0,r.jsxs)(er,{onClose:n,size:"max-w-md",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-white mb-6 text-center flex items-center justify-center gap-2",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2"}),(0,r.jsx)("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),t.id?c("edit_gantt_task_title","Modifier la t\xe2che Gantt"):c("add_gantt_task_title","Ajouter une t\xe2che Gantt")]}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),d.trim()&&h&&x&&(s({id:t.id||"gantt-".concat(Date.now()),name:d.trim(),startDate:h,endDate:x,assignedTo:g,client:j,progress:Number(f),color:y}),n())},className:"space-y-4",children:[(0,r.jsx)("input",{type:"text",value:d,onChange:e=>u(e.target.value),placeholder:c("task_name_placeholder","Nom de la t\xe2che..."),className:"form-input",required:!0}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"startDate",className:"block text-slate-300 text-sm mb-2 font-medium",children:c("start_date","Date de d\xe9but")}),(0,r.jsx)("input",{id:"startDate",type:"date",value:h,onChange:e=>m(e.target.value),className:"form-input",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"endDate",className:"block text-slate-300 text-sm mb-2 font-medium",children:c("end_date","Date de fin")}),(0,r.jsx)("input",{id:"endDate",type:"date",value:x,onChange:e=>p(e.target.value),className:"form-input",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"assignedTo",className:"block text-slate-300 text-sm mb-2 font-medium",children:c("assigned_to","Assign\xe9 \xe0")}),(0,r.jsxs)("select",{id:"assignedTo",value:g,onChange:e=>v(e.target.value),className:"form-input",children:[(0,r.jsx)("option",{value:"",children:c("select_member","S\xe9lectionner un membre")}),Array.isArray(o)&&o.map(e=>(0,r.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"client",className:"block text-slate-300 text-sm mb-2 font-medium",children:c("client","Client")}),(0,r.jsxs)("select",{id:"client",value:j,onChange:e=>w(e.target.value),className:"form-input",children:[(0,r.jsx)("option",{value:"",children:c("select_client","S\xe9lectionner un client")}),Array.isArray(l)&&l.map(e=>(0,r.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"progress",className:"block text-slate-300 text-sm mb-2 font-medium",children:[c("progress","Progression")," (%)"]}),(0,r.jsx)("input",{id:"progress",type:"number",value:f,onChange:e=>b(e.target.value),min:"0",max:"100",className:"form-input"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-slate-300 text-sm mb-2 font-medium",children:c("color","Couleur")}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:ew.map(e=>(0,r.jsx)(i.E.button,{type:"button",onClick:()=>C(e.value),className:"w-8 h-8 rounded-full border-2 ".concat(y===e.value?"border-white shadow-lg":"border-transparent"," ").concat(e.class),whileHover:{scale:1.1},whileTap:{scale:.9}},e.value))})]}),(0,r.jsx)(i.E.button,{type:"submit",whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full pulse-button bg-gradient-to-r from-pink-500 to-violet-500 text-white font-bold py-3 rounded-lg text-lg main-action-button",children:t.id?c("save_changes","Sauvegarder les changements"):c("add_task","Ajouter la t\xe2che")})]})]})},eb=e=>{let{projectId:t,onSave:s,onClose:n,t:o}=e,[l,c]=(0,a.useState)("");return(0,r.jsxs)(er,{onClose:n,size:"max-w-sm",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-white mb-6 text-center flex items-center justify-center gap-2",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M12 2L2 22h20z"}),(0,r.jsx)("path",{d:"M12 2L1 22h22L12 2z"})]}),o("add_google_drive_link_title","Ajouter un lien Google Drive")]}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),l.trim()&&(s(t,l.trim()),n())},className:"space-y-4",children:[(0,r.jsx)("input",{type:"url",value:l,onChange:e=>c(e.target.value),placeholder:o("google_drive_url_placeholder","URL du dossier Google Drive..."),className:"form-input",required:!0}),(0,r.jsx)(i.E.button,{type:"submit",whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full pulse-button bg-gradient-to-r from-green-500 to-blue-500 text-white font-bold py-3 rounded-lg text-lg main-action-button",children:o("save_link","Sauvegarder le lien")})]})]})},ey=e=>{let{onSave:t,onClose:s,t:n}=e,[o,l]=(0,a.useState)(""),[c,d]=(0,a.useState)((0,S.Z)(new Date,"yyyy-MM-dd")),[u,h]=(0,a.useState)(""),[m,x]=(0,a.useState)("");return(0,r.jsxs)(er,{onClose:s,size:"max-w-md",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-white mb-6 text-center flex items-center justify-center gap-2",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),(0,r.jsx)("line",{x1:"16",x2:"16",y1:"2",y2:"6"}),(0,r.jsx)("line",{x1:"8",x2:"8",y1:"2",y2:"6"}),(0,r.jsx)("line",{x1:"3",x2:"21",y1:"10",y2:"10"})]}),n("add_deadline_title","Ajouter une nouvelle \xe9ch\xe9ance")]}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),o.trim()&&c.trim()&&(t({title:o.trim(),date:c,description:u.trim(),client:m.trim()}),s())},className:"space-y-4",children:[(0,r.jsx)("input",{type:"text",value:o,onChange:e=>l(e.target.value),placeholder:n("deadline_title_placeholder","Titre de l'\xe9ch\xe9ance..."),className:"form-input",required:!0}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"deadlineDate",className:"block text-slate-300 text-sm mb-2 font-medium",children:n("date","Date")}),(0,r.jsx)("input",{id:"deadlineDate",type:"date",value:c,onChange:e=>d(e.target.value),className:"form-input",required:!0})]}),(0,r.jsx)("input",{type:"text",value:m,onChange:e=>x(e.target.value),placeholder:n("client_related","Client / Projet li\xe9 (optionnel)..."),className:"form-input"}),(0,r.jsx)("textarea",{value:u,onChange:e=>h(e.target.value),placeholder:n("description_placeholder","Description (optionnel)..."),className:"form-input min-h-[80px]"}),(0,r.jsx)(i.E.button,{type:"submit",whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full pulse-button bg-gradient-to-r from-pink-500 to-red-500 text-white font-bold py-3 rounded-lg text-lg main-action-button",children:n("add_deadline","Ajouter l'\xe9ch\xe9ance")})]})]})},ek=e=>{let{onSave:t,onClose:s,t:n}=e,[o,l]=(0,a.useState)(""),[c,d]=(0,a.useState)((0,S.Z)(new Date,"yyyy-MM-dd")),[u,h]=(0,a.useState)((0,S.Z)(new Date,"HH:mm")),[m,x]=(0,a.useState)(""),[p,g]=(0,a.useState)(!1),[v,j]=(0,a.useState)(""),[w,f]=(0,a.useState)("");return(0,r.jsxs)(er,{onClose:s,size:"max-w-md",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-white mb-6 text-center flex items-center justify-center gap-2",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"m22 8-6 4 6 4V8Z"}),(0,r.jsx)("path",{d:"M14 12H2V4h12v8Z"})]}),n("add_meeting_title","Ajouter une nouvelle r\xe9union")]}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),o.trim()&&c.trim()&&u.trim()&&(t({title:o.trim(),dateTime:"".concat(c,"T").concat(u,":00"),attendees:m.split(",").map(e=>e.trim()).filter(e=>e),sendEmail:p,timezone:v.trim(),googleMeetLink:w.trim()||"https://meet.google.com/new"}),s())},className:"space-y-4",children:[(0,r.jsx)("input",{type:"text",value:o,onChange:e=>l(e.target.value),placeholder:n("meeting_title_placeholder","Titre de la r\xe9union..."),className:"form-input",required:!0}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"meetingDate",className:"block text-slate-300 text-sm mb-2 font-medium",children:n("date","Date")}),(0,r.jsx)("input",{id:"meetingDate",type:"date",value:c,onChange:e=>d(e.target.value),className:"form-input",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"meetingTime",className:"block text-slate-300 text-sm mb-2 font-medium",children:n("time","Heure")}),(0,r.jsx)("input",{id:"meetingTime",type:"time",value:u,onChange:e=>h(e.target.value),className:"form-input",required:!0})]})]}),(0,r.jsx)("input",{type:"text",value:m,onChange:e=>x(e.target.value),placeholder:n("attendees_placeholder","Participants (emails s\xe9par\xe9s par des virgules)..."),className:"form-input"}),(0,r.jsx)("input",{type:"text",value:v,onChange:e=>j(e.target.value),placeholder:n("timezone_placeholder","Fuseau horaire (ex: Europe/Paris)..."),className:"form-input"}),(0,r.jsx)("input",{type:"url",value:w,onChange:e=>f(e.target.value),placeholder:n("google_meet_link_placeholder","Lien Google Meet (optionnel)..."),className:"form-input"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"sendEmail",checked:p,onChange:e=>g(e.target.checked),className:"form-checkbox"}),(0,r.jsx)("label",{htmlFor:"sendEmail",className:"text-slate-300 text-sm",children:n("send_email_invitation","Envoyer une invitation par email")})]}),(0,r.jsx)(i.E.button,{type:"submit",whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full pulse-button bg-gradient-to-r from-violet-500 to-indigo-500 text-white font-bold py-3 rounded-lg text-lg main-action-button",children:n("schedule_meeting","Planifier la r\xe9union")})]})]})};let eC=["\uD83D\uDC4B","\uD83D\uDE00","\uD83D\uDD25","\uD83D\uDE80","\uD83D\uDCA1","✅","✨","\uD83D\uDC4D","\uD83C\uDF89","\uD83C\uDF1F","\uD83D\uDCAB","\uD83D\uDCA5","\uD83D\uDE80","\uD83C\uDF08","☀️","\uD83C\uDF3B","\uD83C\uDF3A","\uD83C\uDF32","\uD83C\uDF33","\uD83C\uDF42","\uD83C\uDF41","\uD83C\uDF53","\uD83C\uDF4B","\uD83C\uDF4E","\uD83C\uDF54","\uD83C\uDF55","\uD83C\uDF2E","\uD83C\uDF69","\uD83C\uDF66","☕","\uD83C\uDF75","\uD83E\uDD42","\uD83C\uDF7E","\uD83C\uDF89","\uD83C\uDF81","\uD83C\uDF88","\uD83C\uDF82","\uD83E\uDD73","\uD83C\uDFE0","\uD83C\uDFE2","\uD83D\uDCA1","⏰","\uD83D\uDCC6","\uD83D\uDCC8","\uD83D\uDCCA","\uD83D\uDD17","\uD83D\uDD12","\uD83D\uDD11","\uD83D\uDCDD","\uD83D\uDCCC","\uD83D\uDCCE","\uD83D\uDCC1","\uD83D\uDCC4","\uD83D\uDCCA","\uD83D\uDCC8","\uD83D\uDCC9","\uD83D\uDCB0","\uD83D\uDCB3","\uD83D\uDCB5","\uD83D\uDCB8","\uD83D\uDCE7","\uD83D\uDCDE","\uD83D\uDCAC","\uD83D\uDD14","\uD83D\uDCE3","\uD83D\uDCA1","⚙️","\uD83D\uDD28","\uD83D\uDEE0️","\uD83D\uDCBB","\uD83D\uDDA5️","\uD83D\uDCF1","⌨️","\uD83D\uDDB1️","\uD83D\uDDA8️","\uD83D\uDCBE","\uD83D\uDCBF","\uD83D\uDCC0","\uD83D\uDCDA","\uD83D\uDCD6","\uD83D\uDD8A️","\uD83D\uDD8C️","✏️","\uD83D\uDD8D️","\uD83D\uDCCF","\uD83D\uDCD0","✂️","\uD83D\uDDD1️","\uD83D\uDD12","\uD83D\uDD11","\uD83D\uDEE1️","⚙️","\uD83D\uDD17","\uD83D\uDCCE","\uD83D\uDCCC","\uD83D\uDCCD","\uD83D\uDCC1","\uD83D\uDCC2","\uD83D\uDDC2️","\uD83D\uDDD3️","\uD83D\uDCC5","\uD83D\uDCC6","⏰","⏱️","⌛","⏳"],eN=(0,a.forwardRef)((e,t)=>{let{onLoginClick:s,onRegisterClick:n,onOpenAddTaskFromChat:o,availableTeamMembers:i}=e,{currentUser:m}=(0,c.aC)(),{isDarkMode:x}=(0,d.Fg)(),{t:p,i18n:v}=(0,g.$G)("common"),j=!m||"guest_noca_flow"===m.uid,w=(null==m?void 0:m.uid)||(j?"guest_noca_flow":null),f=(null==m?void 0:m.displayName)||(j?p("guest_user_default","Visiteur Curieux"):"Moi"),[b,y]=(0,a.useState)(null),[k,C]=(0,a.useState)(null),[N,D]=(0,a.useState)(!1),[_,L]=(0,a.useState)([]),[A,E]=(0,a.useState)(""),[F,B]=(0,a.useState)([]),[Z,W]=(0,a.useState)([]),[P,H]=(0,a.useState)([]),[V,U]=(0,a.useState)(""),[z,R]=(0,a.useState)(!1),[q,I]=(0,a.useState)(!1),[O,J]=(0,a.useState)(null),[X,er]=(0,a.useState)([]),[ea,en]=(0,a.useState)(""),[eo,ei]=(0,a.useState)(!1),el=(0,a.useRef)(null),ec=(0,a.useRef)(null),ed=(0,a.useRef)(null),eu=(0,a.useRef)(null),[eh,em]=(0,a.useState)(!1);(0,a.useImperativeHandle)(t,()=>({toggleFullScreen:()=>{eu.current&&(document.fullscreenElement?document.exitFullscreen():eu.current.requestFullscreen().catch(e=>{console.error("Error attempting to enable full-screen mode: ".concat(e.message," (").concat(e.name,")"))}))}})),(0,a.useEffect)(()=>{let e=()=>{em(!!document.fullscreenElement),!document.fullscreenElement&&window.innerWidth<768&&ei(!1)};return document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("MSFullscreenChange",e),()=>{document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),document.removeEventListener("MSFullscreenChange",e)}},[]);let ex=(0,a.useCallback)(()=>{alert(p("access_restricted","Acc\xe8s Restreint. Veuillez vous connecter pour acc\xe9der \xe0 la messagerie en temps r\xe9el.")),s&&s()},[p,s]),ep=(0,a.useCallback)(e=>{if(!e)return"";let t=e.toDate?e.toDate():new Date(e);return(0,M.Z)(t)?(0,S.Z)(t,"HH:mm"):(0,Q.Z)(t)?p("yesterday","Hier")+(0,S.Z)(t," HH:mm"):(0,K.Z)(t,new Date)?(0,S.Z)(t,"EEEE HH:mm",{locale:T.Z}):(0,G.Z)(t,new Date)?(0,S.Z)(t,"dd MMMM",{locale:T.Z}):(0,S.Z)(t,"dd/MM/yyyy")},[p]),eg=(0,a.useCallback)(async(e,t)=>{if(!w||!e||0===t.length)return;let s=(0,h.qs)(u.db);t.forEach(t=>{let r=(0,h.JU)(u.db,"conversations",e,"messages",t);s.update(r,{readBy:(0,h.vr)(w)})});try{await s.commit()}catch(e){console.error("Error marking messages as read:",e)}},[w,u.db]);(0,a.useEffect)(()=>{if(!w){B([]);return}let e=(0,h.IO)((0,h.hJ)(u.db,"conversations"),(0,h.Xo)("lastMessageTime","desc")),t=(0,h.cf)(e,async e=>{B((await Promise.all(e.docs.map(async e=>{let t=e.data(),s=t.name||p("new_conversation_default","Nouvelle Conversation"),r="",a=!1;if(t.participants&&t.participants.length>0){if(t.participants.length>2||2===t.participants.length&&!t.participants.includes(w)){if(a=!0,!t.name){let e=t.participants.filter(e=>e!==w),r=(await Promise.all(e.map(e=>(0,h.PL)((0,h.IO)((0,h.hJ)(u.db,"users"),(0,h.ar)("uid","==",e)))))).map(e=>{var t,s;return(null===(s=e.docs[0])||void 0===s?void 0:null===(t=s.data())||void 0===t?void 0:t.displayName)||p("unknown_user","Utilisateur")}).filter(e=>e);s=t.name||p("group_with","Groupe avec")+" ".concat(r.join(", "))}}else if(2===t.participants.length&&t.participants.includes(w)){let e=t.participants.find(e=>e!==w);if(e){var n,o,i,l;let t=await (0,h.PL)((0,h.IO)((0,h.hJ)(u.db,"users"),(0,h.ar)("uid","==",e)));s=(null===(o=t.docs[0])||void 0===o?void 0:null===(n=o.data())||void 0===n?void 0:n.displayName)||p("unknown_user","Utilisateur"),r=(null===(l=t.docs[0])||void 0===l?void 0:null===(i=l.data())||void 0===i?void 0:i.photoURL)||"/images/default-avatar.png"}}else 1===t.participants.length&&t.participants.includes(w)&&(s=p("guest_you","TOI"),r=(null==m?void 0:m.photoURL)||"/images/default-avatar.png")}let c=(t.lastMessageReadBy||[]).includes(w)?0:1;return{id:e.id,...t,name:s,photoURL:r,isGroup:a,unread:c,initials:s.charAt(0).toUpperCase()}}))).sort((e,t)=>{var s,r;return((null===(s=t.lastMessageTime)||void 0===s?void 0:s.toMillis())||0)-((null===(r=e.lastMessageTime)||void 0===r?void 0:r.toMillis())||0)}))});return()=>t()},[w,m,p,u.db]),(0,a.useEffect)(()=>{if(!b){W([]);return}let e=(0,h.hJ)(u.db,"conversations",b,"messages"),t=(0,h.IO)(e,(0,h.Xo)("timestamp")),s=(0,h.cf)(t,e=>{W(e.docs.map(e=>{var t;let s=e.data();return{id:e.id,...s,displayTime:ep(s.timestamp),status:(s.readBy||[]).includes(w)?"read":"sent",from:s.senderUid===w?f:(null===(t=i.find(e=>e.firebaseUid===s.senderUid))||void 0===t?void 0:t.name)||p("unknown_user","Utilisateur")}}));let t=e.docs.filter(e=>!(e.data().readBy||[]).includes(w)).map(e=>e.id);t.length>0&&eg(b,t)});return()=>s()},[b,w,i,f,ep,eg,p,u.db]),(0,a.useEffect)(()=>{el.current&&(el.current.scrollTop=el.current.scrollHeight)},[Z]),(0,a.useEffect)(()=>{H(Z.filter(e=>e.content.toLowerCase().includes(ea.toLowerCase())))},[ea,Z]);let ev=(0,a.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!m){ex();return}if(""===V.trim()||!b||!w){b||alert(p("select_or_create_conversation","Veuillez s\xe9lectionner une conversation ou en cr\xe9er une nouvelle."));return}let t={content:V.trim(),senderUid:w,timestamp:(0,h.Bt)(),type:"text",isEphemeral:e,duration:e?3e5:null,readBy:[w]};try{let e=(0,h.hJ)(u.db,"conversations",b,"messages");await addDoc(e,t);let s=(0,h.JU)(u.db,"conversations",b);await (0,h.r7)(s,{lastMessage:V.trim(),lastMessageTime:(0,h.Bt)()}),U("")}catch(e){console.error("Erreur lors de l'envoi du message : ",e),alert(p("send_message_failed","\xc9chec de l'envoi du message. V\xe9rifiez la console pour plus de d\xe9tails."))}},[V,b,w,p,m,ex,u.db]),ej=(0,a.useCallback)(async function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!m){ex();return}if(!b||!w){alert(p("select_conv_and_login","Veuillez s\xe9lectionner une conversation et \xeatre connect\xe9."));return}let r=e.target.files[0];if(r){if(!r.type.startsWith("image/")&&!r.type.startsWith("application/pdf")){alert(p("unsupported_file_type","Seules les images (PNG, JPEG, GIF) et les PDF sont autoris\xe9s pour le moment.")),e.target.value=null;return}U(p("uploading_file","T\xe9l\xe9chargement du fichier..."));try{let a=t(u.tO,"chat_files/".concat(b,"/").concat(w,"/").concat(r.name,"_").concat(Date.now())),n=await (0,Y.KV)(a,r),o=await (0,Y.Jt)(n.ref),i={content:r.name,senderUid:w,timestamp:(0,h.Bt)(),type:r.type.startsWith("image/")?"image":"file",fileURL:o,isEphemeral:s,duration:s?3e5:null,readBy:[w]},l=(0,h.hJ)(u.db,"conversations",b,"messages");await addDoc(l,i);let c=(0,h.JU)(u.db,"conversations",b);await (0,h.r7)(c,{lastMessage:"Fichier: ".concat(r.name),lastMessageTime:(0,h.Bt)()}),U(""),e.target.value=null}catch(t){console.error("Erreur lors du t\xe9l\xe9chargement du fichier : ",t),alert(p("upload_file_failed","\xc9chec du t\xe9l\xe9chargement du fichier. V\xe9rifiez la console.")),U(""),e.target.value=null}}},[b,w,p,m,ex,u.db,u.tO]),ew=(0,a.useCallback)(e=>{U(t=>t+e)},[]),ef=(0,a.useCallback)(()=>{ev(!1)},[ev]);(0,a.useCallback)(()=>{ev(!0)},[ev]);let eb=(0,a.useCallback)(()=>{if(!m){ex();return}ec.current&&(ec.current.onchange=e=>ej(e,!1),ec.current.click())},[ec,ej,ex,m]);(0,a.useCallback)(()=>{if(!m){ex();return}ec.current&&(ec.current.onchange=e=>ej(e,!0),ec.current.click())},[ec,ej,ex,m]);let ey=(0,a.useCallback)(async(e,t)=>{J({url:e,messageId:t})},[J]),ek=(0,a.useCallback)(()=>{J(null)},[]),eN=(0,a.useCallback)(async e=>{let{name:t,email:s,selectedUids:r,showNewContact:a}=e;if(!m){alert(p("login_to_create_discussion","Veuillez vous connecter pour cr\xe9er une discussion."));return}let n=new Set([w]);if(a){if(!t||!s){alert(p("enter_contact_details","Veuillez entrer le nom et l'email du nouveau contact."));return}console.log("Simulating invitation to new contact: ".concat(t," (").concat(s,")"));let e="simulated-uid-".concat(Date.now());n.add(e),er(r=>[...r,{firebaseUid:e,name:t,email:s,initials:t.charAt(0).toUpperCase(),color:"bg-"+["yellow","green","blue","red","purple"][Math.floor(5*Math.random())]+"-500"}])}else{if(0===r.length){alert(p("select_members_or_add_contact","Veuillez s\xe9lectionner au moins un membre de l'\xe9quipe ou ajouter un nouveau contact."));return}r.forEach(e=>n.add(e))}let o=Array.from(n).sort(),i=t.trim(),l=(0,h.IO)((0,h.hJ)(u.db,"conversations"),(0,h.ar)("participants","==",o)),c=await (0,h.PL)(l);if(!c.empty){let e=c.docs[0];y(e.id),E(e.data().name||p("existing_conversation","Conversation Existante")),D(e.data().participants.length>2),L(e.data().participants),C(e.data().participants.find(e=>e!==w)||null),I(!1),console.log("Existing conversation found:",e.id);return}if(!i&&n.size<=2){let e=Array.from(n).filter(e=>e!==w);if(e.length>0){var d,x;i=(null===(x=(await (0,h.PL)((0,h.IO)((0,h.hJ)(u.db,"users"),(0,h.ar)("uid","==",e[0])))).docs[0])||void 0===x?void 0:null===(d=x.data())||void 0===d?void 0:d.displayName)||p("new_conversation_default","Nouvelle Conversation")}else i=p("new_conversation_default","Nouvelle Conversation")}else!i&&n.size>2&&(i=p("new_group","Nouveau Groupe"));try{let e=await addDoc((0,h.hJ)(u.db,"conversations"),{participants:o,createdAt:(0,h.Bt)(),lastMessage:p("conversation_start_message","D\xe9but de la conversation"),lastMessageTime:(0,h.Bt)(),name:i,isGroup:n.size>2,lastMessageReadBy:[w]});y(e.id),E(i),D(n.size>2),L(o),C(o.find(e=>e!==w)||null),I(!1),console.log("New conversation created:",e.id)}catch(e){console.error("Error creating new discussion:",e),alert(p("create_discussion_failed","\xc9chec de la cr\xe9ation de la discussion. V\xe9rifiez les r\xe8gles de s\xe9curit\xe9 Firestore et la console."))}},[w,m,p,u.db]);return(0,r.jsxs)("div",{ref:eu,className:"flex h-full rounded-lg overflow-hidden ".concat(eh?"fixed inset-0 z-50 bg-color-bg-primary":""),children:[j&&(0,r.jsx)("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center z-40 text-white text-center p-4",children:(0,r.jsxs)("p",{className:"text-xl font-semibold",children:[p("access_restricted","Acc\xe8s Restreint.")," ",p("login_to_access_messages","Veuillez vous connecter pour acc\xe9der \xe0 la messagerie en temps r\xe9el.")]})}),(0,r.jsx)($,{conversations:F,searchTerm:ea,setSearchTerm:en,activeConversationId:b,handleSelectUserOnMobile:e=>{y(e.id),C(e.participants.find(e=>e!==w)),D(e.isGroup),L(e.participants),E(e.name),ei(!1)},setShowNewDiscussionModal:I,currentUserName:f,showMobileSidebar:eo,setShowMobileSidebar:ei,isFullScreen:eh,t:p,isDarkMode:x}),(0,r.jsxs)("div",{className:"flex flex-col flex-1 ".concat(eo?"hidden md:flex":"flex"),children:[b?(0,r.jsxs)("div",{className:"px-4 py-3 border-b border-color-border-primary flex-shrink-0 flex items-center justify-between ".concat(x?"bg-gray-800":"bg-color-bg-tertiary"),children:[window.innerWidth<768&&(0,r.jsx)("button",{className:"p-2 rounded-full mr-2 ".concat(x?"text-slate-400 hover:text-white":"text-color-text-secondary hover:text-color-text-primary hover:bg-color-bg-hover"),onClick:()=>ei(!0),"aria-label":p("back_to_conversations","Retour aux conversations"),children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"m15 18-6-6 6-6"})})}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-color-text-primary mr-2",children:A||(N?p("group_chat_default","Discussion de groupe"):(null==k?void 0:k.name)||p("new_conversation_default","Nouvelle Conversation"))}),N&&(0,r.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full ".concat(x?"bg-green-500/20 text-green-400":"bg-green-100 text-green-700"),children:p("group","Groupe")})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{className:"p-2 rounded-full transition-colors ".concat(x?"hover:bg-slate-700 text-slate-400 hover:text-white":"hover:bg-color-bg-hover text-color-text-secondary hover:text-color-text-primary"),title:p("meeting","Meeting"),children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"}),(0,r.jsx)("path",{d:"M2 12h20"})]})}),(0,r.jsx)("button",{className:"p-2 rounded-full transition-colors ".concat(x?"hover:bg-slate-700 text-slate-400 hover:text-white":"hover:bg-color-bg-hover text-color-text-secondary hover:text-color-text-primary"),title:p("task","T\xe2che"),onClick:()=>o({member:k,conversationParticipants,currentFirebaseUid:w,currentUserName:f,isFromChat:!0}),children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M12 20V10"}),(0,r.jsx)("path",{d:"M18 20V4"}),(0,r.jsx)("path",{d:"M6 20v-4"})]})}),(0,r.jsx)("button",{className:"p-2 rounded-full transition-colors ".concat(x?"hover:bg-slate-700 text-slate-400 hover:text-white":"hover:bg-color-bg-hover text-color-text-secondary hover:text-color-text-primary"),title:p("rename_contact","Renommer le contact"),children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M12 20V10"}),(0,r.jsx)("path",{d:"M18 20V4"}),(0,r.jsx)("path",{d:"M6 20v-4"})]})}),(0,r.jsx)("button",{className:"p-2 rounded-full transition-colors ".concat(x?"hover:bg-slate-700 text-red-400 hover:text-white":"hover:bg-red-100 text-red-500 hover:text-red-600"),title:p("block_contact","Bloquer le contact"),children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.jsx)("path",{d:"m4.9 4.9 14.2 14.2"})]})})]})]}):(0,r.jsx)("div",{className:"px-4 py-3 border-b border-color-border-primary flex-shrink-0 flex items-center justify-center text-center ".concat(x?"bg-gray-800":"bg-color-bg-tertiary text-color-text-secondary"),children:(0,r.jsx)("h3",{className:"text-lg font-semibold",children:p("select_conversation","S\xe9lectionnez une conversation pour commencer.")})}),(0,r.jsx)(ee,{messages:Z,chatPanelRef:el,currentFirebaseUid:w,activeConversationId:b,activeConversationIsGroup:N,openEphemeralImagePreview:ey,t:p,isDarkMode:x}),(0,r.jsx)(et,{newMessage:V,setNewMessage:U,handleSendNormalMessage:ef,handleAttachNormalFile:eb,handleEmoticonClick:ew,emojis:eC,showEmojiPicker:z,setShowEmojiPicker:R,emojiButtonRef:ed,fileInputRef:ec,isDarkMode:x,t:p})]}),(0,r.jsx)(l.M,{children:q&&(0,r.jsx)(es,{showModal:q,onClose:()=>I(!1),onCreate:eN,internalAvailableTeamMembers:X,currentFirebaseUid:w,currentUserName:f,t:p})}),(0,r.jsx)(l.M,{children:O&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md flex items-center justify-center z-[101]",onClick:ek,children:(0,r.jsxs)("div",{className:"relative p-4 rounded-lg shadow-xl",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("img",{src:O.url,alt:p("ephemeral_image_warning","Cette image est \xe9ph\xe9m\xe8re et ne peut pas \xeatre sauvegard\xe9e."),className:"max-w-full max-h-[80vh] object-contain"}),(0,r.jsx)("button",{onClick:ek,className:"absolute top-2 right-2 text-white bg-black/50 rounded-full p-2 hover:bg-black/70 transition-colors",title:p("close_ephemeral_image","Fermer l'image \xe9ph\xe9m\xe8re"),children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M18 6 6 18"}),(0,r.jsx)("path",{d:"m6 6 12 12"})]})}),(0,r.jsx)("p",{className:"text-white text-center text-sm mt-2",children:p("ephemeral_image_warning","Cette image est \xe9ph\xe9m\xe8re et ne peut pas \xeatre sauvegard\xe9e.")})]})})})]})});eN.displayName="FlowLiveMessages";let eD=e=>{let{member:t,onEditMember:s,onDeleteMember:a,onQuickChat:n,onAssign:o,t:l}=e,{isDarkMode:c}=(0,d.Fg)();return(0,r.jsxs)("div",{className:"p-3 flex items-center justify-between gap-3 group ".concat(c?"bg-slate-700":"bg-color-bg-tertiary border border-color-border-primary"," rounded-lg shadow-sm"),children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(j(),{src:t.avatar||"/images/default-avatar.png",alt:t.name,width:40,height:40,className:"rounded-full object-cover flex-shrink-0 border ".concat(c?"border-slate-600":"border-color-border-primary")}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-bold text-color-text-primary",children:t.name}),(0,r.jsx)("p",{className:"text-xs text-color-text-secondary",children:t.role})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,r.jsx)(i.E.button,{onClick:()=>n(t),className:"p-2 rounded-full transition-colors ".concat(c?"hover:bg-violet-600 text-white":"hover:bg-violet-200 text-violet-600"),whileHover:{scale:1.1},whileTap:{scale:.9},title:l("quick_chat_tooltip","Chat rapide"),children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"M7.9 20A9.3 9.3 0 0 1 4 16.1V15a9 9 0 0 1 12 0v1.1c0 2.2 2.7 3.9 4 5.9a2 2 0 0 0 2-2v-4.6c0-4.6-3.7-8.3-8.3-8.3S3 7.5 3 12c0 2.2 1.1 4.2 2.7 5.7L3.6 20.3c-.4.5-.1 1.3.5 1.5H19c.6-.2.9-.9.5-1.5l-1.9-2.6Z"})})}),(0,r.jsx)(i.E.button,{onClick:()=>o(t),className:"p-2 rounded-full transition-colors ".concat(c?"hover:bg-pink-600 text-white":"hover:bg-pink-200 text-pink-600"),whileHover:{scale:1.1},whileTap:{scale:.9},title:l("assign_task_tooltip","Assigner t\xe2che/projet"),children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2"}),(0,r.jsx)("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]})}),(0,r.jsx)(i.E.button,{onClick:()=>s(t),className:"p-2 rounded-full transition-colors ".concat(c?"hover:bg-slate-700 text-slate-400 hover:text-white":"hover:bg-color-bg-hover text-color-text-secondary hover:text-color-text-primary"),whileHover:{scale:1.1},whileTap:{scale:.9},title:l("edit","Modifier"),children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M17 3a2.85 2.85 0 0 1 2.92 2.92L10 16.5l-4 1.5 1.5-4L17 3Z"}),(0,r.jsx)("path",{d:"M7.5 7.5 10 10"})]})}),(0,r.jsx)(i.E.button,{onClick:()=>a(t.id),className:"p-2 rounded-full transition-colors ".concat(c?"hover:bg-red-600 text-red-400 hover:text-white":"hover:bg-red-100 text-red-500 hover:text-red-600"),whileHover:{scale:1.1},whileTap:{scale:.9},title:l("delete","Supprimer"),children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M3 6h18"}),(0,r.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),(0,r.jsx)("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})]})};var e_=e=>{let{onAddMember:t,onEditMember:s,onDeleteMember:n,onQuickChat:o,onAssign:l,t:c}=e,[d,u]=(0,a.useState)([]);return(0,a.useEffect)(()=>{u(p.staffMembers)},[]),(0,r.jsx)(N,{icon:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),(0,r.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,r.jsx)("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),(0,r.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),title:c("my_team","Mon \xc9quipe"),className:"h-full",children:(0,r.jsxs)("div",{className:"flex flex-col h-full justify-between",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-color-text-primary",children:c("total_members","Membres Totaux")}),(0,r.jsx)("span",{className:"text-pink-400 text-3xl font-extrabold",children:(d||[]).length})]}),(0,r.jsx)("div",{className:"space-y-3 flex-grow overflow-y-auto custom-scrollbar pr-2",children:(d||[]).length>0?(d||[]).map(e=>(0,r.jsx)(eD,{member:e,onEditMember:s,onDeleteMember:n,onQuickChat:o,onAssign:l,t:c},e.id)):(0,r.jsx)("p",{className:"text-center p-8 text-sm text-color-text-secondary",children:c("no_team_members","Aucun membre d'\xe9quipe \xe0 afficher. Ajoutez-en un !")})}),(0,r.jsx)("div",{className:"mt-4 flex-shrink-0",children:(0,r.jsxs)(i.E.button,{onClick:()=>t(),whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-purple-500 to-indigo-600 shadow-lg main-action-button",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.jsx)("path",{d:"M12 8v8"}),(0,r.jsx)("path",{d:"M8 12h8"})]}),c("add_member","Ajouter un membre")]})})]})})};let eL=e=>{let{client:t,onEditClient:s,onDeleteClient:a,onInvoiceForm:n,onClientInvoices:o,t:l}=e,{isDarkMode:c}=(0,d.Fg)();return(0,r.jsxs)("div",{className:"p-3 flex items-center justify-between gap-3 group ".concat(c?"bg-slate-700":"bg-color-bg-tertiary border border-color-border-primary"," rounded-lg shadow-sm"),children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg flex-shrink-0 ".concat(c?"bg-slate-700 text-color-text-primary":"bg-color-bg-tertiary text-color-text-primary"),children:t.name.charAt(0).toUpperCase()}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-bold text-color-text-primary",children:t.name}),(0,r.jsx)("p",{className:"text-xs text-color-text-secondary",children:t.contactEmail})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,r.jsx)(i.E.button,{onClick:()=>alert(l("link_project_alert",'Fonctionnalit\xe9 "Lier un projet" \xe0 ')+"".concat(t.name)+l("not_implemented"," non impl\xe9ment\xe9e.")),className:"p-2 rounded-full transition-colors ".concat(c?"hover:bg-sky-600 text-white":"hover:bg-sky-200 text-sky-600"),whileHover:{scale:1.1},whileTap:{scale:.9},title:l("link_project_tooltip","Lier un projet"),children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07L9.54 5.46a5 5 0 0 0 .54 7.54Z"}),(0,r.jsx)("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07L14.46 18.54a5 5 0 0 0-.54-7.54Z"})]})}),(0,r.jsx)(i.E.button,{onClick:()=>o(t),className:"p-2 rounded-full transition-colors ".concat(c?"hover:bg-emerald-600 text-white":"hover:bg-emerald-200 text-emerald-600"),whileHover:{scale:1.1},whileTap:{scale:.9},title:l("view_invoices_tooltip","Voir les factures"),children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}),(0,r.jsx)("path",{d:"M14 2v4a2 2 0 0 0 2 2h4"})]})}),(0,r.jsx)(i.E.button,{onClick:()=>n(t),className:"p-2 rounded-full transition-colors ".concat(c?"hover:bg-yellow-600 text-white":"hover:bg-yellow-200 text-yellow-600"),whileHover:{scale:1.1},whileTap:{scale:.9},title:l("new_invoice_tooltip","Nouvelle facture"),children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("line",{x1:"12",x2:"12",y1:"2",y2:"22"}),(0,r.jsx)("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]})}),(0,r.jsx)(i.E.button,{onClick:()=>s(t),className:"p-2 rounded-full transition-colors ".concat(c?"hover:bg-slate-700 text-slate-400 hover:text-white":"hover:bg-color-bg-hover text-color-text-secondary hover:text-color-text-primary"),whileHover:{scale:1.1},whileTap:{scale:.9},title:l("edit","Modifier"),children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M17 3a2.85 2.85 0 0 1 2.92 2.92L10 16.5l-4 1.5 1.5-4L17 3Z"}),(0,r.jsx)("path",{d:"M7.5 7.5 10 10"})]})}),(0,r.jsx)(i.E.button,{onClick:()=>a(t.id),className:"p-2 rounded-full transition-colors ".concat(c?"hover:bg-red-600 text-red-400 hover:text-white":"hover:bg-red-100 text-red-500 hover:text-red-600"),whileHover:{scale:1.1},whileTap:{scale:.9},title:l("delete","Supprimer"),children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M3 6h18"}),(0,r.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),(0,r.jsx)("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})]})};var eM=e=>{let{onAddClient:t,onEditClient:s,onDeleteClient:n,onInvoiceForm:o,onClientInvoices:l,t:c}=e,[d,u]=(0,a.useState)([]);return(0,a.useEffect)(()=>{u(p.clients)},[]),(0,r.jsx)(N,{icon:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),(0,r.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,r.jsx)("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),(0,r.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),title:c("my_clients","Mes Clients"),className:"h-full",children:(0,r.jsxs)("div",{className:"flex flex-col h-full justify-between",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-color-text-primary",children:c("total_clients","Clients Totaux")}),(0,r.jsx)("span",{className:"text-pink-400 text-3xl font-extrabold",children:(d||[]).length})]}),(0,r.jsx)("div",{className:"space-y-3 flex-grow overflow-y-auto custom-scrollbar pr-2",children:d.length>0?d.map(e=>(0,r.jsx)(eL,{client:e,onEditClient:s,onDeleteClient:n,onInvoiceForm:o,onClientInvoices:l,t:c},e.id)):(0,r.jsx)("p",{className:"text-center p-8 text-sm text-color-text-secondary",children:c("no_clients","Aucun client \xe0 afficher. Ajoutez-en un !")})}),(0,r.jsx)("div",{className:"mt-4 flex-shrink-0",children:(0,r.jsxs)(i.E.button,{onClick:t,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-teal-500 to-cyan-600 shadow-lg main-action-button",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.jsx)("path",{d:"M12 8v8"}),(0,r.jsx)("path",{d:"M8 12h8"})]}),c("add_client","Ajouter un client")]})})]})})},eS=s(9936),eT=s(3332);let eA=e=>{let{task:t,totalDaysInPeriod:s,startDate:a,t:n,onEditTask:o,onValidateTask:l}=e,{isDarkMode:c}=(0,d.Fg)(),u=(0,k.Z)(t.startDate),h=(0,k.Z)(t.endDate);if(!(0,C.Z)(u)||!(0,C.Z)(h))return null;let m=(0,eS.Z)(u,a),x=(0,eS.Z)(h,u)+1,p=t.completed?"bg-green-500/80":"pink"===t.color?"bg-pink-500/80":"red"===t.color?"bg-red-500/80":"violet"===t.color?"bg-violet-500/80":"blue"===t.color?"bg-blue-500/80":"cyan"===t.color?"bg-cyan-500/80":"orange"===t.color?"bg-orange-500/80":"teal"===t.color?"bg-teal-500/80":"bg-gray-500/80";return(0,r.jsxs)(i.E.div,{className:"absolute h-8 rounded-md shadow-md ".concat(p," flex items-center justify-between px-2 overflow-hidden group"),style:{left:"".concat(m/s*100,"%"),width:"".concat(x/s*100,"%"),top:"50%",transform:"translateY(-50%)"},initial:{opacity:0,scaleX:0},animate:{opacity:1,scaleX:1},transition:{duration:.5,originX:0},children:[(0,r.jsx)("span",{className:"text-white text-xs font-semibold truncate mr-2",children:t.title}),(0,r.jsxs)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,r.jsx)(i.E.button,{onClick:e=>{e.stopPropagation(),o(t)},className:"p-1 rounded-full transition-colors\n                                ".concat(c?"hover:bg-slate-700 text-slate-200":"hover:bg-white/30 text-white"),whileHover:{scale:1.1},whileTap:{scale:.9},title:n("edit_task","Modifier la t\xe2che"),children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M17 3a2.85 2.85 0 0 1 2.92 2.92L10 16.5l-4 1.5 1.5-4L17 3Z"}),(0,r.jsx)("path",{d:"M7.5 7.5 10 10"})]})}),!t.completed&&(0,r.jsx)(i.E.button,{onClick:e=>{e.stopPropagation(),l(t.id)},className:"p-1 rounded-full transition-colors\n                                    ".concat(c?"hover:bg-green-700 text-green-300":"hover:bg-green-200/50 text-green-700"),whileHover:{scale:1.1},whileTap:{scale:.9},title:n("validate_task","Valider la t\xe2che"),children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),(0,r.jsx)("polyline",{points:"22 4 12 14.01 9 11.01"})]})})]})]})},eE=(0,a.forwardRef)((e,t)=>{let{t:s,onAddTask:n,className:o="",staffMembers:l,clients:c,onSave:u}=e,h=(0,a.useRef)(null),[m,x]=(0,a.useState)(!1),[p,g]=(0,a.useState)(new Date),{isDarkMode:v}=(0,d.Fg)();(0,a.useEffect)(()=>{let e=()=>{x(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("MSFullscreenChange",e),()=>{document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),document.removeEventListener("MSFullscreenChange",e)}},[]),(0,a.useImperativeHandle)(t,()=>({toggleFullScreen:()=>{let e=h.current;e&&(document.fullscreenElement?document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen())}}));let j=new Date(p.getFullYear(),p.getMonth(),1),w=(0,eT.Z)(j,29),f=(0,eS.Z)(w,j)+1,[b,y]=(0,a.useState)(e.initialTasks||[]);(0,a.useEffect)(()=>{y(e.initialTasks)},[e.initialTasks]);let D=(b||[]).reduce((e,t)=>{let s=(0,k.Z)(t.startDate),r=(0,k.Z)(t.endDate);return(0,C.Z)(s)&&(0,C.Z)(r)&&s<=w&&r>=j&&(e[t.person]||(e[t.person]=[]),e[t.person].push(t)),e},{}),_=Object.keys(D).sort(),L=Array.from({length:f},(e,t)=>{let s=(0,eT.Z)(j,t),r=(0,M.Z)(s);return{date:(0,S.Z)(s,"dd"),dayOfWeek:(0,S.Z)(s,"EE",{locale:T.Z}).charAt(0),isToday:r}}),A=(0,a.useCallback)(()=>{g((0,H.Z)(p,1))},[p]),E=(0,a.useCallback)(()=>{g((0,V.Z)(p,1))},[p]),F=(0,a.useCallback)(e=>{n(e)},[n]),B=(0,a.useCallback)(e=>{let t=b.find(t=>t.id===e);t&&u({...t,completed:!t.completed,progress:t.completed?0:100})},[b,u]);return(0,r.jsx)(N,{icon:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),(0,r.jsx)("path",{d:"M7 7h10"}),(0,r.jsx)("path",{d:"M7 11h10"}),(0,r.jsx)("path",{d:"M7 15h10"})]}),title:s("gantt_planning_title","Planning des T\xe2ches \xc9quipe"),className:"".concat(o," ").concat(m?"fixed inset-0 z-[1000] rounded-none":""),onFullscreenClick:()=>{let e=h.current;e&&(document.fullscreenElement?document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen())},children:(0,r.jsxs)("div",{ref:h,className:"h-full w-full flex flex-col ".concat(m?v?"bg-gray-900":"bg-color-bg-primary":""),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4 flex-shrink-0",children:[(0,r.jsx)("button",{onClick:A,className:"p-2 rounded-full transition-colors\n                                        ".concat(v?"text-slate-400 hover:bg-white/10 hover:text-white":"text-color-text-secondary hover:bg-color-bg-hover hover:text-color-text-primary"),children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"m15 18-6-6 6-6"})})}),(0,r.jsxs)("h3",{className:"text-lg font-bold text-center flex-grow ".concat(v?"text-white":"text-color-text-primary"),children:[(0,S.Z)(p,"MMMM",{locale:T.Z})," ",(0,S.Z)(p,"yyyy")]}),(0,r.jsx)("button",{onClick:E,className:"p-2 rounded-full transition-colors\n                                        ".concat(v?"text-slate-400 hover:bg-white/10 hover:text-white":"text-color-text-secondary hover:bg-color-bg-hover hover:text-color-text-primary"),children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"m9 18 6-6-6-6"})})})]}),(0,r.jsx)("div",{className:"overflow-x-auto custom-scrollbar pb-4 flex-grow",children:(0,r.jsxs)("div",{className:"inline-grid gap-1.5",style:{gridTemplateColumns:"minmax(150px, 1fr) repeat(".concat(f,", minmax(30px, 1fr))"),minHeight:"".concat(48*_.length+(_.length?40:0),"px")},children:[(0,r.jsx)("div",{className:"sticky left-0 z-20 p-2 font-bold text-sm border-r border-color-border-primary\n                                        ".concat(v?"bg-color-bg-secondary text-slate-400":"bg-color-bg-secondary text-color-text-secondary"),children:s("team_member","Membre \xc9quipe")}),L.map((e,t)=>(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center p-1 border-b border-color-border-primary text-xs font-semibold\n                                            ".concat(v?"bg-slate-800 text-slate-400":"bg-color-bg-tertiary text-color-text-secondary","\n                                            ").concat(e.isToday?v?"bg-blue-900/50":"bg-blue-100/50":""),children:[(0,r.jsx)("span",{className:v?"text-slate-400":"text-color-text-primary",children:e.dayOfWeek}),(0,r.jsx)("span",{className:v?"text-slate-400":"text-color-text-primary",children:e.date})]},t)),_.length>0?_.map(e=>(0,r.jsxs)(a.Fragment,{children:[(0,r.jsx)("div",{className:"sticky left-0 z-10 p-2 font-semibold text-sm border-r border-color-border-primary border-t\n                                                    ".concat(v?"bg-color-bg-secondary text-white border-slate-700/50":"bg-color-bg-secondary text-color-text-primary border-color-border-primary"," flex items-center"),children:e}),(0,r.jsx)("div",{className:"relative h-12 border-b border-color-border-primary\n                                                    ".concat(v?"bg-slate-800/20":"bg-color-bg-primary"," cursor-pointer"),style:{gridColumn:"span ".concat(f)},onClick:()=>n({date:j.toISOString(),person:e}),children:(D[e]||[]).map(e=>(0,r.jsx)(eA,{task:e,totalDaysInPeriod:f,startDate:j,t:s,onEditTask:F,onValidateTask:B},e.id))})]},e)):(0,r.jsx)("div",{className:"sticky left-0 z-10 p-4 text-sm text-center\n                                            ".concat(v?"bg-color-bg-secondary text-slate-400":"bg-color-bg-secondary text-color-text-secondary"),style:{gridColumn:"span ".concat(f+1)},children:s("no_gantt_tasks","Aucune t\xe2che dans le planning. Ajoutez-en une pour voir votre FLOW !")})]})}),(0,r.jsx)("div",{className:"mt-4 text-center flex-shrink-0",children:(0,r.jsxs)(i.E.button,{onClick:()=>n({date:j.toISOString()}),whileHover:{scale:1.02},whileTap:{scale:.98},className:"main-action-button bg-gradient-to-r from-pink-500 to-violet-500 shadow-lg",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.jsx)("path",{d:"M12 8v8"}),(0,r.jsx)("path",{d:"M8 12h8"})]}),s("add_gantt_task","Ajouter une t\xe2che au Planning")]})})]})})});function eF(e){let{lang:t,onOpenCalculator:s,onRegisterClick:n,onLoginClick:u}=e,{user:h,logout:x}=(0,c.aC)(),{isDarkMode:v,toggleTheme:j}=(0,d.Fg)(),{t:w}=(0,g.$G)("common"),f=!h||"guest_noca_flow"===h.uid,b=localStorage.getItem("nocaflow_guest_name")||(f?w("guest_user_default","Visiteur Curieux"):(null==h?void 0:h.displayName)||""),k=null==h?void 0:h.uid,[C,D]=(0,a.useState)(()=>{var e,t,s;{let r=JSON.parse(localStorage.getItem("nocaflow_guest_data")||"{}"),a={tasks:[],messages:[],meetings:[],projects:[],staffMembers:[],clients:[],ganttTasks:[],invoices:[],user:{displayName:b,photoURL:"/images/avatarguest.jpg"}},n={...a,...0===Object.keys(r).length?p:{},...r};for(let e of["tasks","messages","meetings","projects","staffMembers","clients","ganttTasks","invoices"])n[e]=Array.isArray(n[e])?n[e]:[];return n.user={...a.user||{},...(null==p?void 0:p.user)||{},...r.user||{},displayName:(null===(e=r.user)||void 0===e?void 0:e.displayName)||b,photoURL:(null===(t=r.user)||void 0===t?void 0:t.photoURL)||(null==p?void 0:null===(s=p.user)||void 0===s?void 0:s.photoURL)||"/images/avatarguest.jpg"},n}}),[L,M]=(0,a.useState)(b),S=(0,a.useCallback)(e=>{D(t=>{var s,r,a,n;let o={..."function"==typeof e?e(t):e};for(let e of["tasks","messages","meetings","projects","staffMembers","clients","ganttTasks","invoices"])o[e]=Array.isArray(o[e])?o[e]:[];return o.user={...o.user||{},displayName:(null===(s=o.user)||void 0===s?void 0:s.displayName)||(null===(r=t.user)||void 0===r?void 0:r.displayName)||b,photoURL:(null===(a=o.user)||void 0===a?void 0:a.photoURL)||(null===(n=t.user)||void 0===n?void 0:n.photoURL)||"/images/avatarguest.jpg"},localStorage.setItem("nocaflow_guest_data",JSON.stringify(o)),o})},[b]),T=(0,a.useMemo)(()=>f&&C.tasks||[],[f,C.tasks]),{todos:A,loading:B,addTodo:Z,editTodo:W,deleteTodo:P,toggleTodo:H}=m(k,f,S,T),V=(0,a.useMemo)(()=>{let e;let t={tasks:[],messages:[],meetings:[],projects:[],staffMembers:[],clients:[],ganttTasks:[],invoices:[],user:{displayName:"",photoURL:"/images/avatarguest.jpg"}};if(f){var s,r;(e={...t,...C}).user={...t.user,...C.user||{},displayName:L,photoURL:(null===(s=C.user)||void 0===s?void 0:s.photoURL)||(null===(r=t.user)||void 0===r?void 0:r.photoURL)},e.tasks=C.tasks}else(e={...t,...p||{}}).user=h,e.tasks=A;return e.messages=Array.isArray(e.messages)?e.messages:[],e.meetings=Array.isArray(e.meetings)?e.meetings:[],e.projects=Array.isArray(e.projects)?e.projects:[],e.staffMembers=Array.isArray(e.staffMembers)?e.staffMembers:[],e.clients=Array.isArray(e.clients)?e.clients:[],e.ganttTasks=Array.isArray(e.ganttTasks)?e.ganttTasks:[],e.invoices=Array.isArray(e.invoices)?e.invoices:[],e},[f,C,A,L,h]),z=(0,a.useCallback)(e=>{M(e),localStorage.setItem("nocaflow_guest_name",e),S(t=>({...t,user:{...t.user||{},displayName:e}}))},[S]),[q,I]=(0,a.useState)({taskEdit:null,dayDetails:null,quickTask:null,guestName:!1,avatar:!1,meeting:!1,project:null,invoiceForm:null,invoiceList:null,teamMember:null,quickChat:null,assignTaskProjectDeadline:null,clientForm:null,userNameEdit:!1,ganttTaskForm:null,googleDriveLink:null,addDeadline:!1,addMeeting:!1}),G=(0,a.useCallback)(function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return I(s=>({...Object.keys(s).reduce((e,t)=>(e[t]=!1,e),{}),[e]:t}))},[]),J=(0,a.useCallback)(()=>I({taskEdit:null,dayDetails:null,quickTask:null,guestName:!1,avatar:!1,meeting:!1,project:null,invoiceForm:null,invoiceList:null,teamMember:null,quickChat:null,assignTaskProjectDeadline:null,clientForm:null,userNameEdit:!1,ganttTaskForm:null,googleDriveLink:null,addDeadline:!1,addMeeting:!1}),[]),Y=(0,a.useCallback)(e=>{S(t=>({...t,projects:[...t.projects||[],{...e,id:"p".concat(Date.now())}]}))},[S]),Q=(0,a.useCallback)(e=>{S(t=>({...t,projects:(t.projects||[]).map(t=>t.id===e.id?e:t)}))},[S]),K=(0,a.useCallback)(e=>{S(t=>({...t,projects:(t.projects||[]).filter(t=>t.id!==e)}))},[S]),$=(0,a.useCallback)((e,t)=>{S(s=>({...s,projects:(s.projects||[]).map(s=>s.id===e?{...s,googleDriveLink:t}:s)}))},[S]),ee=(0,a.useCallback)(e=>{S(t=>({...t,staffMembers:[...t.staffMembers||[],{...e,id:"s".concat(Date.now())}]}))},[S]),et=(0,a.useCallback)(e=>{S(t=>({...t,staffMembers:(t.staffMembers||[]).map(t=>t.id===e.id?e:t)}))},[S]),es=(0,a.useCallback)(e=>{S(t=>({...t,staffMembers:(t.staffMembers||[]).filter(t=>t.id!==e)}))},[S]),er=(0,a.useCallback)(e=>{S(t=>({...t,clients:[...t.clients||[],{...e,id:"cl".concat(Date.now())}]}))},[S]),el=(0,a.useCallback)(e=>{S(t=>({...t,clients:(t.clients||[]).map(t=>t.id===e.id?e:t)}))},[S]),ew=(0,a.useCallback)(e=>{S(t=>({...t,clients:(t.clients||[]).filter(t=>t.id!==e)}))},[S]),eC=(0,a.useCallback)(e=>{S(t=>({...t,ganttTasks:e.id?(t.ganttTasks||[]).map(t=>t.id===e.id?e:t):[...t.ganttTasks||[],{...e,id:"gt-".concat(Date.now())}]}))},[S]),eD=(0,a.useCallback)(e=>{S(t=>({...t,meetings:[...t.meetings||[],{id:"meeting-".concat(Date.now()),title:e.title,dateTime:e.dateTime,attendees:e.attendees,timezone:e.timezone,sendEmail:e.sendEmail,googleMeetLink:e.googleMeetLink||"https://meet.google.com/new",createdAt:new Date().toISOString()}]}))},[S]),eL=(0,a.useCallback)(e=>{S(t=>({...t,projects:[...t.projects||[],{id:"proj-".concat(Date.now()),name:e.title,client:e.client||"General",progress:0,deadline:e.date,description:e.description,staff:[],paidAmount:"0 €",nextPayment:"N/A",totalAmount:"N/A",createdAt:new Date().toISOString(),googleDriveLink:null}]}))},[S]),eS=(0,a.useCallback)(e=>{S(t=>({...t,invoices:[...t.invoices||[],{...e,id:"inv-".concat(Date.now())}]}))},[S]),eT=a.useRef(),eA=a.useRef(),eF=(0,a.useCallback)(()=>{eT.current&&eT.current.toggleFullScreen?eT.current.toggleFullScreen():console.warn("Flow Live Messages Fullscreen function not available yet.")},[]),eB=(0,a.useCallback)(()=>{eA.current&&eA.current.toggleFullScreen?eA.current.toggleFullScreen():console.warn("Gantt Chart Planning Fullscreen function not available yet.")},[]),eZ=(0,a.useMemo)(()=>({messages:(V.messages||[]).length,tasks:(V.tasks||[]).length,meetings:(V.meetings||[]).length}),[V.messages,V.tasks,V.meetings]),eW=(0,a.useCallback)(e=>{G("assignTaskProjectDeadline",{...e,isFromChat:!0,availableTeamMembers:V.staffMembers||[]})},[G,V.staffMembers]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o(),{children:(0,r.jsx)("title",{children:"Dashboard - NocaFLOW"})}),f&&(0,r.jsx)(O,{onRegisterClick:n,t:w}),(0,r.jsx)("div",{className:"min-h-screen w-full p-4 sm:p-6 lg:p-8",children:(0,r.jsxs)(i.E.div,{className:"max-w-screen-2xl mx-auto space-y-6",initial:"hidden",animate:"visible",variants:{visible:{transition:{staggerChildren:.07}}},children:[(0,r.jsx)(y,{user:f?V.user:h,isGuestMode:f,openModal:G,handleLogout:x,stats:eZ,t:w,onOpenCalculator:s}),(0,r.jsx)(_,{projects:V.projects,meetings:V.meetings,t:w,lang:t,openModal:G}),(0,r.jsxs)("div",{className:"grid grid-cols-12 gap-6",children:[(0,r.jsx)("div",{className:"col-span-12 lg:col-span-8",children:(0,r.jsx)(N,{icon:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),title:w("flow_messages_title","Flow Live Messages"),className:"h-[500px]",onFullscreenClick:eF,t:w,noContentPadding:!0,children:(0,r.jsx)(eN,{ref:eT,t:w,currentLanguage:t,onLoginClick:u,onRegisterClick:n,onOpenAddTaskFromChat:eW,availableTeamMembers:V.staffMembers})})}),(0,r.jsx)("div",{className:"col-span-12 lg:col-span-4",children:(0,r.jsx)(E,{todos:V.tasks,loading:B,onAdd:Z,onToggle:H,onDelete:P,onEdit:e=>G("taskEdit",e),t:w,className:"h-[500px]"})}),(0,r.jsxs)("div",{className:"col-span-12 lg:col-span-8 flex flex-col gap-6",children:[(0,r.jsx)(F,{uid:k,isGuest:f,onGuestUpdate:S,t:w,className:"h-[300px]"}),(0,r.jsx)(U,{tasks:V.tasks,meetings:V.meetings,projects:V.projects,onDayClick:(e,t)=>G("dayDetails",{date:e,events:t}),t:w,className:"h-[400px]"}),(0,r.jsx)(X,{invoices:V.invoices,openInvoiceForm:()=>G("invoiceForm"),openInvoiceList:()=>G("invoiceList",{invoices:V.invoices}),t:w,className:"h-[350px]"})]}),(0,r.jsx)("div",{className:"col-span-12 lg:col-span-4 flex flex-col",children:(0,r.jsx)(R,{projects:V.projects,t:w,onAddProject:Y,onEditProject:Q,onDeleteProject:K,onAddGoogleDriveLink:e=>G("googleDriveLink",e),className:"h-[1098px]"})}),(0,r.jsx)("div",{className:"col-span-12",children:(0,r.jsx)(eE,{ref:eA,initialTasks:V.ganttTasks,t:w,staffMembers:V.staffMembers,clients:V.clients,onAddTask:e=>G("ganttTaskForm",e),onSave:eC,className:"h-[600px]",onFullscreenClick:eB})}),(0,r.jsx)("div",{className:"col-span-12 lg:col-span-6",children:(0,r.jsx)(e_,{members:V.staffMembers,onAddMember:ee,onEditMember:et,onDeleteMember:es,onQuickChat:e=>G("quickChat",e),onAssign:e=>G("assignTaskProjectDeadline",e),t:w,className:"h-[400px]"})}),(0,r.jsx)("div",{className:"col-span-12 lg:col-span-6",children:(0,r.jsx)(eM,{clients:V.clients,onAddClient:er,onEditClient:el,onDeleteClient:ew,onInvoiceForm:e=>G("invoiceForm",{client:e}),onClientInvoices:e=>G("invoiceList",{client:e}),t:w,className:"h-[400px]"})})]})]})}),(0,r.jsxs)(l.M,{children:[q.taskEdit&&(0,r.jsx)(ea,{t:w,task:q.taskEdit,onSave:W,onClose:J}),q.dayDetails&&(0,r.jsx)(en,{t:w,data:q.dayDetails,onAddTask:e=>G("quickTask",e),onClose:J}),q.quickTask&&(0,r.jsx)(eo,{t:w,date:q.quickTask,onSave:Z,onClose:J}),q.guestName&&f&&(0,r.jsx)(ei,{currentName:L,onSave:z,onClose:J,t:w}),q.userNameEdit&&!f&&(0,r.jsx)(ev,{currentUser:h,onClose:J,t:w}),q.avatar&&(0,r.jsx)(ec,{user:h,onClose:J,onUpdateGuestAvatar:e=>S(t=>({...t,user:{...t.user,photoURL:e}})),isGuestMode:f,t:w}),q.meeting&&(0,r.jsx)(ed,{t:w,onSchedule:eD,isGuest:f,onClose:J}),q.project&&"edit"===q.project.mode?(0,r.jsx)(eu,{t:w,initialData:q.project.project,onSave:Q,onDelete:K,isGuest:f,onClose:J}):q.project&&(0,r.jsx)(eu,{t:w,onAdd:Y,isGuest:f,onClose:J}),q.invoiceForm&&(0,r.jsx)(eh,{t:w,isGuest:f,client:q.invoiceForm.client,onAdd:eS,onClose:J}),q.invoiceList&&(0,r.jsx)(em,{t:w,invoices:q.invoiceList.client?(V.invoices||[]).filter(e=>e.client===q.invoiceList.client.name):V.invoices||[],onClose:J}),q.teamMember&&(0,r.jsx)(ex,{t:w,...q.teamMember,onSave:"add"===q.teamMember.mode?ee:et,onDelete:es,onClose:J}),q.quickChat&&(0,r.jsx)(ep,{t:w,member:q.quickChat,onClose:J}),q.assignTaskProjectDeadline&&(0,r.jsx)(eg,{t:w,chatData:q.assignTaskProjectDeadline,onClose:J,allStaffMembers:V.staffMembers,userUid:k,currentUserName:(null==h?void 0:h.displayName)||"Moi",onAddTask:Z}),q.clientForm&&(0,r.jsx)(ej,{t:w,...q.clientForm,onSave:"add"===q.clientForm.mode?er:el,onDelete:ew,onClose:J}),q.ganttTaskForm&&(0,r.jsx)(ef,{t:w,initialData:q.ganttTaskForm,onSave:eC,onClose:J,allStaffMembers:V.staffMembers,allClients:V.clients}),q.googleDriveLink&&(0,r.jsx)(eb,{t:w,projectId:q.googleDriveLink,onSave:$,onClose:J}),q.addDeadline&&(0,r.jsx)(ey,{t:w,onSave:eL,onClose:J}),q.addMeeting&&(0,r.jsx)(ek,{t:w,onSave:eD,onClose:J})]})]})}eE.displayName="GanttChartPlanning"}},function(e){e.O(0,[910,679,888,774,179],function(){return e(e.s=1075)}),_N_E=e.O()}]);