"use strict";(()=>{var e={};e.id=495,e.ids=[495,888,660],e.modules={1338:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{config:()=>x,default:()=>p,getServerSideProps:()=>h,getStaticPaths:()=>u,getStaticProps:()=>m,reportWebVitals:()=>g,routeModule:()=>j,unstable_getServerProps:()=>w,unstable_getServerSideProps:()=>b,unstable_getStaticParams:()=>y,unstable_getStaticPaths:()=>v,unstable_getStaticProps:()=>f});var s=a(7093),l=a(5244),i=a(1323),o=a(9981),n=a(9413),c=a(9131),d=e([n,c]);[n,c]=d.then?(await d)():d;let p=(0,i.l)(c,"default"),m=(0,i.l)(c,"getStaticProps"),u=(0,i.l)(c,"getStaticPaths"),h=(0,i.l)(c,"getServerSideProps"),x=(0,i.l)(c,"config"),g=(0,i.l)(c,"reportWebVitals"),f=(0,i.l)(c,"unstable_getStaticProps"),v=(0,i.l)(c,"unstable_getStaticPaths"),y=(0,i.l)(c,"unstable_getStaticParams"),w=(0,i.l)(c,"unstable_getServerProps"),b=(0,i.l)(c,"unstable_getServerSideProps"),j=new s.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/register",pathname:"/register",bundlePath:"",filename:""},components:{App:n.default,Document:o.default},userland:c});r()}catch(e){r(e)}})},7476:(e,t,a)=>{a.d(t,{Z:()=>r});let r=(0,a(4370).Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},3460:(e,t,a)=>{a.d(t,{Z:()=>r});let r=(0,a(4370).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},2608:(e,t,a)=>{a.d(t,{Z:()=>r});let r=(0,a(4370).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},718:(e,t,a)=>{a.d(t,{Z:()=>r});let r=(0,a(4370).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},9981:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});var r=a(997),s=a(6859);function l(){return(0,r.jsxs)(s.Html,{lang:"fr",className:"scroll-smooth",children:[(0,r.jsxs)(s.Head,{children:[r.jsx("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),r.jsx("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"}),r.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap",rel:"stylesheet"})]}),(0,r.jsxs)("body",{className:"bg-color-bg-primary text-color-text-primary antialiased",children:[r.jsx(s.Main,{}),r.jsx(s.NextScript,{})]})]})}},9131:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{default:()=>k,getServerSideProps:()=>N});var s=a(997),l=a(6689),i=a(968),o=a.n(i),n=a(5675),c=a.n(n),d=a(6197),p=a(718),m=a(7476),u=a(2608),h=a(3460),x=a(2325),g=a(401),f=a(1492),v=a(3392),y=a(4309),w=a(1163),b=a(7987),j=a(5460),_=e([d,x,g,f,v,y,b]);[d,x,g,f,v,y,b]=_.then?(await _)():_;let S=()=>(0,s.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",children:[s.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12s5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24s8.955,20,20,20s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),s.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),s.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),s.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.574l6.19,5.238C42.021,35.596,44,30.138,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),P=({icon:e,...t})=>(0,s.jsxs)("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e}),s.jsx("input",{...t,className:"w-full bg-slate-800 border border-slate-700 rounded-md pl-10 pr-4 py-2 focus:ring-pink-500 focus:border-pink-500 transition"})]}),C=({label:e,...t})=>(0,s.jsxs)("label",{className:"flex items-center gap-3 text-sm text-slate-400 cursor-pointer",children:[s.jsx("input",{type:"checkbox",...t,className:"w-4 h-4 bg-slate-700 border-slate-600 rounded text-pink-500 focus:ring-pink-500"}),e]});function k({onLoginClick:e,onRegisterClick:t}){let{t:a}=(0,b.useTranslation)("common"),{refreshUser:r}=(0,y.aC)(),i=(0,w.useRouter)(),[n,d]=(0,l.useState)({firstname:"",lastname:"",company:"",email:"",password:"",confirmPassword:"",avatarFile:null,previewAvatarUrl:""}),[j,_]=(0,l.useState)(""),[k,N]=(0,l.useState)(!1),q=e=>{d({...n,[e.target.name]:e.target.value})},F=async(e,t)=>{let a=(0,f.doc)(x.db,"users",e.uid),r=e.photoURL||null;if(t.avatarFile){N(!0);try{let a=(0,v.ref)(x.tO,`avatars/${e.uid}/${t.avatarFile.name}`),s=await (0,v.uploadBytes)(a,t.avatarFile);r=await (0,v.getDownloadURL)(s.ref),console.log("Avatar uploaded to:",r)}catch(e){throw console.error("Error uploading avatar during registration:",e),_("\xc9chec du t\xe9l\xe9chargement de l'avatar. Veuillez r\xe9essayer."),N(!1),e}}let s={uid:e.uid,email:e.email,displayName:e.displayName||`${t.firstname||""} ${t.lastname||""}`.trim(),photoURL:r,createdAt:new Date,firstname:t.firstname||"",lastname:t.lastname||"",company:t.company||""};try{await (0,f.setDoc)(a,s,{merge:!0}),console.log("User document created/updated in Firestore.")}catch(e){throw console.error("Error creating/updating user document in Firestore:",e),_("Erreur lors de la sauvegarde de votre profil. Veuillez r\xe9essayer."),e}},M=async t=>{if(t.preventDefault(),!k){if(n.password!==n.confirmPassword){_("Les mots de passe ne correspondent pas.");return}N(!0),_("");try{let t=await (0,g.createUserWithEmailAndPassword)(x.I8,n.email,n.password);console.log("Email registration successful for:",t.user.email),await F(t.user,{firstname:n.firstname,lastname:n.lastname,company:n.company,avatarFile:n.avatarFile}),r&&await r(t.user),e(),i.push("/dashboard")}catch(e){console.error("Email registration error:",e),"auth/email-already-in-use"===e.code?_(a("email_already_in_use","Cette adresse e-mail est d\xe9j\xe0 utilis\xe9e.")):"auth/weak-password"===e.code?_(a("weak_password","Le mot de passe doit contenir au moins 6 caract\xe8res.")):_(a("registration_error","Une erreur est survenue lors de l'inscription. Veuillez r\xe9essayer."))}finally{(!n.avatarFile||j)&&N(!1)}}},Z=async()=>{if(k)return;N(!0),_("");let t=new g.GoogleAuthProvider;try{let a=await (0,g.signInWithPopup)(x.I8,t);console.log("Google Sign-In successful for:",a.user.email);let s=a.user.displayName?a.user.displayName.split(" "):["",""],l=s[0]||"",o=s.slice(1).join(" ")||"";await F(a.user,{firstname:l,lastname:o,company:"",avatarFile:n.avatarFile}),r&&await r(a.user),e(),i.push("/dashboard")}catch(e){console.error("Google Sign-In error:",e),"auth/popup-closed-by-user"===e.code?_(a("google_popup_closed","La fen\xeatre de connexion Google a \xe9t\xe9 ferm\xe9e.")):"auth/cancelled-popup-request"===e.code?_(a("google_request_cancelled","La requ\xeate de connexion Google a \xe9t\xe9 annul\xe9e.")):_(a("google_signin_error","Erreur lors de la connexion avec Google. Veuillez r\xe9essayer."))}finally{(!n.avatarFile||j)&&N(!1)}};return(0,s.jsxs)(s.Fragment,{children:[s.jsx(o(),{children:s.jsx("title",{children:a("register_title","S'enregistrer")})}),(0,s.jsxs)("main",{className:"min-h-screen flex flex-col items-center justify-center p-4",children:[s.jsx("h1",{className:"text-4xl font-bold mb-6 text-white text-center",children:a("register_page_headline","Inscrivez-vous pour d\xe9marrer !")}),s.jsx("p",{className:"text-xl text-slate-400 mb-8 text-center max-w-2xl",children:a("register_page_subheadline","Commencez votre exp\xe9rience NocaFLOW en cr\xe9ant votre compte.")}),(0,s.jsxs)("form",{onSubmit:M,className:"w-full max-w-md bg-slate-900/50 p-8 rounded-lg shadow-xl border border-slate-800 space-y-6",children:[j&&s.jsx("p",{className:"text-red-500 text-center mb-4",children:j}),s.jsx("div",{className:"flex justify-center space-x-4 mb-6",children:(0,s.jsxs)("button",{type:"button",onClick:Z,className:"flex items-center justify-center gap-3 px-6 py-3 rounded-full bg-slate-700 hover:bg-slate-600 text-white font-semibold transition",children:[s.jsx(S,{})," ",a("register_with_google")]})}),s.jsx("div",{className:"text-center text-slate-400 mb-6",children:a("or_separator")}),(0,s.jsxs)("div",{className:"flex gap-4",children:[s.jsx(P,{type:"text",name:"firstname",placeholder:a("register_firstname"),value:n.firstname,onChange:q,icon:s.jsx(p.Z,{className:"w-5 h-5 text-slate-400"}),required:!0}),s.jsx(P,{type:"text",name:"lastname",placeholder:a("register_lastname"),value:n.lastname,onChange:q,icon:s.jsx(p.Z,{className:"w-5 h-5 text-slate-400"}),required:!0})]}),s.jsx(P,{type:"text",name:"company",placeholder:a("register_company"),value:n.company,onChange:q,icon:s.jsx(m.Z,{className:"w-5 h-5 text-slate-400"})}),s.jsx(P,{type:"email",name:"email",placeholder:a("login_email"),value:n.email,onChange:q,icon:s.jsx(u.Z,{className:"w-5 h-5 text-slate-400"}),required:!0}),s.jsx(P,{type:"password",name:"password",placeholder:a("login_password"),value:n.password,onChange:q,icon:s.jsx(h.Z,{className:"w-5 h-5 text-slate-400"}),required:!0}),s.jsx(P,{type:"password",name:"confirmPassword",placeholder:a("register_confirm_password"),value:n.confirmPassword,onChange:q,icon:s.jsx(h.Z,{className:"w-5 h-5 text-slate-400"}),required:!0}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-slate-700 flex items-center justify-center overflow-hidden flex-shrink-0",children:n.previewAvatarUrl?s.jsx(c(),{src:n.previewAvatarUrl,alt:"Avatar Preview",width:80,height:80,objectFit:"cover"}):s.jsx(p.Z,{className:"w-10 h-10 text-slate-400"})}),(0,s.jsxs)("label",{className:"flex-grow bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-md cursor-pointer text-center text-sm font-semibold transition",children:[a("register_avatar_upload"),s.jsx("input",{type:"file",accept:"image/*",onChange:e=>{if(e.target.files&&e.target.files[0]){let t=e.target.files[0];d(e=>({...e,avatarFile:t,previewAvatarUrl:URL.createObjectURL(t)}))}else d(e=>({...e,avatarFile:null,previewAvatarUrl:""}))},className:"hidden"})]})]}),s.jsx(C,{label:a("checkbox_age","Je confirme avoir plus de 18 ans"),required:!0}),s.jsx(C,{label:a("checkbox_terms","J'ai lu et j'accepte les conditions d'utilisation"),required:!0}),s.jsx("button",{type:"submit",disabled:k,className:"w-full bg-pink-500 hover:bg-pink-600 text-white font-bold py-3 rounded-md transition disabled:opacity-50 disabled:cursor-not-allowed",children:k?a("registering","Inscription..."):a("register_button","Cr\xe9er mon compte")}),(0,s.jsxs)("p",{className:"text-center text-sm text-slate-400 mt-4",children:[a("already_account","D\xe9j\xe0 un compte ?")," "," ",s.jsx("button",{type:"button",onClick:e,className:"text-pink-500 hover:underline",children:a("login")})]})]})]})]})}async function N({locale:e}){return{props:{...await (0,j.serverSideTranslations)(e,["common"])}}}r()}catch(e){r(e)}})},1377:e=>{e.exports=require("next-i18next")},5460:e=>{e.exports=require("next-i18next/serverSideTranslations")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},3745:e=>{e.exports=import("firebase/app")},401:e=>{e.exports=import("firebase/auth")},1492:e=>{e.exports=import("firebase/firestore")},3392:e=>{e.exports=import("firebase/storage")},6197:e=>{e.exports=import("framer-motion")},7987:e=>{e.exports=import("react-i18next")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[567,424,859,288,413],()=>a(1338));module.exports=r})();