/* src/styles/globals.css */

/* 1. Directives Tailwind CSS (déplacées depuis input.css) */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* 2. Styles de base personnalisés (@layer base) */
@layer base {
  [data-theme='light'] body {
    background: linear-gradient(135deg, #e0e7f1 0%, #c3cfe2 100%); /* Slightly deeper light blue/grey gradient */
  }

  html {
    /* Suppression de 'scroll-behavior: auto;' car il peut causer des problèmes de performance ou de conflits. */
  }

  body {
    background-color: var(--color-bg-primary);
    color: var(--color-text-primary);
    transition: background-color 0.3s ease, color 0.3s ease;
    font-family: 'Inter', sans-serif;
  }
  button, [role="button"], a, input[type="submit"], input[type="checkbox"], .cursor-pointer {
    cursor: pointer;
  }

  /* Specific rule for select elements to ensure default arrow is hidden */
  select {
    -webkit-appearance: none; /* For Safari/Chrome */
    -moz-appearance: none;    /* For Firefox */
    appearance: none;         /* Standard property */
  }
  /* Ensure the text inside select options inherits proper color */
  select option {
      color: var(--color-text-primary);
      background-color: var(--color-bg-tertiary); /* Ensure options have a background */
  }

  /* NOUVELLE PALETTE "AURORE & VERRE DÉPOLI" */
  :root, [data-theme='light'] {
    --color-bg-primary: #EDF2F7;
    --color-bg-secondary: rgba(255, 255, 255, 0.85);
    --color-bg-tertiary: #E2E8F0;
    --color-bg-input: #FFFFFF;
    --color-bg-input-field: #F0F4F8;
    --color-bg-hover: rgba(226, 232, 240, 0.7);

    --color-text-primary: #2D3748;
    --color-text-secondary: #4A5568;
    --color-text-tertiary: #718096;
    
    --color-border-primary: rgba(203, 213, 224, 0.7);
    --color-border-input: #A0AEC0;
    --color-border-active: #A855F7;

    --glass-nav-bg: rgba(240, 244, 248, 0.9);
    --glass-card-bg: rgba(255, 255, 255, 0.75);
    --glass-card-border: rgba(218, 226, 236, 0.9);
    
    --color-message-other-bg-light: #F0F4F8;
    --color-message-other-text-light: #2D3748;

    --shadow-color: rgba(90, 100, 120, 0.1);
    --color-border-active-shadow: rgba(168, 85, 247, 0.3);
  }

  [data-theme='dark'] {
    --color-bg-primary: #0d1117;
    --color-bg-secondary: #161b22;
    --color-bg-tertiary: #21262d;
    --color-bg-input: #21262d;
    --color-bg-input-field: #1a1e24;
    --color-bg-hover: rgba(255, 255, 255, 0.1);
    
    --color-text-primary: #E2E8F0;
    --color-text-secondary: #94a3b8;
    --color-text-tertiary: #64748b;

    --color-border-primary: #30363d;
    --color-border-input: #3b424d;
    --color-border-active: #ec4899;

    --glass-nav-bg: rgba(10, 10, 10, 0.6);
    --glass-card-bg: rgba(22, 27, 34, 0.7);
    --glass-card-border: rgba(255, 255, 255, 0.1);

    --shadow-color: rgba(236, 72, 153, 0.1);
    --color-border-active-shadow: rgba(236, 72, 153, 0.3);
  }
} /* Fin @layer base */

/* 3. Styles de composants/utilitaires personnalisés (@layer components ou @layer utilities) */
/* C'est ici que les règles avec @apply doivent aller */
@layer components {
  /* Application des variables Tailwind (si vous voulez des classes spécifiques) */
  .bg-color-bg-primary { background-color: var(--color-bg-primary); }
  .bg-color-bg-secondary { background-color: var(--color-bg-secondary); }
  .text-color-text-primary { color: var(--color-text-primary); }
  .text-color-text-secondary { color: var(--color-text-secondary); }
  .border-color-border-primary { border-color: var(--color-border-primary); }
  .hover\:bg-color-bg-hover:hover { background-color: var(--color-bg-hover); }

  /* Dégradés "NEXT-GEN" */
  .pink-gradient-bg   { background-image: linear-gradient(145deg, #fef0f8, #fce7f3); }
  .violet-gradient-bg { background-image: linear-gradient(145deg, #f7f3ff, #f3f0ff); }
  .green-gradient-bg  { background-image: linear-gradient(145deg, #ecfdf5, #d1fae5); }
  .yellow-gradient-bg { background-image: linear-gradient(145deg, #fffbeb, #fef3c7); }
  .sky-gradient-bg    { background-image: linear-gradient(145deg, #eff6ff, #dbeafe); }

  [data-theme='dark'] .pink-gradient-bg   { background-image: linear-gradient(145deg, var(--color-bg-tertiary), #be185d); }
  [data-theme='dark'] .violet-gradient-bg { background-image: linear-gradient(145deg, var(--color-bg-tertiary), #581c87); }
  [data-theme='dark'] .green-gradient-bg  { background-image: linear-gradient(145deg, var(--color-bg-tertiary), #065f46); }
  [data-theme='dark'] .yellow-gradient-bg { background-image: linear-gradient(145deg, var(--color-bg-tertiary), #b45309); }
  [data-theme='dark'] .sky-gradient-bg    { background-image: linear-gradient(145deg, var(--color-bg-tertiary), #0c4a6e); }

  /* Styles pour les pop-ups (modals) */
  .glass-card {
    background-color: var(--glass-card-bg);
    border: 1px solid var(--glass-card-border);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    @apply rounded-2xl shadow-lg; /* <-- @apply est ici */
  }

  .glass-nav {
    background-color: var(--glass-nav-bg);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }

  /* Animations */
  @keyframes gradient-move {
    0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; }
  }
  .animated-gradient-text {
    background-size: 200% 200%;
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent !important;
    animation: gradient-move 5s ease-in-out infinite;
    display: inline-block;
  }
  .pink-violet-gradient-text { background-image: linear-gradient(125deg, #f871b5, #c084fc, #f871b5); }

  .pulse-button { animation: pulse-glow 4s infinite ease-in-out; }
  @keyframes pulse-glow {
    0%, 100% { transform: scale(1); box-shadow: 0 0 20px var(--shadow-color); }
    50% { transform: scale(1.05); box-shadow: 0 0 35px var(--shadow-color); }
  }

  /* Scrollbar personnalisée */
  .custom-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: var(--color-border-primary) transparent;
  }

  .custom-scrollbar::-webkit-scrollbar {
    width: 8px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background-color: var(--color-border-primary);
    border-radius: 10px;
    border: 2px solid var(--color-bg-secondary);
  }

  /* New general styles for primary action buttons */
  .main-action-button {
    padding-top: 0.625rem;
    padding-bottom: 0.625rem;
    padding-left: 1.25rem;
    padding-right: 1.25rem;
    border-radius: 0.75rem;
    font-size: 1rem;
    font-weight: 700;
    color: #fff;
    transition: all 0.3s ease-in-out;
    transform-origin: center;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
  }

  .main-action-button:hover {
    transform: scale(1.02);
    box-shadow: 0 6px 25px rgba(0,0,0,0.3);
  }

  .main-action-button:active {
    transform: scale(0.98);
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  }

  .main-action-button:focus {
    outline: none;
    box-shadow: 0 0 0 4px rgba(236, 72, 153, 0.5);
  }

  /* Secondary button style for actions like 'Delete' or 'Close' if not primary */
  .main-button-secondary {
      padding-top: 0.625rem;
      padding-bottom: 0.625rem;
      padding-left: 1.25rem;
      padding-right: 1.25rem;
      border-radius: 0.75rem;
      font-size: 1rem;
      font-weight: 700;
      color: #fff;
      transition: all 0.3s ease-in-out;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      background-color: #4b5563;
      
      transform: scale(1);
  }

  .main-button-secondary:hover {
      background-color: #374151;
      transform: scale(1.02);
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
  }

  .main-button-secondary:active {
      transform: scale(0.98);
      box-shadow: 0 1px 5px rgba(0,0,0,0.05);
  }

  .main-button-secondary:focus {
      outline: none;
      box-shadow: 0 0 0 4px rgba(100, 116, 139, 0.5);
  }

  /* Styles pour le bloc d'input du message (FlowLiveMessages) */
  .glass-card-input {
    background-color: rgba(22, 27, 34, 0.7);
    border: 1px solid rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    @apply rounded-xl shadow-xl relative; /* <-- @apply est ici */
  }

  /* Styles génériques pour tous les inputs (et textarea si applicable) */
  .form-input {
      @apply w-full p-3 rounded-lg transition-all duration-200; /* <-- @apply est ici */
      background-color: var(--color-bg-input-field);
      border: 1px solid var(--color-border-input);
      color: var(--color-text-primary);
      font-size: 1rem;
      font-family: 'Inter', sans-serif;
  }

  .form-input::placeholder {
      color: var(--color-text-secondary);
      opacity: 0.7;
  }

  .form-input:focus {
      outline: none;
      border-color: var(--color-border-active);
      box-shadow: 0 0 0 3px var(--color-border-active-shadow);
  }

  /* Ombre au focus pour le mode clair et sombre */
  [data-theme='light'] .form-input:focus {
      box-shadow: 0 0 0 3px rgba(168, 85, 247, 0.3);
  }

  .form-input-glow {
      @apply form-input; /* <-- @apply est ici */
      box-shadow: inset 0 0 5px rgba(0,0,0,0.2);
  }

  .form-input-glow:focus {
      box-shadow: 0 0 0 3px var(--color-border-active), inset 0 0 8px rgba(0, 0, 0, 0.2);
  }

  /* Ajustement pour le mode clair */
  [data-theme='light'] .glass-card-input {
      background-color: rgba(255, 255, 255, 0.9);
      border: 1px solid rgba(218, 226, 236, 0.9);
  }

  [data-theme='light'] .form-input-glow {
      @apply bg-white text-gray-800 border-gray-300; /* <-- @apply est ici */
      box-shadow: inset 0 0 5px rgba(0,0,0,0.08);
  }

  [data-theme='light'] .form-input-glow:focus {
      box-shadow: 0 0 0 3px rgba(168, 85, 247, 0.3), inset 0 0 8px rgba(168, 85, 247, 0.15);
  }

  /* Scrollbar personnalisée (déclaration unique et correcte) */
  .custom-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: var(--color-border-primary) transparent;
  }

  .custom-scrollbar::-webkit-scrollbar {
    width: 8px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background-color: var(--color-border-primary);
    border-radius: 10px;
    border: 2px solid var(--color-bg-secondary);
  }

  /* Nouvelle classe pour les cartes minimisées */
  .minimized-card {
      height: 70px !important;
      transition: height 0.3s ease-in-out, padding 0.3s ease-in-out;
      padding-bottom: 0 !important;
      overflow: hidden !important;
  }

  /* Fix pour framer-motion et les hauteurs automatiques */
  .flex-grow[style*="height: auto"] {
      min-height: 0;
  }
} /* Fin @layer components */

/* 4. Styles d'utilitaires génériques (pas d'@apply ici, juste des animations, etc.) */
/* Ces animations peuvent être hors d'un layer si elles ne dépendent pas de @apply */
@keyframes gradient-move {
  0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; }
}
.animated-gradient-text {
  background-size: 200% 200%;
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent !important;
  animation: gradient-move 5s ease-in-out infinite;
  display: inline-block;
}
.pink-violet-gradient-text { background-image: linear-gradient(125deg, #f871b5, #c084fc, #f871b5); }

.pulse-button { animation: pulse-glow 4s infinite ease-in-out; }
@keyframes pulse-glow {
  0%, 100% { transform: scale(1); box-shadow: 0 0 20px var(--shadow-color); }
  50% { transform: scale(1.05); box-shadow: 0 0 35px var(--shadow-color); }
}

/* Typewriter effect */
.typewriter-text {
  white-space: nowrap;
  overflow: hidden;
  animation: typing 6s steps(60, end) infinite,
             blink-caret 0.75s step-end infinite;
}

@keyframes typing {
  from { width: 0 }
  to { width: 100% }
}

@keyframes blink-caret {
  from, to { border-color: transparent }
  50% { border-color: var(--color-border-active); }
}

/* Correction pour le comportement du curseur dans la boucle */
.typewriter-text {
  animation: none;
}

.typewriter-text[data-state="typing"] {
  animation: typing 6s steps(60, end) forwards, blink-caret .75s step-end infinite;
}